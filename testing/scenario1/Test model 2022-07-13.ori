{
    "event_queue": {
        "events": []
    },
    "image_dictionary": {},
    "rng_state": "gANLAyiKBQAAAIAASjPr2mqKBc2cjI4ASjFLH2SKBfdI/tIASh4rt1VKRwSNfYoFuEe0hACKBRN+/JgAigUJeCfEAIoF560FwgCKBYLqy+gAigVVMQfOAIoFV5A/wABKtujiBYoF9pIj7wCKBXKhUYYASstUsW5KBU+bR0ocjKAyigULivKzAEqovA0HigXfJEmEAIoFTP2tsgCKBX7cY7gAigX9Y6+kAErYHQVQigXvNn3pAErpEsM/SpoLWw5KRNZBAIoFS6RD2ABKIK+kQ0o6NL55igVeIHTFAErUiIJGigWIc6veAIoFh0ariwCKBY1MU+0AStTI8DBKsksQHooFo3Q/0gBKsREOQ0qUdNgoSsxRJlyKBWbvJeEAigXeNq6lAEqIy0QtigUZT5nbAIoF/O+zwgBKDE16ekrK+CJ+igULrryxAIoFyYto8ACKBR2WFa0AigUbKcTRAIoFfBRcmgBKp+UcVIoFbG86hgBKHFl8EEprCskmShtbHW9K3hsfaIoFq+dM9wCKBcr3zZ0ASi414j+KBeErPIIASiYFOkyKBZSQgIkASkewSR9K8p8pM4oFghfCqQCKBfk9sIkASoEjaxKKBaz+fegAigWvlbLdAEpjpTIDigU26ZTHAIoFObKcqQBK6fPzcIoFZIxBiABKiMSqZooFpjmj7QBKbJsdWUq6TahzSugTrz+KBc3ku/8ASqseAm2KBbybWNoASuhV2yVKZewPXEoBQ41AigXaQoG1AEoJ4WETSvLJuRNKCxO9e4oFNLathQCKBYvlCr4AigXLzQCMAEoAGKsXSuWPXGmKBTHdhNgAigX9y9n3AErxTkcUigWkXAPOAEquQrUzSoDSTGqKBe6RGLUAigXv9R6JAEqFvdQySnNPOwRKFYM3LIoFe/dIhwBKt/WlRooFs6YxyQCKBXMbcP0AigWlIQnKAIoFukqFxABKHiMhDkrk39clSpbYlAGKBdfKkNUAigWFIhyCAIoFmoTm3QBKdnJlEYoFVSKa0QCKBZctLvcAigVxz8DlAEqODrk1igUuncf3AIoFDkuogQBKHKFybIoFvbgCkABKlAn5FooF49yS7gBKYZ1qIUrwINJiSrXOuUxKS3ugWkrrRAE0SujMkBWKBbybUpYAigUCAzPiAEruZrZWigXz5TmPAIoFC2QmrQCKBazBFoYAigWHWSytAIoFs0JZ4ABKefqdGooFm3Fk5wBKzSpRZIoFaOIVxQCKBQqp5M4ASnBlHkeKBU0MlJEASuV0426KBaVC/fQAigWw/ZfMAEo5xRk9igWSio+/AEpiN402SlpP0DGKBZnNx+wASvpzhUyKBc2QWJsAigWtro3cAIoFuYKjswCKBUDK5tMAigVAZV+MAIoFAZ4q5ACKBcSYzOEASqg9IAaKBXlsFoEASpJ8bkSKBRFuWKIAStlUCCGKBfDrvugAigW22wHfAEoaT9UJSoV5AUxKB1I1NYoF5bH5mgBKGKyqL0pv6ShcigUILzvsAIoF1VEMrgCKBfWpAOsAigVxQf2/AIoFXUKdnQCKBUVXyv4AShuNmwlK8CtMakoLlzNlSoEhzRGKBc6YD4YAigVRQ0vXAIoFQ95gowBKr/Q8UooFGC51xACKBYG8Tf0ASoQh9yeKBTy0ddoAigUrmweiAIoFAIWF+QCKBd66se0ASgrJKl2KBQM8kqMASkkNFiiKBQPMcNIAigXIFiS/AIoFpptd3ACKBfCLb8oAigV8hYvZAEpvIdhwSrpmgTCKBWqAc78ASjFTWAZKvdxmcooFhLp5sQBK81f9Q4oFcZP4mgBKlc01dEp3PCwKigWU1tCZAErddkE5igXL65yQAIoFM+aSwgBKAH5IE0oMeccsSqB/swiKBZUEsKkASkfTFExKCw18MYoFHjMXlwBKPy2wJooF1yuA7QBK5n3iZooF9oxVmgCKBaHtePkAigUMewDyAErIsuALSlSXAjRKZLEWPIoF/qow2QCKBb/w+6kASg0WxyFK9U7hCEpH3+U1igW2ZaLTAIoF24iygACKBcxYQY4ASqvoWEZKBf1yZEpevXhCSnsgAWSKBf3ri9kASsVycT1KwCBQLYoF/wHZmgBKPMtqNooFyOgLxgBK3KQkVooFvPu9yQBKMeDNBYoF7No4+ACKBfoNUqsASrf7zmGKBa1Tp7AASnKM/XhKkJ/DQYoFKS5PqwBKNBB1eYoF2Q+OzQCKBb6vqd0AigWsTBvzAIoFK/JS+wCKBcXkVdIASr44bFlKvuQDS4oF7Vb70ACKBdOU38cAigUw5aq+AIoF5Bz7gwBKQh0DLEoPVSZRigUSJ4mrAIoF8GmchACKBSsCPboAigVBUY6RAEoYeSVWStYnyGuKBZlwX80ASvYV6ERKBzXGc4oFLxXBiABK0okBSooFn2frtABKMtidGIoFAr5B/wBK1szyW4oF54SPiwBKtJRKc0qGRzs8igUP4lzZAEolNmNWigWIdx/nAEpo7gxNigVNoqGqAErQo5dPigXz4wD+AIoFJbqBhgBK38j8XooFJbHKggCKBYsQBfMASgNzdxmKBa39b84ASjQicyKKBb5cnesAigUASLyoAIoFDd8/2QCKBSIjZLkAStz5BxRKaMqaIUoTc6xCigUDTbGkAEpuwy4WSvWZzxyKBa/KcukASqNd6HhKoMqeS0plhPFmSgy9R1uKBbAnT6wASruaYxVK+JcHAooFNbYs/gCKBYb6H+4ASnGNS3dKF+qwL0qvEyYPSnsd+EeKBWHCfIEASngtEW6KBfpiHMgAigUckjLgAIoFr2EouABKiZzYbIoFY8thxwCKBa8I+84ASgvwNHqKBcl03sQAigXfhI7gAIoFSzrXxwBKrfHNB4oFfeEgmQBKz0NJPkpTWlFlSpWkyR2KBUpWtYkAShLiUlOKBYahZ94AStkjfT6KBa1NF7AASt3f+mhK+snxTkq+gdZMigVHNXXmAEoWxTNQSkWuuWhKSVu6PYoFkrvh4gCKBWB3W48ASjQ02liKBVXekpIAShSatlNKfKFaQEoIwglaSnmsVSaKBQyXKtEASknK0HRKyOpXYkr6GqIxSthZOmOKBVNQ2coAStIlQH2KBRYTz60ASnrQeA5KVAnUDIoF4rrfjQBKFWp8TUr5zcQtigXPurmmAEo48O1+StKkZXaKBSVjYpkASkk3xBuKBWMr9cEAigXwGEWYAErmE/pMSsaQAmqKBc0t37kAigWbvJnXAIoFm9ORnwCKBQxi8bUASiD/fDmKBb7ypvUASsWuQyRKuNT+GEoOcGI+igXlwQGLAIoFeTVilwCKBTPrbeEAigX6l1vNAEqixr5MigUV5n70AIoFJIZY2wCKBVUSu50AigVXSg7CAEqMjDsaigXVUzHjAIoF4i1h4QBKuCO/dUrbBvg7Su9qAWiKBbdllM0AigVYU9nXAEpXr/5zSunwUhKKBTLgw5QASo2PrmOKBZEZDckAigXVKPalAEoFeicligVA2xWcAIoFU09HhQCKBY+ofo4ASuX/PBSKBapf6NEAigXxiha/AIoFFp5uiQCKBePE6dQASvH/UWaKBdPiO+QAigUxhuDiAIoFiv52wQCKBebpFO0AShoq5nyKBSgYmqoAigV8Fa/NAErxf+I7SsaVLDKKBaPCX6EASl9jv2qKBadB//8ASpETowxKazJSAYoFrNbR5gBKdwE/KUp2RSEKSnoDKQeKBVO6SOwAigXV9OiWAErymYxVigUIzfP3AEqzah5digUWPVmWAEqDqMtEShcaan1K7GC6VooFk1PpmQBKlvYTfIoFh3jdwwCKBc8X04kASoVd5xNKceEEJ0ojEmgPigWk7HqIAIoFfANTyQCKBV/OwYIAigUeVfOEAEpwfABiSl9t3kmKBR/CTrEAigUA94eBAEqF98s+igW2L47XAEr07l8WigWjOtXWAIoFlA02vgBKCyihYkqJgr55ShiFBUaKBYRZSLUASrZorzyKBViUspYASomf4E+KBSPvb5IAigVV4Q+/AEodkBYeigV5Cb68AIoFPnWvtgBKp4g9G4oF/MxQ3wCKBdvD1dgASrNGIyiKBZUUZaAASqZejH2KBc9KbZ8ASu88QSGKBeMjW58ASjkWTm+KBYnEBYIASvNWyjaKBRokDqUASjJV0h+KBZMn5eMAigUf9GTzAIoFe8EpgQCKBR2aj7kASmcbUA9KyWVqK0pNdLUxSswI1VeKBUpB5ukASniwuwtKR7kteEocpaRYigVkhou/AEo5byMySrFHb1FKfG8XEUonuKYXSn+HHTVKvzjickryvPsaigXtIOTOAIoF3fRfqgBK31VPcUpkcBUnSo1RIQxKuR01UUpRwUQ2SqizMRuKBdG/4sIASllSvUCKBU+Vg+IAigWgrpyKAEpNd0lhigWOtMjaAEqCj3YMigUjbCiJAEqzueAnigXxrG7tAEpapi4DSi765QdKJ720VYoFWbd3iwBKcsn2Y4oFb361/wBKugQoYIoFVgPm2QBKNbOdL4oFSAcknACKBW+gEt0ASkj6pTqKBfNmI4sAigWeFRr7AEqUtj40Sl7xvTuKBctHDoQAigUNSOi5AIoFjI3ZngCKBV9MQa8AigUIQUKnAEq0KLNzigUZNz68AIoFYsnhxwBKwiTJMIoFflG8zwBKrNi2XYoFCu5P2gCKBbsDYfMASpLHe3qKBZ+Y/MwASmTG8FtKirVmEYoFeKPmuACKBVN77K8ASua0VwdK9YprekoNNbc3igVW3ImpAIoFq9sZyQCKBUxjYOkASgdb8SaKBfqPqNkASu8pcDFKuW4rHkqEdkM4igUicbuvAErq6u8vSvicwHmKBeuJTvoAigVf9/apAIoFRloftQBKbCLEP4oFzR9sywBKMnBXPUrs3eQlSmb22nlKdlgaUIoFVjnrgQBKE8nYZooFddD0kQBKM8WHB4oFv7IpuACKBbeKB64ASuKM6GyKBb+5brEAigX110zjAEocrP0AigVj75/8AEoSFOxETXACdHEATodxAS4=",
    "scenario_def": {
        "name": "Default Scenario",
        "root_actor_part": {
            "content": {
                "children": [
                    {
                        "content": {
                            "children": [
                                {
                                    "content": {
                                        "children": [
                                            {
                                                "content": {},
                                                "key": 1103,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 1,
                                                    "name": "node",
                                                    "outgoing_links": {
                                                        "node": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1118,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 29.26767696826682,
                                                        "y": -26.718884015288623
                                                    },
                                                    "size": {
                                                        "height": 0.5,
                                                        "scale_3d": 1.0,
                                                        "width": 0.5
                                                    },
                                                    "visible": true
                                                },
                                                "type": "node"
                                            },
                                            {
                                                "content": {
                                                    "dict": [
                                                        [
                                                            "Startdate",
                                                            "gANjZGF0ZXRpbWUKZGF0ZXRpbWUKcQBDCgfjCB8IAAAAAABxAYVxAlJxAy4="
                                                        ],
                                                        [
                                                            "ReserveAheadDays",
                                                            14
                                                        ],
                                                        [
                                                            "DurationDays",
                                                            183
                                                        ],
                                                        [
                                                            "ResReq",
                                                            {
                                                                "Col": 5,
                                                                "LCol": 10,
                                                                "Lt-Capt": 40,
                                                                "Maj": 26
                                                            }
                                                        ],
                                                        [
                                                            "PostTaskPeriodDays",
                                                            365
                                                        ],
                                                        [
                                                            "MinFill",
                                                            0.9
                                                        ],
                                                        [
                                                            "Resources",
                                                            []
                                                        ],
                                                        [
                                                            "RepeatDelayDays",
                                                            183
                                                        ],
                                                        [
                                                            "DeployDate",
                                                            []
                                                        ],
                                                        [
                                                            "DeployReq",
                                                            []
                                                        ],
                                                        [
                                                            "Source",
                                                            "reg-aug"
                                                        ],
                                                        [
                                                            "DeployCountReg",
                                                            []
                                                        ],
                                                        [
                                                            "DeployCountRes",
                                                            []
                                                        ]
                                                    ],
                                                    "display_order": "of_creation",
                                                    "pickled_keys": [
                                                        "Startdate"
                                                    ]
                                                },
                                                "key": 1104,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "data",
                                                    "outgoing_links": {},
                                                    "position": {
                                                        "x": 3.075052271890707,
                                                        "y": -6.740931701612416
                                                    },
                                                    "size": {
                                                        "height": 11.488095238095237,
                                                        "scale_3d": 1.0,
                                                        "width": 11.25
                                                    },
                                                    "visible": true
                                                },
                                                "type": "data"
                                            },
                                            {
                                                "content": {},
                                                "key": 1105,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "hub",
                                                    "outgoing_links": {
                                                        "data": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1104,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "datetime": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1108,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "library": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1113,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": -3.9749345304900867,
                                                        "y": -15.899738121960343
                                                    },
                                                    "size": {
                                                        "height": 1.5,
                                                        "scale_3d": 1.0,
                                                        "width": 1.5
                                                    },
                                                    "visible": true
                                                },
                                                "type": "hub"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "",
                                                    "roles_and_prioritizing": {
                                                        "startup": 0
                                                    },
                                                    "script_imports": {
                                                        "datetime": [
                                                            "datetime",
                                                            "datetime"
                                                        ],
                                                        "timedelta": [
                                                            "datetime",
                                                            "timedelta"
                                                        ]
                                                    },
                                                    "script_lines": [
                                                        "T = link.hub.data.Startdate - timedelta(days = link.hub.data.ReserveAheadDays)\r",
                                                        "\r",
                                                        "signal(link.RequestResources, (), link.hub.datetime(T.year, T.month, T.day, T.hour, T.minute, T.second))\r",
                                                        ""
                                                    ]
                                                },
                                                "key": 1106,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "DelayToReserveAheadTime",
                                                    "outgoing_links": {
                                                        "RequestResources": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1109,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1105,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": -15.755654286738903,
                                                        "y": -29.530532505589623
                                                    },
                                                    "size": {
                                                        "height": 5.089285714285714,
                                                        "scale_3d": 1.0,
                                                        "width": 13.422619047619047
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "",
                                                    "roles_and_prioritizing": {
                                                        "reset": 0
                                                    },
                                                    "script_imports": {
                                                        "datetime": [
                                                            "datetime",
                                                            "datetime"
                                                        ]
                                                    },
                                                    "script_lines": [
                                                        "link.hub.data.Startdate = datetime(2019, 8, 31, 8, 0, 0)\r",
                                                        "#link.hub.data.ReserveAheadDays= 7\r",
                                                        "#link.hub.data.DurationDays = 183\r",
                                                        "#link.hub.data.PostTaskPeriodDays = 365\r",
                                                        "#link.hub.data.MinFill = 0.0\r",
                                                        "#link.hub.data.RepeatDelayDays = 183\r",
                                                        "link.hub.data.DeployCountReg = []\r",
                                                        "link.hub.data.DeployCountRes = []\r",
                                                        "link.hub.data.DeployDate = []\r",
                                                        "link.hub.data.DeployReq = []\r",
                                                        "\r",
                                                        "#resReq = {}\r",
                                                        "#resReq['Lt-Capt'] = 8\r",
                                                        "#resReq['Maj'] = 5\r",
                                                        "#resReq['LCol'] = 2\r",
                                                        "#resReq['Col'] = 1\r",
                                                        "\r",
                                                        "#link.hub.data.ResReq = resReq\r",
                                                        "link.hub.data.Resources = []\r",
                                                        "\r",
                                                        "\r",
                                                        "link.hub.datetime.set_date_time(datetime(2019,6,1,9,0,0))\r",
                                                        "\r",
                                                        ""
                                                    ]
                                                },
                                                "key": 1107,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "Reset",
                                                    "outgoing_links": {
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1105,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": -5.299727927750011,
                                                        "y": -6.763436460243045
                                                    },
                                                    "size": {
                                                        "height": 5.1,
                                                        "scale_3d": 1.0,
                                                        "width": 10.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "date_time": {
                                                        "day": 1,
                                                        "hour": 9,
                                                        "minute": 0,
                                                        "month": 6,
                                                        "second": 0,
                                                        "year": 2019
                                                    }
                                                },
                                                "key": 1108,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "datetime",
                                                    "outgoing_links": {},
                                                    "position": {
                                                        "x": 3.3518547433989476,
                                                        "y": -20.03394483576553
                                                    },
                                                    "size": {
                                                        "height": 3.1,
                                                        "scale_3d": 1.0,
                                                        "width": 6.2
                                                    },
                                                    "visible": true
                                                },
                                                "type": "datetime"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "",
                                                    "roles_and_prioritizing": {},
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "#make the resource request and get back list of resources\r",
                                                        "resReg, resRes = link.node.RequestResources(link.hub.data.DurationDays, link.hub.data.ResReq, link.hub.data.Source)\r",
                                                        "\r",
                                                        "#if did not get enough resources, drop the task\r",
                                                        "if len(resReg) + len(resRes) < link.hub.library.get_res_req_size()*link.hub.data.MinFill:\r",
                                                        "\r",
                                                        "    #signal to record dropping the task after reserve ahead delay\r",
                                                        "    signal(link.DropTask, (resReg, resRes), delay(days = link.hub.data.ReserveAheadDays))  \r",
                                                        "\r",
                                                        "else:\r",
                                                        "\r",
                                                        "    #reserve the resources\r",
                                                        "    link.node.ReserveResources(link.hub.data.DurationDays, resReg, resRes)\r",
                                                        "\r",
                                                        "    #signal to start the task after reserve ahead delay\r",
                                                        "    signal(link.StartTask, (resReg, resRes), delay(days = link.hub.data.ReserveAheadDays))  \r",
                                                        "\r",
                                                        "\r",
                                                        "#repeat task later\r",
                                                        "signal(self, (), delay(days = link.hub.data.RepeatDelayDays))\r",
                                                        "\r",
                                                        ""
                                                    ]
                                                },
                                                "key": 1109,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "RequestResources",
                                                    "outgoing_links": {
                                                        "DropTask": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1116,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "StartTask": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1110,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1105,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "node": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1103,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": -7.120547593432133,
                                                        "y": -29.54183786506508
                                                    },
                                                    "size": {
                                                        "height": 5.1,
                                                        "scale_3d": 1.0,
                                                        "width": 10.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "resReg, resRes",
                                                    "roles_and_prioritizing": {},
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "#deploy the resources\r",
                                                        "link.node.DeployResources(resReg, resRes)\r",
                                                        "\r",
                                                        "#signal end task after task duration\r",
                                                        "signal(link.EndTask, (resReg, resRes), delay(days = link.hub.data.DurationDays))\r",
                                                        "\r",
                                                        "#record deploy count and deploy date\r",
                                                        "link.hub.data.Resources.append((resReg, resRes))\r",
                                                        "link.hub.data.DeployCountReg.append(len(resReg))\r",
                                                        "link.hub.data.DeployCountRes.append(len(resRes))\r",
                                                        "link.hub.data.DeployDate.append(link.hub.datetime.date_time)\r",
                                                        "link.hub.data.DeployReq.append(link.hub.library.get_res_req_size())\r",
                                                        ""
                                                    ]
                                                },
                                                "key": 1110,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "StartTask",
                                                    "outgoing_links": {
                                                        "EndTask": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1111,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1105,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "node": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1103,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 1.0826546903645664,
                                                        "y": -29.547450924533045
                                                    },
                                                    "size": {
                                                        "height": 5.1,
                                                        "scale_3d": 1.0,
                                                        "width": 10.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "resReg, resRes",
                                                    "roles_and_prioritizing": {},
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "link.node.ReturnResources(resReg, resRes)\r",
                                                        "\r",
                                                        "signal(link.EndPostDeployPeriod, (resReg, resRes), delay(days = link.hub.data.PostTaskPeriodDays))\r",
                                                        "\r",
                                                        "pass"
                                                    ]
                                                },
                                                "key": 1111,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "EndTask",
                                                    "outgoing_links": {
                                                        "EndPostDeployPeriod": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1112,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1105,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "node": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1103,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 9.33789670439442,
                                                        "y": -29.63767214873012
                                                    },
                                                    "size": {
                                                        "height": 5.1,
                                                        "scale_3d": 1.0,
                                                        "width": 10.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "resReg, resRes",
                                                    "roles_and_prioritizing": {},
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "link.node.ReleaseResources(resReg, resRes)\r",
                                                        "\r",
                                                        ""
                                                    ]
                                                },
                                                "key": 1112,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "EndPostDeployPeriod",
                                                    "outgoing_links": {
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1105,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "node": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1103,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 17.32247504583313,
                                                        "y": -29.592561536631585
                                                    },
                                                    "size": {
                                                        "height": 5.1,
                                                        "scale_3d": 1.0,
                                                        "width": 10.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "def get_res_req_size():\r",
                                                        "    \r",
                                                        "    resReq = link.hub.data.ResReq\r",
                                                        "    \r",
                                                        "    size = 0\r",
                                                        "    for rank in resReq:\r",
                                                        "        size += resReq[rank]\r",
                                                        "        \r",
                                                        "    return size\r",
                                                        "    "
                                                    ]
                                                },
                                                "key": 1113,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "library",
                                                    "outgoing_links": {
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1105,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": -13.84880620276239,
                                                        "y": -10.2285788551523
                                                    },
                                                    "size": {
                                                        "height": 5.1,
                                                        "scale_3d": 1.0,
                                                        "width": 10.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "library"
                                            },
                                            {
                                                "content": {
                                                    "script_lines": [
                                                        "def configure():\r",
                                                        "    axes = setup_axes(1, 1)\r",
                                                        "\r",
                                                        "\r",
                                                        "def plot():\r",
                                                        "\r",
                                                        "    #x = numpy.linspace(0, 1)\r",
                                                        "    #y = numpy.sin(4 * numpy.pi * x) * numpy.exp(-5 * x)\r",
                                                        "    axes.plot(link.data.DeployDate, link.data.DeployCountRes, 'b', label = 'Deployed - Res')\r",
                                                        "    axes.plot(link.data.DeployDate, link.data.DeployCountReg, 'g', label = 'Deployed - Reg')\r",
                                                        "    axes.plot(link.data.DeployDate, link.data.DeployReq, 'k', linestyle = 'dashed', linewidth = 3, label = 'Requirement')\r",
                                                        "\r",
                                                        "    handles, labels = axes.get_legend_handles_labels()\r",
                                                        "    axes.legend(handles, labels, loc = 9, ncol = 3, bbox_to_anchor = (0.5, 1.12))\r",
                                                        "    "
                                                    ]
                                                },
                                                "key": 1114,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "plot",
                                                    "outgoing_links": {
                                                        "data": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1104,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 22.85741180156763,
                                                        "y": -8.60822974214695
                                                    },
                                                    "size": {
                                                        "height": 16.2,
                                                        "scale_3d": 1.0,
                                                        "width": 15.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "plot"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "reserveAheadDays, durationDays, postTaskPeriodDays, minFill, repeatDelayDays, resReq, source",
                                                    "roles_and_prioritizing": {
                                                        "setup": 0
                                                    },
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "link.hub.data.ReserveAheadDays= reserveAheadDays\r",
                                                        "link.hub.data.DurationDays = durationDays\r",
                                                        "link.hub.data.PostTaskPeriodDays = postTaskPeriodDays\r",
                                                        "link.hub.data.MinFill = minFill\r",
                                                        "link.hub.data.RepeatDelayDays = repeatDelayDays\r",
                                                        "link.hub.data.ResReq = resReq\r",
                                                        "link.hub.data.Source = source"
                                                    ]
                                                },
                                                "key": 1115,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "Setup",
                                                    "outgoing_links": {
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1105,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": -14.742508127637787,
                                                        "y": -17.35106948134527
                                                    },
                                                    "size": {
                                                        "height": 5.1,
                                                        "scale_3d": 1.0,
                                                        "width": 10.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "resReg, resRes",
                                                    "roles_and_prioritizing": {},
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "#record deploy count and deploy date for a dropped task\r",
                                                        "link.hub.data.Resources.append((resReg, resRes))\r",
                                                        "link.hub.data.DeployCountReg.append(0)\r",
                                                        "link.hub.data.DeployCountRes.append(0)\r",
                                                        "link.hub.data.DeployDate.append(link.hub.datetime.date_time)\r",
                                                        "link.hub.data.DeployReq.append(link.hub.library.get_res_req_size())"
                                                    ]
                                                },
                                                "key": 1116,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "DropTask",
                                                    "outgoing_links": {
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1105,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 0.9976303127661255,
                                                        "y": -35.193433151894254
                                                    },
                                                    "size": {
                                                        "height": 5.1,
                                                        "scale_3d": 1.0,
                                                        "width": 10.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "script_lines": [
                                                        "def configure():\r",
                                                        "    axes = setup_axes(1, 1)\r",
                                                        "\r",
                                                        "\r",
                                                        "def plot():\r",
                                                        "    \r",
                                                        "    axes.clear()\r",
                                                        "    \r",
                                                        "    req = link.data.DeployReq\r",
                                                        "    reg = link.data.DeployCountReg\r",
                                                        "    res = link.data.DeployCountRes\r",
                                                        "    date = link.data.DeployDate\r",
                                                        "    x = list(range(len(date)))\r",
                                                        "    #x = date\r",
                                                        "\r",
                                                        "    #empty = []\r",
                                                        "    #for i in range(len(date)):\r",
                                                        "    #    empty.append(req[i] - reg[i] - res[i])\r",
                                                        "\r",
                                                        "    #empty_bottom = []\r",
                                                        "    #for i in range(len(date)):\r",
                                                        "    #    empty.append(reg[i] + res[i])\r",
                                                        "\r",
                                                        "    empty = [i - j - k for i,j,k in zip(req, reg, res)]\r",
                                                        "    empty_bottom = [i + j for i,j in zip(reg,res)]\r",
                                                        "\r",
                                                        "    width = 1\r",
                                                        "\r",
                                                        "    axes.bar(x, reg, width, 0, color = 'royalblue', linewidth = 0.1, label = 'Deployed - Reg')\r",
                                                        "    axes.bar(x, res, width, reg, color = 'brown', linewidth = 0.1, label = 'Deployed - Res')\r",
                                                        "    axes.bar(x, empty, width, empty_bottom, color = 'lightgrey', linewidth = 0.1, label = 'Empty')\r",
                                                        "    #axes.bar(x, link.data.DeployCountReg, 0.8, link.data.DeployCountReg, color = 'r', label = 'Deployed - Res')\r",
                                                        "\r",
                                                        "    #axes.plot(link.data.DeployDate, link.data.DeployCountRes, 'b', label = 'Deployed - Res')\r",
                                                        "    #axes.plot(link.data.DeployDate, link.data.DeployCountReg, 'g', label = 'Deployed - Reg')\r",
                                                        "    #axes.plot(link.data.DeployDate, link.data.DeployReq, 'k', linestyle = 'dashed', linewidth = 3, label = 'Requirement')\r",
                                                        "\r",
                                                        "    handles, labels = axes.get_legend_handles_labels()\r",
                                                        "    axes.legend(handles, labels, loc = 9, ncol = 3, bbox_to_anchor = (0.5, 1.12))"
                                                    ]
                                                },
                                                "key": 1117,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "plot",
                                                    "outgoing_links": {
                                                        "data": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1104,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 19.54926267981882,
                                                        "y": 10.496621154789082
                                                    },
                                                    "size": {
                                                        "height": 16.2,
                                                        "scale_3d": 1.0,
                                                        "width": 15.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "plot"
                                            }
                                        ],
                                        "ifx_ports_left": [],
                                        "ifx_ports_right": [
                                            1103
                                        ],
                                        "image_id": null,
                                        "proxy_position": {
                                            "x": 0.057463926152541034,
                                            "y": -1.6089899322711483
                                        },
                                        "rotation_2d": 0.0,
                                        "rotation_3d": {
                                            "pitch": 0.0,
                                            "roll": 0.0,
                                            "yaw": 0.0
                                        }
                                    },
                                    "key": 1102,
                                    "part_frame": {
                                        "comment": "",
                                        "detail_level": "full",
                                        "frame_style": "normal",
                                        "ifx_level": 0,
                                        "name": "Task1",
                                        "outgoing_links": {},
                                        "position": {
                                            "x": -2.1770282186948853,
                                            "y": -5.433401475068139
                                        },
                                        "size": {
                                            "height": 2.4107142857142856,
                                            "scale_3d": 1.0,
                                            "width": 5.238095238095238
                                        },
                                        "visible": true
                                    },
                                    "type": "actor"
                                },
                                {
                                    "content": {},
                                    "key": 1118,
                                    "part_frame": {
                                        "comment": "",
                                        "detail_level": "full",
                                        "frame_style": "normal",
                                        "ifx_level": 1,
                                        "name": "node",
                                        "outgoing_links": {
                                            "node": {
                                                "bold": false,
                                                "declutter": false,
                                                "target_path": 1381,
                                                "visible": true,
                                                "waypoints": []
                                            }
                                        },
                                        "position": {
                                            "x": 12.659665437443213,
                                            "y": -9.820426487093153
                                        },
                                        "size": {
                                            "height": 0.5,
                                            "scale_3d": 1.0,
                                            "width": 0.5
                                        },
                                        "visible": true
                                    },
                                    "type": "node"
                                },
                                {
                                    "content": {
                                        "children": [
                                            {
                                                "content": {},
                                                "key": 1120,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 1,
                                                    "name": "node",
                                                    "outgoing_links": {
                                                        "node": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1118,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 29.26767696826682,
                                                        "y": -26.718884015288623
                                                    },
                                                    "size": {
                                                        "height": 0.5,
                                                        "scale_3d": 1.0,
                                                        "width": 0.5
                                                    },
                                                    "visible": true
                                                },
                                                "type": "node"
                                            },
                                            {
                                                "content": {
                                                    "dict": [
                                                        [
                                                            "Startdate",
                                                            "gANjZGF0ZXRpbWUKZGF0ZXRpbWUKcQBDCgfjCB8IAAAAAABxAYVxAlJxAy4="
                                                        ],
                                                        [
                                                            "ReserveAheadDays",
                                                            7
                                                        ],
                                                        [
                                                            "DurationDays",
                                                            60
                                                        ],
                                                        [
                                                            "ResReq",
                                                            {
                                                                "Col": 3,
                                                                "LCol": 7,
                                                                "Lt-Capt": 30,
                                                                "Maj": 15
                                                            }
                                                        ],
                                                        [
                                                            "PostTaskPeriodDays",
                                                            120
                                                        ],
                                                        [
                                                            "MinFill",
                                                            0.9
                                                        ],
                                                        [
                                                            "Resources",
                                                            []
                                                        ],
                                                        [
                                                            "RepeatDelayDays",
                                                            365
                                                        ],
                                                        [
                                                            "DeployDate",
                                                            []
                                                        ],
                                                        [
                                                            "DeployReq",
                                                            []
                                                        ],
                                                        [
                                                            "Source",
                                                            "reg-aug"
                                                        ],
                                                        [
                                                            "DeployCountReg",
                                                            []
                                                        ],
                                                        [
                                                            "DeployCountRes",
                                                            []
                                                        ]
                                                    ],
                                                    "display_order": "of_creation",
                                                    "pickled_keys": [
                                                        "Startdate"
                                                    ]
                                                },
                                                "key": 1121,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "data",
                                                    "outgoing_links": {},
                                                    "position": {
                                                        "x": 3.34369419470856,
                                                        "y": -6.729787362410372
                                                    },
                                                    "size": {
                                                        "height": 11.488095238095237,
                                                        "scale_3d": 1.0,
                                                        "width": 11.25
                                                    },
                                                    "visible": true
                                                },
                                                "type": "data"
                                            },
                                            {
                                                "content": {},
                                                "key": 1122,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "hub",
                                                    "outgoing_links": {
                                                        "data": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1121,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "datetime": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1125,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "library": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1130,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": -3.9749345304900867,
                                                        "y": -15.899738121960343
                                                    },
                                                    "size": {
                                                        "height": 1.5,
                                                        "scale_3d": 1.0,
                                                        "width": 1.5
                                                    },
                                                    "visible": true
                                                },
                                                "type": "hub"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "",
                                                    "roles_and_prioritizing": {
                                                        "startup": 0
                                                    },
                                                    "script_imports": {
                                                        "datetime": [
                                                            "datetime",
                                                            "datetime"
                                                        ],
                                                        "timedelta": [
                                                            "datetime",
                                                            "timedelta"
                                                        ]
                                                    },
                                                    "script_lines": [
                                                        "T = link.hub.data.Startdate - timedelta(days = link.hub.data.ReserveAheadDays)\r",
                                                        "\r",
                                                        "signal(link.RequestResources, (), link.hub.datetime(T.year, T.month, T.day, T.hour, T.minute, T.second))\r",
                                                        ""
                                                    ]
                                                },
                                                "key": 1123,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "DelayToReserveAheadTime",
                                                    "outgoing_links": {
                                                        "RequestResources": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1126,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1122,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": -15.755654286738903,
                                                        "y": -29.530532505589623
                                                    },
                                                    "size": {
                                                        "height": 5.089285714285714,
                                                        "scale_3d": 1.0,
                                                        "width": 13.422619047619047
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "",
                                                    "roles_and_prioritizing": {
                                                        "reset": 0
                                                    },
                                                    "script_imports": {
                                                        "datetime": [
                                                            "datetime",
                                                            "datetime"
                                                        ]
                                                    },
                                                    "script_lines": [
                                                        "link.hub.data.Startdate = datetime(2019, 8, 31, 8, 0, 0)\r",
                                                        "#link.hub.data.ReserveAheadDays= 7\r",
                                                        "#link.hub.data.DurationDays = 183\r",
                                                        "#link.hub.data.PostTaskPeriodDays = 365\r",
                                                        "#link.hub.data.MinFill = 0.0\r",
                                                        "#link.hub.data.RepeatDelayDays = 183\r",
                                                        "link.hub.data.DeployCountReg = []\r",
                                                        "link.hub.data.DeployCountRes = []\r",
                                                        "link.hub.data.DeployDate = []\r",
                                                        "link.hub.data.DeployReq = []\r",
                                                        "\r",
                                                        "#resReq = {}\r",
                                                        "#resReq['Lt-Capt'] = 8\r",
                                                        "#resReq['Maj'] = 5\r",
                                                        "#resReq['LCol'] = 2\r",
                                                        "#resReq['Col'] = 1\r",
                                                        "\r",
                                                        "#link.hub.data.ResReq = resReq\r",
                                                        "link.hub.data.Resources = []\r",
                                                        "\r",
                                                        "\r",
                                                        "link.hub.datetime.set_date_time(datetime(2019,6,1,9,0,0))\r",
                                                        "\r",
                                                        ""
                                                    ]
                                                },
                                                "key": 1124,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "Reset",
                                                    "outgoing_links": {
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1122,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": -5.299727927750011,
                                                        "y": -6.763436460243045
                                                    },
                                                    "size": {
                                                        "height": 5.1,
                                                        "scale_3d": 1.0,
                                                        "width": 10.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "date_time": {
                                                        "day": 1,
                                                        "hour": 9,
                                                        "minute": 0,
                                                        "month": 6,
                                                        "second": 0,
                                                        "year": 2019
                                                    }
                                                },
                                                "key": 1125,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "datetime",
                                                    "outgoing_links": {},
                                                    "position": {
                                                        "x": 3.3518547433989476,
                                                        "y": -20.03394483576553
                                                    },
                                                    "size": {
                                                        "height": 3.1,
                                                        "scale_3d": 1.0,
                                                        "width": 6.2
                                                    },
                                                    "visible": true
                                                },
                                                "type": "datetime"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "",
                                                    "roles_and_prioritizing": {},
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "#make the resource request and get back list of resources\r",
                                                        "resReg, resRes = link.node.RequestResources(link.hub.data.DurationDays, link.hub.data.ResReq, link.hub.data.Source)\r",
                                                        "\r",
                                                        "#if did not get enough resources, drop the task\r",
                                                        "if len(resReg) + len(resRes) < link.hub.library.get_res_req_size()*link.hub.data.MinFill:\r",
                                                        "\r",
                                                        "    #signal to record dropping the task after reserve ahead delay\r",
                                                        "    signal(link.DropTask, (resReg, resRes), delay(days = link.hub.data.ReserveAheadDays))  \r",
                                                        "\r",
                                                        "else:\r",
                                                        "\r",
                                                        "    #reserve the resources\r",
                                                        "    link.node.ReserveResources(link.hub.data.DurationDays, resReg, resRes)\r",
                                                        "\r",
                                                        "    #signal to start the task after reserve ahead delay\r",
                                                        "    signal(link.StartTask, (resReg, resRes), delay(days = link.hub.data.ReserveAheadDays))  \r",
                                                        "\r",
                                                        "\r",
                                                        "#repeat task later\r",
                                                        "signal(self, (), delay(days = link.hub.data.RepeatDelayDays))\r",
                                                        "\r",
                                                        ""
                                                    ]
                                                },
                                                "key": 1126,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "RequestResources",
                                                    "outgoing_links": {
                                                        "DropTask": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1133,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "StartTask": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1127,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1122,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "node": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1120,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": -7.120547593432133,
                                                        "y": -29.54183786506508
                                                    },
                                                    "size": {
                                                        "height": 5.1,
                                                        "scale_3d": 1.0,
                                                        "width": 10.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "resReg, resRes",
                                                    "roles_and_prioritizing": {},
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "#deploy the resources\r",
                                                        "link.node.DeployResources(resReg, resRes)\r",
                                                        "\r",
                                                        "#signal end task after task duration\r",
                                                        "signal(link.EndTask, (resReg, resRes), delay(days = link.hub.data.DurationDays))\r",
                                                        "\r",
                                                        "#record deploy count and deploy date\r",
                                                        "link.hub.data.Resources.append((resReg, resRes))\r",
                                                        "link.hub.data.DeployCountReg.append(len(resReg))\r",
                                                        "link.hub.data.DeployCountRes.append(len(resRes))\r",
                                                        "link.hub.data.DeployDate.append(link.hub.datetime.date_time)\r",
                                                        "link.hub.data.DeployReq.append(link.hub.library.get_res_req_size())\r",
                                                        ""
                                                    ]
                                                },
                                                "key": 1127,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "StartTask",
                                                    "outgoing_links": {
                                                        "EndTask": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1128,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1122,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "node": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1120,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 1.0826546903645664,
                                                        "y": -29.547450924533045
                                                    },
                                                    "size": {
                                                        "height": 5.1,
                                                        "scale_3d": 1.0,
                                                        "width": 10.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "resReg, resRes",
                                                    "roles_and_prioritizing": {},
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "link.node.ReturnResources(resReg, resRes)\r",
                                                        "\r",
                                                        "signal(link.EndPostDeployPeriod, (resReg, resRes), delay(days = link.hub.data.PostTaskPeriodDays))\r",
                                                        "\r",
                                                        "pass"
                                                    ]
                                                },
                                                "key": 1128,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "EndTask",
                                                    "outgoing_links": {
                                                        "EndPostDeployPeriod": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1129,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1122,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "node": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1120,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 9.33789670439442,
                                                        "y": -29.63767214873012
                                                    },
                                                    "size": {
                                                        "height": 5.1,
                                                        "scale_3d": 1.0,
                                                        "width": 10.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "resReg, resRes",
                                                    "roles_and_prioritizing": {},
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "link.node.ReleaseResources(resReg, resRes)\r",
                                                        "\r",
                                                        ""
                                                    ]
                                                },
                                                "key": 1129,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "EndPostDeployPeriod",
                                                    "outgoing_links": {
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1122,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "node": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1120,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 17.32247504583313,
                                                        "y": -29.592561536631585
                                                    },
                                                    "size": {
                                                        "height": 5.1,
                                                        "scale_3d": 1.0,
                                                        "width": 10.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "def get_res_req_size():\r",
                                                        "    \r",
                                                        "    resReq = link.hub.data.ResReq\r",
                                                        "    \r",
                                                        "    size = 0\r",
                                                        "    for rank in resReq:\r",
                                                        "        size += resReq[rank]\r",
                                                        "        \r",
                                                        "    return size\r",
                                                        "    "
                                                    ]
                                                },
                                                "key": 1130,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "library",
                                                    "outgoing_links": {
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1122,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": -13.84880620276239,
                                                        "y": -10.2285788551523
                                                    },
                                                    "size": {
                                                        "height": 5.1,
                                                        "scale_3d": 1.0,
                                                        "width": 10.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "library"
                                            },
                                            {
                                                "content": {
                                                    "script_lines": [
                                                        "def configure():",
                                                        "    axes = setup_axes(1, 1)",
                                                        "",
                                                        "",
                                                        "def plot():",
                                                        "",
                                                        "    #x = numpy.linspace(0, 1)",
                                                        "    #y = numpy.sin(4 * numpy.pi * x) * numpy.exp(-5 * x)",
                                                        "    axes.plot(link.data.DeployDate, link.data.DeployCountRes, 'b', label = 'Deployed - Res')\r",
                                                        "    axes.plot(link.data.DeployDate, link.data.DeployCountReg, 'g', label = 'Deployed - Reg')\r",
                                                        "    axes.plot(link.data.DeployDate, link.data.DeployReq, 'k', linestyle = 'dashed', linewidth = 3, label = 'Requirement')\r",
                                                        "",
                                                        "    handles, labels = axes.get_legend_handles_labels()\r",
                                                        "    axes.legend(handles, labels, loc = 9, ncol = 3, bbox_to_anchor = (0.5, 1.12))"
                                                    ]
                                                },
                                                "key": 1131,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "plot",
                                                    "outgoing_links": {
                                                        "data": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1121,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 21.30235681567295,
                                                        "y": -5.442582092289921
                                                    },
                                                    "size": {
                                                        "height": 16.2,
                                                        "scale_3d": 1.0,
                                                        "width": 15.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "plot"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "reserveAheadDays, durationDays, postTaskPeriodDays, minFill, repeatDelayDays, resReq, source",
                                                    "roles_and_prioritizing": {
                                                        "setup": 0
                                                    },
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "link.hub.data.ReserveAheadDays= reserveAheadDays\r",
                                                        "link.hub.data.DurationDays = durationDays\r",
                                                        "link.hub.data.PostTaskPeriodDays = postTaskPeriodDays\r",
                                                        "link.hub.data.MinFill = minFill\r",
                                                        "link.hub.data.RepeatDelayDays = repeatDelayDays\r",
                                                        "link.hub.data.ResReq = resReq\r",
                                                        "link.hub.data.Source = source"
                                                    ]
                                                },
                                                "key": 1132,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "Setup",
                                                    "outgoing_links": {
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1122,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": -14.826189038804385,
                                                        "y": -17.40685675545634
                                                    },
                                                    "size": {
                                                        "height": 5.1,
                                                        "scale_3d": 1.0,
                                                        "width": 10.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "resReg, resRes",
                                                    "roles_and_prioritizing": {},
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "#record deploy count and deploy date for a dropped task\r",
                                                        "link.hub.data.Resources.append((resReg, resRes))\r",
                                                        "link.hub.data.DeployCountReg.append(0)\r",
                                                        "link.hub.data.DeployCountRes.append(0)\r",
                                                        "link.hub.data.DeployDate.append(link.hub.datetime.date_time)\r",
                                                        "link.hub.data.DeployReq.append(link.hub.library.get_res_req_size())"
                                                    ]
                                                },
                                                "key": 1133,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "DropTask",
                                                    "outgoing_links": {
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1122,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 0.9976303127661255,
                                                        "y": -35.193433151894254
                                                    },
                                                    "size": {
                                                        "height": 5.1,
                                                        "scale_3d": 1.0,
                                                        "width": 10.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "script_lines": [
                                                        "def configure():\r",
                                                        "    axes = setup_axes(1, 1)\r",
                                                        "\r",
                                                        "\r",
                                                        "def plot():\r",
                                                        "    \r",
                                                        "    axes.clear()\r",
                                                        "    \r",
                                                        "    req = link.data.DeployReq\r",
                                                        "    reg = link.data.DeployCountReg\r",
                                                        "    res = link.data.DeployCountRes\r",
                                                        "    date = link.data.DeployDate\r",
                                                        "    x = list(range(len(date)))\r",
                                                        "    #x = date\r",
                                                        "\r",
                                                        "    #empty = []\r",
                                                        "    #for i in range(len(date)):\r",
                                                        "    #    empty.append(req[i] - reg[i] - res[i])\r",
                                                        "\r",
                                                        "    #empty_bottom = []\r",
                                                        "    #for i in range(len(date)):\r",
                                                        "    #    empty.append(reg[i] + res[i])\r",
                                                        "\r",
                                                        "    empty = [i - j - k for i,j,k in zip(req, reg, res)]\r",
                                                        "    empty_bottom = [i + j for i,j in zip(reg,res)]\r",
                                                        "\r",
                                                        "    width = 1\r",
                                                        "\r",
                                                        "    axes.bar(x, reg, width, 0, color = 'royalblue', linewidth = 0.1, label = 'Deployed - Reg')\r",
                                                        "    axes.bar(x, res, width, reg, color = 'brown', linewidth = 0.1, label = 'Deployed - Res')\r",
                                                        "    axes.bar(x, empty, width, empty_bottom, color = 'lightgrey', linewidth = 0.1, label = 'Empty')\r",
                                                        "    #axes.bar(x, link.data.DeployCountReg, 0.8, link.data.DeployCountReg, color = 'r', label = 'Deployed - Res')\r",
                                                        "\r",
                                                        "    #axes.plot(link.data.DeployDate, link.data.DeployCountRes, 'b', label = 'Deployed - Res')\r",
                                                        "    #axes.plot(link.data.DeployDate, link.data.DeployCountReg, 'g', label = 'Deployed - Reg')\r",
                                                        "    #axes.plot(link.data.DeployDate, link.data.DeployReq, 'k', linestyle = 'dashed', linewidth = 3, label = 'Requirement')\r",
                                                        "\r",
                                                        "    handles, labels = axes.get_legend_handles_labels()\r",
                                                        "    axes.legend(handles, labels, loc = 9, ncol = 3, bbox_to_anchor = (0.5, 1.12))"
                                                    ]
                                                },
                                                "key": 1134,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "plot",
                                                    "outgoing_links": {
                                                        "data": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1121,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 11.43318844739915,
                                                        "y": 15.729407661965553
                                                    },
                                                    "size": {
                                                        "height": 16.2,
                                                        "scale_3d": 1.0,
                                                        "width": 15.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "plot"
                                            }
                                        ],
                                        "ifx_ports_left": [],
                                        "ifx_ports_right": [
                                            1120
                                        ],
                                        "image_id": null,
                                        "proxy_position": {
                                            "x": 0.057463926152541034,
                                            "y": -1.6089899322711483
                                        },
                                        "rotation_2d": 0.0,
                                        "rotation_3d": {
                                            "pitch": 0.0,
                                            "roll": 0.0,
                                            "yaw": 0.0
                                        }
                                    },
                                    "key": 1119,
                                    "part_frame": {
                                        "comment": "",
                                        "detail_level": "full",
                                        "frame_style": "normal",
                                        "ifx_level": 0,
                                        "name": "Task2",
                                        "outgoing_links": {},
                                        "position": {
                                            "x": -2.5595238095238093,
                                            "y": -10.372023809523808
                                        },
                                        "size": {
                                            "height": 2.4107142857142856,
                                            "scale_3d": 1.0,
                                            "width": 5.238095238095238
                                        },
                                        "visible": true
                                    },
                                    "type": "actor"
                                }
                            ],
                            "ifx_ports_left": [],
                            "ifx_ports_right": [
                                1118
                            ],
                            "image_id": null,
                            "proxy_position": {
                                "x": 0.0,
                                "y": 0.0
                            },
                            "rotation_2d": 0.0,
                            "rotation_3d": {
                                "pitch": 0.0,
                                "roll": 0.0,
                                "yaw": 0.0
                            }
                        },
                        "key": 1101,
                        "part_frame": {
                            "comment": "",
                            "detail_level": "full",
                            "frame_style": "normal",
                            "ifx_level": 0,
                            "name": "Tasks",
                            "outgoing_links": {},
                            "position": {
                                "x": 8.44713216933117,
                                "y": -11.863651100510857
                            },
                            "size": {
                                "height": 2.5,
                                "scale_3d": 1.0,
                                "width": 5.119047619047619
                            },
                            "visible": true
                        },
                        "type": "actor"
                    },
                    {
                        "content": {
                            "children": [
                                {
                                    "content": {
                                        "children": [
                                            {
                                                "content": {
                                                    "children": [
                                                        {
                                                            "content": {},
                                                            "key": 1138,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "SndInitPop",
                                                                "outgoing_links": {
                                                                    "Enter": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1198,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 8.06813660687165,
                                                                    "y": -14.598900895401652
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {
                                                                    "startup": 1
                                                                },
                                                                "script_imports": {
                                                                    "datetime": [
                                                                        "datetime",
                                                                        "datetime"
                                                                    ]
                                                                },
                                                                "script_lines": [
                                                                    "#get personnel records\r",
                                                                    "records = link.InitPopRecords.select()\r",
                                                                    "\r",
                                                                    "#for each record\r",
                                                                    "for rec in records:\r",
                                                                    "    #create the props dictionary \r",
                                                                    "    props = {}\r",
                                                                    "    \r",
                                                                    "    #set flag to insert into model\r",
                                                                    "    props['INSERT'] = True\r",
                                                                    "    \r",
                                                                    "    props['ID'] = rec[0]\r",
                                                                    "    props['DOB'] = datetime.strptime(rec[1], \"%Y-%m-%d %H:%M:%S\")\r",
                                                                    "    props['SEX'] = rec[2]\r",
                                                                    "    props['DOH'] = datetime.strptime(rec[3], \"%Y-%m-%d %H:%M:%S\")\r",
                                                                    "    \r",
                                                                    "    props['OCC'] = rec[4]\r",
                                                                    "    props['RANK'] = rec[5]\r",
                                                                    "    props['DOP'] = datetime.strptime(rec[6], \"%Y-%m-%d %H:%M:%S\")\r",
                                                                    "    props['IN_TRAINING'] = rec[7] == 1\r",
                                                                    "    props['TRAINING_COMPLETE'] = rec[8] == 1\r",
                                                                    "    \r",
                                                                    "    link.SndInitPop(props)\r",
                                                                    "    \r",
                                                                    "    "
                                                                ]
                                                            },
                                                            "key": 1139,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "function",
                                                                "outgoing_links": {
                                                                    "InitPopRecords": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1140,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "SndInitPop": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1138,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -2.641172167266989,
                                                                    "y": -12.145446990144777
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "column_names": [
                                                                    "ID",
                                                                    "DOB",
                                                                    "SEX",
                                                                    "DOH",
                                                                    "OCC",
                                                                    "RANK",
                                                                    "DOP",
                                                                    "IN_TRAINING",
                                                                    "TRAINING_COMPLETE"
                                                                ],
                                                                "column_types": [
                                                                    "INTEGER(10)",
                                                                    "DATETIME",
                                                                    "TEXT(255)",
                                                                    "DATETIME",
                                                                    "TEXT(255)",
                                                                    "TEXT(255)",
                                                                    "DATETIME",
                                                                    "INTEGER(10)",
                                                                    "INTEGER(10)"
                                                                ],
                                                                "data": [],
                                                                "indices": {}
                                                            },
                                                            "key": 1140,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "InitPopRecords",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -2.701352145796589,
                                                                    "y": -2.0040016567794354
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "table"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "link.InitPopRecords.import_from_msaccess(link.file.filepath, 'People')\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1141,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Import",
                                                                "outgoing_links": {
                                                                    "InitPopRecords": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1140,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "file": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1142,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -14.338156855761008,
                                                                    "y": -2.136123004766041
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "filepath": "Personnel.accdb",
                                                                "relative_to_scen_folder": true
                                                            },
                                                            "key": 1142,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "file",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -14.353314222930482,
                                                                    "y": 6.529917286939677
                                                                },
                                                                "size": {
                                                                    "height": 4.821428571428571,
                                                                    "scale_3d": 1.0,
                                                                    "width": 16.75595238095238
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "file"
                                                        }
                                                    ],
                                                    "ifx_ports_left": [],
                                                    "ifx_ports_right": [
                                                        1138
                                                    ],
                                                    "image_id": null,
                                                    "proxy_position": {
                                                        "x": 0.4419391460345034,
                                                        "y": 12.228166757628967
                                                    },
                                                    "rotation_2d": 0.0,
                                                    "rotation_3d": {
                                                        "pitch": 0.0,
                                                        "roll": 0.0,
                                                        "yaw": 0.0
                                                    }
                                                },
                                                "key": 1137,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "InitPop",
                                                    "outgoing_links": {},
                                                    "position": {
                                                        "x": -16.875514449896,
                                                        "y": -3.3141011610029305
                                                    },
                                                    "size": {
                                                        "height": 2.708333333333333,
                                                        "scale_3d": 1.0,
                                                        "width": 5.9523809523809526
                                                    },
                                                    "visible": true
                                                },
                                                "type": "actor"
                                            },
                                            {
                                                "content": {
                                                    "children": [
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#if part of initial pop, send to initial pop function\r",
                                                                    "if 'INSERT' in props:\r",
                                                                    "        link.Insert(props)\r",
                                                                    "        return\r",
                                                                    "\r",
                                                                    "#get id\r",
                                                                    "ID = props['ID']\r",
                                                                    "\r",
                                                                    "#update props\r",
                                                                    "props['RANK'] = link.hub.RankID.Name\r",
                                                                    "props['OCC'] = link.hub.RankID.Occupation\r",
                                                                    "props['CADRE'] = link.hub.RankID.Cadre\r",
                                                                    "props['DOP'] = link.hub.datetime.date_time\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "#add to in-rank\r",
                                                                    "link.hub.data.InRank[ID] = props\r",
                                                                    "link.hub.data.InRankCount += 1\r",
                                                                    "\r",
                                                                    "#delay before start training (if needed)\r",
                                                                    "dbt = link.hub.RankInfo.DelayBeforeTraining\r",
                                                                    "if dbt > 0:\r",
                                                                    "    signal(link.StartTraining, props, delay(days = dbt))\r",
                                                                    "else:\r",
                                                                    "    link.StartTraining(props)\r",
                                                                    "\r",
                                                                    "#setup attrition\r",
                                                                    "link.SetupAttrition(props)\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1144,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "EnterRank",
                                                                "outgoing_links": {
                                                                    "Insert": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1165,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "SetupAttrition": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1164,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "StartTraining": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1151,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1150,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -30.012218907185066,
                                                                    "y": -39.795841039640734
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "dict": [
                                                                    [
                                                                        "Positions",
                                                                        180
                                                                    ],
                                                                    [
                                                                        "MinTIR",
                                                                        4
                                                                    ],
                                                                    [
                                                                        "MaxTIR",
                                                                        1000
                                                                    ],
                                                                    [
                                                                        "DelayBeforeTraining",
                                                                        0
                                                                    ],
                                                                    [
                                                                        "ReleaseIfFail",
                                                                        true
                                                                    ],
                                                                    [
                                                                        "PushPromote",
                                                                        false
                                                                    ],
                                                                    [
                                                                        "AttrRate",
                                                                        0.13
                                                                    ],
                                                                    [
                                                                        "MaxAge",
                                                                        1000
                                                                    ],
                                                                    [
                                                                        "DeployRatio",
                                                                        0.143
                                                                    ],
                                                                    [
                                                                        "CTRate",
                                                                        0.02
                                                                    ]
                                                                ],
                                                                "display_order": "of_creation",
                                                                "pickled_keys": []
                                                            },
                                                            "key": 1145,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "RankInfo",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -24.690955916045823,
                                                                    "y": -0.8998517282035177
                                                                },
                                                                "size": {
                                                                    "height": 10.178571428571429,
                                                                    "scale_3d": 1.0,
                                                                    "width": 6.875
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "data"
                                                        },
                                                        {
                                                            "content": {
                                                                "dict": [
                                                                    [
                                                                        "InRank",
                                                                        {}
                                                                    ],
                                                                    [
                                                                        "InTraining",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "Promotable",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "Deployed",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "InRankCount",
                                                                        0
                                                                    ],
                                                                    [
                                                                        "InTrainingCount",
                                                                        0
                                                                    ],
                                                                    [
                                                                        "PromotableCount",
                                                                        0
                                                                    ],
                                                                    [
                                                                        "DeployedCount",
                                                                        0
                                                                    ]
                                                                ],
                                                                "display_order": "of_creation",
                                                                "pickled_keys": []
                                                            },
                                                            "key": 1146,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "data",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -15.753892763598326,
                                                                    "y": -2.1163262518204564
                                                                },
                                                                "size": {
                                                                    "height": 9.375,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "data"
                                                        },
                                                        {
                                                            "content": {
                                                                "dict": [
                                                                    [
                                                                        "Name",
                                                                        "Lt-Capt"
                                                                    ],
                                                                    [
                                                                        "Occupation",
                                                                        "NWO"
                                                                    ],
                                                                    [
                                                                        "Cadre",
                                                                        "RegF"
                                                                    ]
                                                                ],
                                                                "display_order": "of_creation",
                                                                "pickled_keys": []
                                                            },
                                                            "key": 1147,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "RankID",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -27.50527447254697,
                                                                    "y": -12.681312051278057
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "data"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {
                                                                    "reset": 0
                                                                },
                                                                "script_imports": {
                                                                    "datetime": [
                                                                        "datetime",
                                                                        "datetime"
                                                                    ]
                                                                },
                                                                "script_lines": [
                                                                    "\r",
                                                                    "link.hub.data.InRank = {}\r",
                                                                    "link.hub.data.InTraining = []\r",
                                                                    "link.hub.data.Promotable = []\r",
                                                                    "link.hub.data.Deployed = []\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "link.hub.data.InRankCount = 0\r",
                                                                    "link.hub.data.InTrainingCount = 0\r",
                                                                    "link.hub.data.PromotableCount = 0\r",
                                                                    "link.hub.data.DeployedCount = 0\r",
                                                                    "\r",
                                                                    "startDate = datetime(2019,6,1,9,0,0)\r",
                                                                    "link.hub.datetime.set_date_time(startDate)\r",
                                                                    "\r",
                                                                    "link.hub.record.InRank = [0]\r",
                                                                    "link.hub.record.InTraining = [0]\r",
                                                                    "link.hub.record.Promotable = [0]\r",
                                                                    "link.hub.record.Deployed = [0]\r",
                                                                    "link.hub.record.Time = [startDate]\r",
                                                                    "link.hub.record.Releases = []\r",
                                                                    "link.hub.record.CTouts = []\r",
                                                                    "link.hub.record.Promotions = []\r",
                                                                    "link.hub.record.Positions = [link.hub.RankInfo.Positions]\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1148,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Reset",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1150,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 3.3173287652768817,
                                                                    "y": -13.986227580374978
                                                                },
                                                                "size": {
                                                                    "height": 6.011904761904762,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "date_time": {
                                                                    "day": 1,
                                                                    "hour": 9,
                                                                    "minute": 0,
                                                                    "month": 6,
                                                                    "second": 0,
                                                                    "year": 2019
                                                                }
                                                            },
                                                            "key": 1149,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "datetime",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": 2.3615869633262303,
                                                                    "y": -9.033337372290976
                                                                },
                                                                "size": {
                                                                    "height": 3.988095238095238,
                                                                    "scale_3d": 1.0,
                                                                    "width": 6.19047619047619
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "datetime"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1150,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "hub",
                                                                "outgoing_links": {
                                                                    "RankID": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1147,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "RankInfo": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1145,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "data": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1146,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "datetime": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1149,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "library": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1194,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "rank": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1143,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "record": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1167,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -7.750112694994645,
                                                                    "y": -18.00391297376486
                                                                },
                                                                "size": {
                                                                    "height": 1.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 1.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "hub"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "if props['ID'] not in link.hub.data.InRank: return\r",
                                                                    "\r",
                                                                    "link.hub.data.InTraining.append(props['ID'])\r",
                                                                    "link.hub.data.InTrainingCount += 1\r",
                                                                    "\r",
                                                                    "link.TrainRequest(props)"
                                                                ]
                                                            },
                                                            "key": 1151,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "StartTraining",
                                                                "outgoing_links": {
                                                                    "TrainRequest": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1178,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1150,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -20.026080654978394,
                                                                    "y": -39.697656269064375
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props, result",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "if props['ID'] not in link.hub.data.InRank: return\r",
                                                                    "\r",
                                                                    "link.hub.data.InTraining.remove(props['ID'])\r",
                                                                    "link.hub.data.InTrainingCount -= 1\r",
                                                                    "\r",
                                                                    "#if fail\r",
                                                                    "if result == 'F':\r",
                                                                    "    \r",
                                                                    "    #immediate release\r",
                                                                    "    if link.hub.RankInfo.ReleaseIfFail:\r",
                                                                    "        link.RemoveMember(props, 'failed')\r",
                                                                    "        \r",
                                                                    "    #or stay in rank until release\r",
                                                                    "\r",
                                                                    "#else pass\r",
                                                                    "else:\r",
                                                                    "    link.MinTIRDelay(props)\r",
                                                                    "        \r",
                                                                    "        \r",
                                                                    "        \r",
                                                                    "    \r",
                                                                    "    \r",
                                                                    "    \r",
                                                                    "    \r",
                                                                    "\r",
                                                                    "    "
                                                                ]
                                                            },
                                                            "key": 1152,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "FinishTraining",
                                                                "outgoing_links": {
                                                                    "MinTIRDelay": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1166,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "RemoveMember": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1163,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1150,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 5.515274902002796,
                                                                    "y": -39.49022853059453
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "if props['ID'] not in link.hub.data.InRank: return\r",
                                                                    "\r",
                                                                    "#if there is no next rank, do nothing\r",
                                                                    "if link.SndReq is None: return\r",
                                                                    "\r",
                                                                    "#add to promo list if not already there (might already be there in obscure cases)\r",
                                                                    "if props['ID'] not in link.hub.data.Promotable:\r",
                                                                    "    link.hub.data.Promotable.append(props['ID'])\r",
                                                                    "    link.hub.data.PromotableCount += 1\r",
                                                                    "\r",
                                                                    "#if push promote\r",
                                                                    "if link.hub.RankInfo.PushPromote:\r",
                                                                    "    link.Promote(props)\r",
                                                                    "\r",
                                                                    "#else request promotion\r",
                                                                    "else:\r",
                                                                    "    link.SndReq()\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1153,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "MetMinTIR",
                                                                "outgoing_links": {
                                                                    "Promote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1154,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "SndReq": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1160,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1150,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 21.676515289907346,
                                                                    "y": -39.3404021116089
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#promote to next rank\r",
                                                                    "link.PromoteOut(props)\r",
                                                                    "\r",
                                                                    "#remove from current rank\r",
                                                                    "link.RemoveMember(props, 'promoted')\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1154,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Promote",
                                                                "outgoing_links": {
                                                                    "PromoteOut": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1157,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "RemoveMember": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1163,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1150,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 30.26797020714654,
                                                                    "y": -39.30186888370791
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "nextRankPositions, nextRankCount",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "data = link.hub.data\r",
                                                                    "info = link.hub.RankInfo\r",
                                                                    "\r",
                                                                    "#maximum possible promotions\r",
                                                                    "maxPromos = min(data.PromotableCount, nextRankPositions - nextRankCount)\r",
                                                                    "\r",
                                                                    "#promotions to balance strength\r",
                                                                    "s0 = data.InRankCount\r",
                                                                    "s1 = nextRankCount\r",
                                                                    "p0 = info.Positions\r",
                                                                    "p1 = nextRankPositions\r",
                                                                    "balancePromos = (s0*p1 - s1*p0)/(p0 + p1)\r",
                                                                    "\r",
                                                                    "#adjust number of promos stochastically\r",
                                                                    "balancePromos_ = math.floor(balancePromos)\r",
                                                                    "frac = balancePromos - balancePromos_\r",
                                                                    "if random.random() > frac:\r",
                                                                    "    balancePromos = balancePromos_\r",
                                                                    "else:\r",
                                                                    "    balancePromos = balancePromos_ + 1\r",
                                                                    "\r",
                                                                    "#determine final number of promos\r",
                                                                    "numPromos = min(maxPromos, balancePromos)\r",
                                                                    "\r",
                                                                    "if numPromos <= 0: return\r",
                                                                    "\r",
                                                                    "promoteIDs = random.sample(link.hub.data.Promotable, numPromos)\r",
                                                                    "\r",
                                                                    "for ID in promoteIDs:\r",
                                                                    "    link.Promote(link.hub.data.InRank[ID])\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1155,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "PromoteInvite",
                                                                "outgoing_links": {
                                                                    "Promote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1154,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1150,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 30.236943946864095,
                                                                    "y": -54.94925517566933
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#if nothing below this rank, don't invite a promotion\r",
                                                                    "if link.InvitePromote is None: return\r",
                                                                    "\r",
                                                                    "# if there is room in the rank\r",
                                                                    "if link.hub.data.InRankCount < link.hub.RankInfo.Positions:\r",
                                                                    "\r",
                                                                    "    #send the number of positions and current in-rank count\r",
                                                                    "    link.InvitePromote(link.hub.RankInfo.Positions, link.hub.data.InRankCount)"
                                                                ]
                                                            },
                                                            "key": 1156,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "InvitePromote",
                                                                "outgoing_links": {
                                                                    "InvitePromote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1158,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1150,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -30.008885903158987,
                                                                    "y": -54.932325409304234
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1157,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "SndPromo",
                                                                "outgoing_links": {
                                                                    "Enter": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1237,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 40.81257151160083,
                                                                    "y": -41.4195199794459
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1158,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "SndInvite",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -37.22325753644102,
                                                                    "y": -57.04376020783337
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1159,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "Invite",
                                                                "outgoing_links": {
                                                                    "PromoteInvite": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1155,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 41.1022611870765,
                                                                    "y": -57.271274325502496
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1160,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "SndReq",
                                                                "outgoing_links": {
                                                                    "Request": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1238,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 40.58019488696916,
                                                                    "y": -49.98849280979479
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1161,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "Enter",
                                                                "outgoing_links": {
                                                                    "EnterRank": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1144,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -37.04218246881857,
                                                                    "y": -42.01569816569041
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1162,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "Request",
                                                                "outgoing_links": {
                                                                    "InvitePromote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1156,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -36.98495220560267,
                                                                    "y": -49.363009874348336
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props, lossType",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "ID = props['ID']\r",
                                                                    "\r",
                                                                    "#remove from all member lists\r",
                                                                    "if ID in link.hub.data.InTraining:\r",
                                                                    "    link.hub.data.InTraining.remove(ID)\r",
                                                                    "    link.hub.data.InTrainingCount -= 1\r",
                                                                    "    \r",
                                                                    "\r",
                                                                    "if ID in link.hub.data.Promotable:\r",
                                                                    "    link.hub.data.Promotable.remove(ID)\r",
                                                                    "    link.hub.data.PromotableCount -= 1\r",
                                                                    "\r",
                                                                    "if ID in link.hub.data.InRank:\r",
                                                                    "    del link.hub.data.InRank[ID]\r",
                                                                    "    link.hub.data.InRankCount -= 1\r",
                                                                    "    \r",
                                                                    "    #record release\r",
                                                                    "    if lossType == 'released':\r",
                                                                    "        props['RELEASED'] = True\r",
                                                                    "        link.hub.record.Releases[-1] += 1\r",
                                                                    "        link.Release(props)\r",
                                                                    "        link.StopTraining(ID)\r",
                                                                    "    \r",
                                                                    "    #record CT\r",
                                                                    "    elif lossType == 'CT':\r",
                                                                    "        props['CT'] = True\r",
                                                                    "        props['DOP'] = link.hub.datetime.date_time  #override promotion time\r",
                                                                    "        link.hub.record.CTouts[-1] += 1\r",
                                                                    "        link.Release(props)\r",
                                                                    "        link.StopTraining(ID)\r",
                                                                    "        \r",
                                                                    "    \r",
                                                                    "    #record promotion\r",
                                                                    "    elif lossType == 'promoted':\r",
                                                                    "        link.hub.record.Promotions[-1] += 1\r",
                                                                    "    \r",
                                                                    "    #invite promotion\r",
                                                                    "    link.InvitePromote()\r",
                                                                    "    \r",
                                                                    "\r",
                                                                    "    \r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1163,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "RemoveMember",
                                                                "outgoing_links": {
                                                                    "InvitePromote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1156,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "Release": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1171,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": 32.34392154184954,
                                                                                    "y": -63.223816325109745
                                                                                }
                                                                            }
                                                                        ]
                                                                    },
                                                                    "StopTraining": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1191,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": -11.890454134805578,
                                                                                    "y": -46.83253535228758
                                                                                }
                                                                            },
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": -11.858746257112767,
                                                                                    "y": -43.72516333839172
                                                                                }
                                                                            }
                                                                        ]
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1150,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 5.817043142888761,
                                                                    "y": -54.71431714204966
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#MaxAge\r",
                                                                    "ageDays = (link.hub.datetime.date_time - props['DOB']).days\r",
                                                                    "maxAgeDaysLeft = link.hub.RankInfo.MaxAge*365 - ageDays\r",
                                                                    "\r",
                                                                    "#Max TIR\r",
                                                                    "TIRDays = (link.hub.datetime.date_time - props['DOP']).days\r",
                                                                    "maxTIRDaysLeft = link.hub.RankInfo.MaxTIR*365 - TIRDays\r",
                                                                    "\r",
                                                                    "#voluntary release (based on attrition rate)\r",
                                                                    "alpha = -math.log(1.0 - link.hub.RankInfo.AttrRate)\r",
                                                                    "volDaysLeft = random.expovariate(alpha)*365\r",
                                                                    "\r",
                                                                    "#CT release (based on CT rate)\r",
                                                                    "alpha = -math.log(1.0 - link.hub.RankInfo.CTRate)\r",
                                                                    "ctDaysLeft = random.expovariate(alpha)*365\r",
                                                                    "\r",
                                                                    "#note, need to label CT releases\r",
                                                                    "\r",
                                                                    "#schedule release\r",
                                                                    "days = min(maxAgeDaysLeft, maxTIRDaysLeft, volDaysLeft, ctDaysLeft)\r",
                                                                    "\r",
                                                                    "#label the loss type\r",
                                                                    "lossType = 'released'\r",
                                                                    "if days == ctDaysLeft:\r",
                                                                    "    lossType = 'CT'\r",
                                                                    "\r",
                                                                    "signal(link.RemoveMember, (props, lossType), delay(days = days))"
                                                                ]
                                                            },
                                                            "key": 1164,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "SetupAttrition",
                                                                "outgoing_links": {
                                                                    "RemoveMember": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1163,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1150,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -20.00560338611418,
                                                                    "y": -46.629645698637454
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#insert member into model (used for initial pop and CTs)\r",
                                                                    "\r",
                                                                    "#if member not in this rank, send to next rank (if next rank exists)\r",
                                                                    "if props['RANK'] != link.hub.RankID.Name:\r",
                                                                    "    if link.SndPromo is not None:\r",
                                                                    "        #log.warning(\"Rank: %s, Member rank: %s, Member ID: %s\" % (link.hub.RankID.Name, props['RANK'], props['ID']))\r",
                                                                    "        link.SndPromo(props)\r",
                                                                    "    else:\r",
                                                                    "        log.warning(\"Input member's rank not found in model.\")\r",
                                                                    "    return\r",
                                                                    "\r",
                                                                    "#log.warning(\"member %s enter %s\" % (props['ID'], link.hub.RankID.Name))\r",
                                                                    "\r",
                                                                    "#cancel insert flag\r",
                                                                    "if 'INSERT' in props:\r",
                                                                    "    del props['INSERT']\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "#get id\r",
                                                                    "ID = props['ID']\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "#update props (not all usual props are updated for initial pop)\r",
                                                                    "props['OCC'] = link.hub.RankID.Occupation\r",
                                                                    "props['CADRE'] = link.hub.RankID.Cadre\r",
                                                                    "\r",
                                                                    "#add to in-rank\r",
                                                                    "link.hub.data.InRank[ID] = props\r",
                                                                    "link.hub.data.InRankCount += 1\r",
                                                                    "\r",
                                                                    "#insert at Min-TIR delay step\r",
                                                                    "link.MinTIRDelay(props)\r",
                                                                    "\r",
                                                                    "#setup attrition\r",
                                                                    "link.SetupAttrition(props)\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1165,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Insert",
                                                                "outgoing_links": {
                                                                    "MinTIRDelay": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1166,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": 13.558717964465075,
                                                                                    "y": -31.554183083148093
                                                                                }
                                                                            }
                                                                        ]
                                                                    },
                                                                    "SetupAttrition": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1164,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "SndPromo": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1157,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": 31.94937653742584,
                                                                                    "y": -28.477348338185028
                                                                                }
                                                                            }
                                                                        ]
                                                                    },
                                                                    "StartTraining": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1151,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1150,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -29.989434128890377,
                                                                    "y": -29.305548588756988
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#if member entered this rank as initial pop, cancel the flag here\r",
                                                                    "#(no more treatment as initial_pop once processed through initial rank)\r",
                                                                    "if 'INSERT' in props:\r",
                                                                    "    del props['INSERT']\r",
                                                                    "\r",
                                                                    "#delay to Min TIR (if required)\r",
                                                                    "TIRdays = (link.hub.datetime.date_time - props['DOP']).days\r",
                                                                    "daysLeft = link.hub.RankInfo.MinTIR*365.25 - TIRdays\r",
                                                                    "\r",
                                                                    "if daysLeft > 0.0:\r",
                                                                    "    signal(link.MetMinTIR, props, delay(days = daysLeft))\r",
                                                                    "else:\r",
                                                                    "    link.MetMinTIR(props)\r",
                                                                    "        "
                                                                ]
                                                            },
                                                            "key": 1166,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "MinTIRDelay",
                                                                "outgoing_links": {
                                                                    "MetMinTIR": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1153,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1150,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 13.542800192312592,
                                                                    "y": -39.313536257975215
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "dict": [
                                                                    [
                                                                        "InRank",
                                                                        [
                                                                            0
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "InTraining",
                                                                        [
                                                                            0
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "Promotable",
                                                                        [
                                                                            0
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "Time",
                                                                        "gANdcQBjZGF0ZXRpbWUKZGF0ZXRpbWUKcQFDCgfjBgEJAAAAAABxAoVxA1JxBGEu"
                                                                    ],
                                                                    [
                                                                        "Releases",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "Promotions",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "Deployed",
                                                                        [
                                                                            0
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "Positions",
                                                                        [
                                                                            180
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "CTouts",
                                                                        []
                                                                    ]
                                                                ],
                                                                "display_order": "of_creation",
                                                                "pickled_keys": [
                                                                    "Time"
                                                                ]
                                                            },
                                                            "key": 1167,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "record",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -2.318244754210149,
                                                                    "y": -2.2214258111749743
                                                                },
                                                                "size": {
                                                                    "height": 5.803571428571428,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "data"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {
                                                                    "startup": 0
                                                                },
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "link.hub.record.InRank.append(link.hub.data.InRankCount)\r",
                                                                    "link.hub.record.InTraining.append(link.hub.data.InTrainingCount)\r",
                                                                    "link.hub.record.Promotable.append(link.hub.data.PromotableCount)\r",
                                                                    "link.hub.record.Deployed.append(link.hub.library.count_deployed())\r",
                                                                    "link.hub.record.Time.append(link.hub.datetime.date_time)\r",
                                                                    "link.hub.record.Positions.append(link.hub.RankInfo.Positions)\r",
                                                                    "\r",
                                                                    "link.hub.record.Releases.append(0)\r",
                                                                    "link.hub.record.CTouts.append(0)\r",
                                                                    "link.hub.record.Promotions.append(0)\r",
                                                                    "\r",
                                                                    "signal(self, (), delay(days = 30.44))"
                                                                ]
                                                            },
                                                            "key": 1168,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Record",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1150,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 9.0110398583115,
                                                                    "y": -14.067710898295612
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "script_lines": [
                                                                    "def configure():",
                                                                    "    axes = setup_axes(1, 1)",
                                                                    "\r",
                                                                    "    axes.set_xlabel('Time')",
                                                                    "    axes.set_ylabel('Population')",
                                                                    "",
                                                                    "    ",
                                                                    "",
                                                                    "def plot():\r",
                                                                    "    \r",
                                                                    "    lastTime = link.record.Time[-1]\r",
                                                                    "    ",
                                                                    "    axes.fill(link.record.Time + [lastTime], link.record.InRank + [0], 'grey', alpha = 0.5, label = 'In Rank')\r",
                                                                    "    axes.fill(link.record.Time + [lastTime], link.record.InTraining + [0], 'r', alpha = 0.3, label = 'In Training')\r",
                                                                    "    axes.fill(link.record.Time + [lastTime], link.record.Promotable + [0], 'b', alpha = 0.3, label = 'Promotable')\r",
                                                                    "    axes.fill(link.record.Time + [lastTime], link.record.Deployed + [0], 'black', alpha = 0.6, label = 'Deployed')",
                                                                    "    axes.plot(link.record.Time, link.record.Positions, 'k', linestyle = 'dashed', label = 'Positions', linewidth = 3)\r",
                                                                    "\r",
                                                                    "    handles, labels = axes.get_legend_handles_labels()\r",
                                                                    "    axes.legend(handles, labels, loc = 9, ncol = 3, bbox_to_anchor = (0.5, 1.12))",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1169,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "plot",
                                                                "outgoing_links": {
                                                                    "record": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1167,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 23.320791737339523,
                                                                    "y": 1.8477746108282858
                                                                },
                                                                "size": {
                                                                    "height": 21.07142857142857,
                                                                    "scale_3d": 1.0,
                                                                    "width": 19.910714285714285
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "plot"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "positions, attrRate, minTIR, pushPromo, ctRate",
                                                                "roles_and_prioritizing": {
                                                                    "setup": 3
                                                                },
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "link.hub.RankInfo.Positions = positions\r",
                                                                    "link.hub.RankInfo.AttrRate = attrRate\r",
                                                                    "link.hub.RankInfo.MinTIR = minTIR\r",
                                                                    "link.hub.RankInfo.PushPromote = pushPromo\r",
                                                                    "link.hub.RankInfo.CTRate = ctRate\r",
                                                                    "\r",
                                                                    "link.hub.RankID.Name = link.hub._rank_.get_name()"
                                                                ]
                                                            },
                                                            "key": 1170,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Setup",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1150,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 3.2430370494555407,
                                                                    "y": -19.466952743026894
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1171,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "Release",
                                                                "outgoing_links": {
                                                                    "Release": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1199,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": 16.488738623413596,
                                                                                    "y": -15.583259677761198
                                                                                }
                                                                            }
                                                                        ]
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 41.33403873965582,
                                                                    "y": -63.389691111668604
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {
                                                                "children": [
                                                                    {
                                                                        "content": {
                                                                            "parameters": "props",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "ID = props['ID']\r",
                                                                                "props['IN_TRAINING'] = True\r",
                                                                                "\r",
                                                                                "#add to training list\r",
                                                                                "link.hub.Data.InTraining[ID] = props\r",
                                                                                "\r",
                                                                                "#go on waitlist\r",
                                                                                "link.hub.Data.Waitlist.append(ID)\r",
                                                                                "\r",
                                                                                "\r",
                                                                                "\r",
                                                                                "\r",
                                                                                "    \r",
                                                                                "    "
                                                                            ]
                                                                        },
                                                                        "key": 1173,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Arrive",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1176,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -16.694797152199428,
                                                                                "y": -34.31994988357029
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "dict": [
                                                                                [
                                                                                    "DurationDays",
                                                                                    60
                                                                                ],
                                                                                [
                                                                                    "MinSessionSize",
                                                                                    1
                                                                                ],
                                                                                [
                                                                                    "MaxSessionSize",
                                                                                    25
                                                                                ],
                                                                                [
                                                                                    "SuccessRate",
                                                                                    1
                                                                                ],
                                                                                [
                                                                                    "SessionSchedule",
                                                                                    "gANdcQAoSwNLAYZxAUsGSwGGcQJLCUsBhnEDZS4="
                                                                                ]
                                                                            ],
                                                                            "display_order": "of_creation",
                                                                            "pickled_keys": [
                                                                                "SessionSchedule"
                                                                            ]
                                                                        },
                                                                        "key": 1174,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Input",
                                                                            "outgoing_links": {},
                                                                            "position": {
                                                                                "x": -14.664036274121262,
                                                                                "y": -0.76648840428639
                                                                            },
                                                                            "size": {
                                                                                "height": 6.5476190476190474,
                                                                                "scale_3d": 1.0,
                                                                                "width": 9.523809523809524
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "data"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "dict": [
                                                                                [
                                                                                    "InTraining",
                                                                                    {}
                                                                                ],
                                                                                [
                                                                                    "Waitlist",
                                                                                    []
                                                                                ],
                                                                                [
                                                                                    "Attendance",
                                                                                    []
                                                                                ],
                                                                                [
                                                                                    "StartDates",
                                                                                    []
                                                                                ],
                                                                                [
                                                                                    "SessionIdx",
                                                                                    0
                                                                                ]
                                                                            ],
                                                                            "display_order": "of_creation",
                                                                            "pickled_keys": []
                                                                        },
                                                                        "key": 1175,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Data",
                                                                            "outgoing_links": {},
                                                                            "position": {
                                                                                "x": -4.235163886363756,
                                                                                "y": -0.7590424824417763
                                                                            },
                                                                            "size": {
                                                                                "height": 6.607142857142857,
                                                                                "scale_3d": 1.0,
                                                                                "width": 8.660714285714285
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "data"
                                                                    },
                                                                    {
                                                                        "content": {},
                                                                        "key": 1176,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "hub",
                                                                            "outgoing_links": {
                                                                                "Data": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1175,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "Input": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1174,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "Record": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1182,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "datetime": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1180,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "library": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1185,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -1.135639561950389,
                                                                                "y": -13.488105952112994
                                                                            },
                                                                            "size": {
                                                                                "height": 1.5,
                                                                                "scale_3d": 1.0,
                                                                                "width": 1.5
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "hub"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {
                                                                                "reset": 0
                                                                            },
                                                                            "script_imports": {
                                                                                "datetime": [
                                                                                    "datetime",
                                                                                    "datetime"
                                                                                ]
                                                                            },
                                                                            "script_lines": [
                                                                                "link.hub.Data.InTraining = {}\r",
                                                                                "link.hub.Data.Waitlist = []\r",
                                                                                "link.hub.Data.Attendance = []\r",
                                                                                "link.hub.Data.StartDates = []\r",
                                                                                "link.hub.Data.SessionIdx = 0\r",
                                                                                "\r",
                                                                                "startDate = datetime(2019,6,1,9,0,0)\r",
                                                                                "link.hub.datetime.set_date_time(startDate)\r",
                                                                                "\r",
                                                                                "link.hub.Record.Waitlist = [0]\r",
                                                                                "link.hub.Record.Time = [startDate]\r",
                                                                                ""
                                                                            ]
                                                                        },
                                                                        "key": 1177,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Reset",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1176,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 9.448075269869122,
                                                                                "y": -13.073071682303503
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {},
                                                                        "key": 1178,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 1,
                                                                            "name": "TrainRequest",
                                                                            "outgoing_links": {
                                                                                "Arrive": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1173,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -20.800874878523683,
                                                                                "y": -36.48950085353416
                                                                            },
                                                                            "size": {
                                                                                "height": 0.5,
                                                                                "scale_3d": 1.0,
                                                                                "width": 0.5
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "node"
                                                                    },
                                                                    {
                                                                        "content": {},
                                                                        "key": 1179,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 1,
                                                                            "name": "SndTrainFinish",
                                                                            "outgoing_links": {
                                                                                "FinishTraining": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1152,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 27.97851400511773,
                                                                                "y": -36.629572966635514
                                                                            },
                                                                            "size": {
                                                                                "height": 0.5,
                                                                                "scale_3d": 1.0,
                                                                                "width": 0.5
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "node"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "date_time": {
                                                                                "day": 1,
                                                                                "hour": 9,
                                                                                "minute": 0,
                                                                                "month": 6,
                                                                                "second": 0,
                                                                                "year": 2019
                                                                            }
                                                                        },
                                                                        "key": 1180,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "datetime",
                                                                            "outgoing_links": {},
                                                                            "position": {
                                                                                "x": -11.68177009004484,
                                                                                "y": -11.093761528465397
                                                                            },
                                                                            "size": {
                                                                                "height": 3.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 6.2
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "datetime"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "script_lines": [
                                                                                "def configure():\r",
                                                                                "    axes = setup_axes(1, 1)",
                                                                                "\r",
                                                                                "    \r",
                                                                                "",
                                                                                "",
                                                                                "def plot():\r",
                                                                                "    \r",
                                                                                "    axes = setup_axes(1, 1)\r",
                                                                                "    axes.set_xlabel('Time (years)')\r",
                                                                                "    axes.set_ylabel('Number of people')\r",
                                                                                "    \r",
                                                                                "    #don't plot if data is empty\r",
                                                                                "    if len(link.hub.Record.Waitlist) <= 1:\r",
                                                                                "        return\r",
                                                                                "\r",
                                                                                "    #plot the waitlist\r",
                                                                                "    lastTime = link.hub.Record.Time[-1]\r",
                                                                                "    axes.fill(link.hub.Record.Time + [lastTime], link.hub.Record.Waitlist + [0], 'b', alpha = 0.3, label = 'Waitlist')",
                                                                                "    axes.figure.autofmt_xdate()\r",
                                                                                "    \r",
                                                                                "    \r",
                                                                                "    #plot the session attendance\r",
                                                                                "    height = link.hub.Data.Attendance\r",
                                                                                "    width = [link.hub.Input.DurationDays]*len(height)\r",
                                                                                "    left = link.hub.Data.StartDates\r",
                                                                                "    y_pos = [0]*len(height)\r",
                                                                                "    axes.barh(y_pos, width, height = height, left = left, color = 'green', alpha = 0.6, label = 'Session Attendance')\r",
                                                                                "    \r",
                                                                                "    #legend\r",
                                                                                "    handles, labels = axes.get_legend_handles_labels()\r",
                                                                                "    axes.legend(handles, labels, loc = 9, ncol = 3, bbox_to_anchor = (0.5, 1.12))"
                                                                            ]
                                                                        },
                                                                        "key": 1181,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Attendance",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1176,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 18.05520745979187,
                                                                                "y": -1.1322048215124676
                                                                            },
                                                                            "size": {
                                                                                "height": 16.2,
                                                                                "scale_3d": 1.0,
                                                                                "width": 15.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "plot"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "dict": [
                                                                                [
                                                                                    "Waitlist",
                                                                                    [
                                                                                        0
                                                                                    ]
                                                                                ],
                                                                                [
                                                                                    "Time",
                                                                                    "gANdcQBjZGF0ZXRpbWUKZGF0ZXRpbWUKcQFDCgfjBgEJAAAAAABxAoVxA1JxBGEu"
                                                                                ]
                                                                            ],
                                                                            "display_order": "of_creation",
                                                                            "pickled_keys": [
                                                                                "Time"
                                                                            ]
                                                                        },
                                                                        "key": 1182,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Record",
                                                                            "outgoing_links": {},
                                                                            "position": {
                                                                                "x": 5.519563999613053,
                                                                                "y": -0.7859267560572475
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "data"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {
                                                                                "startup": 0
                                                                            },
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "link.hub.Record.Waitlist.append(len(link.hub.Data.Waitlist))\r",
                                                                                "link.hub.Record.Time.append(link.hub.datetime.date_time)\r",
                                                                                "\r",
                                                                                "signal(self, (), delay(days = 7))"
                                                                            ]
                                                                        },
                                                                        "key": 1183,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Record",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1176,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 9.55578961375507,
                                                                                "y": -7.625327065521719
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "duration, minSessionSize, maxSessionSize, successRate, sessionSchedule",
                                                                            "roles_and_prioritizing": {
                                                                                "setup": 3
                                                                            },
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "link.hub.Input.DurationDays = duration\r",
                                                                                "link.hub.Input.MinSessionSize = minSessionSize\r",
                                                                                "link.hub.Input.MaxSessionSize = maxSessionSize\r",
                                                                                "link.hub.Input.SuccessRate = successRate\r",
                                                                                "link.hub.Input.SessionSchedule = sessionSchedule"
                                                                            ]
                                                                        },
                                                                        "key": 1184,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Setup",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1176,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 9.417960966070991,
                                                                                "y": -18.46107648244264
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "script_imports": {
                                                                                "datetime": [
                                                                                    "datetime",
                                                                                    "datetime"
                                                                                ]
                                                                            },
                                                                            "script_lines": [
                                                                                "def get_waitlist():\r",
                                                                                "    inTrng = link.hub.Data.InTraining\r",
                                                                                "    return [id for id in link.hub.Data.Waitlist\r",
                                                                                "        if inTrng[id]['RELEASED']]\r",
                                                                                "        \r",
                                                                                "\r",
                                                                                "\r",
                                                                                "def get_trainable_on_waitlist():\r",
                                                                                "    inTrng = link.hub.Data.InTraining\r",
                                                                                "    return [id for id in link.hub.Data.Waitlist\r",
                                                                                "        if not inTrng[id]['RESERVED']\r",
                                                                                "        and not inTrng[id]['DEPLOYED']\r",
                                                                                "        and not inTrng[id]['RELEASED']]\r",
                                                                                "    \r",
                                                                                "def count_trainable_on_waitlist():\r",
                                                                                "    return len(get_trainable_on_waitlist())\r",
                                                                                "    \r",
                                                                                "    \r",
                                                                                "def get_start_session_idx():\r",
                                                                                "    #assumes session schedule is in order\r",
                                                                                "    #returns the index of the first session based on the current datetime\r",
                                                                                "    \r",
                                                                                "    year = link.hub.datetime.year\r",
                                                                                "    \r",
                                                                                "    startDates = [datetime(year, m, d, 8, 0, 0) for m,d in link.hub.Input.SessionSchedule]\r",
                                                                                "    \r",
                                                                                "    delays = [(t - link.hub.datetime.get_date_time()).total_seconds() for t in startDates]\r",
                                                                                "    \r",
                                                                                "    #return the smallest positive delay\r",
                                                                                "    for i in range(len(delays)):\r",
                                                                                "        if delays[i] > 0:\r",
                                                                                "            return i\r",
                                                                                "   \r",
                                                                                "    #if no more sessions this year, return first session for next year\r",
                                                                                "    return 0\r",
                                                                                "    "
                                                                            ]
                                                                        },
                                                                        "key": 1185,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "library",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1176,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -11.156992490107825,
                                                                                "y": -15.437735791363107
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "library"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {
                                                                                "startup": 0
                                                                            },
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "link.hub.Data.SessionIdx = link.hub.library.get_start_session_idx()\r",
                                                                                "\r",
                                                                                "link.DelayToSessionStart()\r",
                                                                                "\r",
                                                                                "\r",
                                                                                ""
                                                                            ]
                                                                        },
                                                                        "key": 1186,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "GetFirstSession",
                                                                            "outgoing_links": {
                                                                                "DelayToSessionStart": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1187,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1176,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -6.831928977706746,
                                                                                "y": -34.44116769677284
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "nextYr = False",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {
                                                                                "datetime": [
                                                                                    "datetime",
                                                                                    "datetime"
                                                                                ]
                                                                            },
                                                                            "script_lines": [
                                                                                "session = link.hub.Input.SessionSchedule[link.hub.Data.SessionIdx]\r",
                                                                                "\r",
                                                                                "year = link.hub.datetime.year\r",
                                                                                "month = session[0]\r",
                                                                                "day = session[1]\r",
                                                                                "\r",
                                                                                "delayDays = (datetime(year, month, day, 8, 0, 0) - link.hub.datetime.date_time).total_seconds()/86400.0\r",
                                                                                "\r",
                                                                                "if delayDays < 0.0 or nextYr:\r",
                                                                                "    delayDays = (datetime(year + 1, month, day, 8, 0, 0) - link.hub.datetime.date_time).total_seconds()/86400.0\r",
                                                                                "\r",
                                                                                "signal(link.StartSession, (), delay(days = delayDays))\r",
                                                                                ""
                                                                            ]
                                                                        },
                                                                        "key": 1187,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "DelayToSessionStart",
                                                                            "outgoing_links": {
                                                                                "StartSession": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1188,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1176,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 1.5855408583978676,
                                                                                "y": -34.353601749967424
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "input = link.hub.Input\r",
                                                                                "data = link.hub.Data\r",
                                                                                "\r",
                                                                                "#get the list of potential session starts, up to max session size\r",
                                                                                "sessionList = link.hub.library.get_trainable_on_waitlist()[:input.MaxSessionSize]\r",
                                                                                "\r",
                                                                                "#if at least have the min session size\r",
                                                                                "if len(sessionList) >= input.MinSessionSize:\r",
                                                                                "    \r",
                                                                                "    #remove ids from waitlist and set status to attending training\r",
                                                                                "    for id in sessionList:\r",
                                                                                "        data.Waitlist.remove(id)\r",
                                                                                "        data.InTraining[id]['ATTENDING_TRNG'] = True\r",
                                                                                "    \r",
                                                                                "    #track attendance and start date\r",
                                                                                "    data.Attendance.append(len(sessionList))\r",
                                                                                "    data.StartDates.append(link.hub.datetime.date_time)\r",
                                                                                "    \r",
                                                                                "    #signal to finish the course after course duration\r",
                                                                                "    signal(link.Finish, sessionList, delay(days = input.DurationDays))\r",
                                                                                "\r",
                                                                                "#else record zero-loaded session\r",
                                                                                "else:\r",
                                                                                "    data.Attendance.append(0)\r",
                                                                                "    data.StartDates.append(link.hub.datetime.date_time)\r",
                                                                                "    \r",
                                                                                "#setup next session\r",
                                                                                "link.NextSession()"
                                                                            ]
                                                                        },
                                                                        "key": 1188,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "StartSession",
                                                                            "outgoing_links": {
                                                                                "Finish": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1189,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "NextSession": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1190,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1176,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 10.16430095764344,
                                                                                "y": -34.388760602833166
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "sessionList",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "input = link.hub.Input\r",
                                                                                "data = link.hub.Data\r",
                                                                                "#for each session attendee\r",
                                                                                "for ID in sessionList:\r",
                                                                                "    \r",
                                                                                "    if ID in data.InTraining:\r",
                                                                                "    \r",
                                                                                "        #update properties\r",
                                                                                "        props = data.InTraining[ID]\r",
                                                                                "        props['ATTENDING_TRNG'] = False\r",
                                                                                "        props['IN_TRAINING'] = False\r",
                                                                                "        props['TRAINING_COMPLETED'] = True\r",
                                                                                "\r",
                                                                                "        #if pass\r",
                                                                                "        if random.random() < input.SuccessRate:\r",
                                                                                "            result = 'P'\r",
                                                                                "        #else fail\r",
                                                                                "        else:\r",
                                                                                "            result = 'F'\r",
                                                                                "            props['TRAINING_FAILED'] = True\r",
                                                                                "                 \r",
                                                                                "        #remove\r",
                                                                                "        del data.InTraining[ID]\r",
                                                                                "\r",
                                                                                "        link.SndTrainFinish(props, result)"
                                                                            ]
                                                                        },
                                                                        "key": 1189,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Finish",
                                                                            "outgoing_links": {
                                                                                "SndTrainFinish": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1179,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1176,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 18.44440284604379,
                                                                                "y": -34.377498855660235
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "#go to next session\r",
                                                                                "link.hub.Data.SessionIdx += 1\r",
                                                                                "\r",
                                                                                "if link.hub.Data.SessionIdx < len(link.hub.Input.SessionSchedule):\r",
                                                                                "    link.DelayToSessionStart(nextYr = False)\r",
                                                                                "    \r",
                                                                                "else:\r",
                                                                                "    link.hub.Data.SessionIdx = 0\r",
                                                                                "    link.DelayToSessionStart(nextYr = True)"
                                                                            ]
                                                                        },
                                                                        "key": 1190,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "NextSession",
                                                                            "outgoing_links": {
                                                                                "DelayToSessionStart": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1187,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1176,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 5.983814681569553,
                                                                                "y": -42.51810526522001
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {},
                                                                        "key": 1191,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 1,
                                                                            "name": "StopTraining",
                                                                            "outgoing_links": {
                                                                                "Release": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1192,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -21.034880837044263,
                                                                                "y": -46.91947031151817
                                                                            },
                                                                            "size": {
                                                                                "height": 0.5,
                                                                                "scale_3d": 1.0,
                                                                                "width": 0.5
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "node"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "ID",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "if ID in link.hub.Data.InTraining:\r",
                                                                                "    del link.hub.Data.InTraining[ID]\r",
                                                                                "    \r",
                                                                                "if ID in link.hub.Data.Waitlist:\r",
                                                                                "    link.hub.Data.Waitlist.remove(ID)"
                                                                            ]
                                                                        },
                                                                        "key": 1192,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "StopTraining",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1176,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -16.869280390907246,
                                                                                "y": -44.82919111941537
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "print(link.library.get_waitlist())"
                                                                            ]
                                                                        },
                                                                        "key": 1193,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "function",
                                                                            "outgoing_links": {
                                                                                "library": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1185,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -9.936127294350463,
                                                                                "y": -23.705182031625434
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    }
                                                                ],
                                                                "ifx_ports_left": [
                                                                    1178,
                                                                    1191
                                                                ],
                                                                "ifx_ports_right": [
                                                                    1179
                                                                ],
                                                                "image_id": null,
                                                                "proxy_position": {
                                                                    "x": -0.6806719555009858,
                                                                    "y": 1.7989187395383204
                                                                },
                                                                "rotation_2d": 0.0,
                                                                "rotation_3d": {
                                                                    "pitch": 0.0,
                                                                    "roll": 0.0,
                                                                    "yaw": 0.0
                                                                }
                                                            },
                                                            "key": 1172,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Training",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -8.874374904552498,
                                                                    "y": -39.957315946695566
                                                                },
                                                                "size": {
                                                                    "height": 3.392857142857143,
                                                                    "scale_3d": 1.0,
                                                                    "width": 6.398809523809524
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "actor"
                                                        },
                                                        {
                                                            "content": {
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "def count_deployed():\r",
                                                                    "    \r",
                                                                    "    inRank = link.hub.data.InRank\r",
                                                                    "\r",
                                                                    "    return len([id for id in inRank if inRank[id]['DEPLOYED']])\r",
                                                                    "    \r",
                                                                    "    "
                                                                ]
                                                            },
                                                            "key": 1194,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "library",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1150,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 3.2885695338145924,
                                                                    "y": -24.435898619316763
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "library"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "num = 1200\r",
                                                                    "print('In rank', sum(link.record.InRank[-num:])/num)\r",
                                                                    "print('Promotable', sum(link.record.Promotable[-num:])/num)\r",
                                                                    "print('Promos per yr', sum(link.record.Promotions[-num:])/len(link.record.Promotions[-num:])*12)\r",
                                                                    "print('Releases per yr', sum(link.record.Releases[-num:])/len(link.record.Releases[-num:])*12)\r",
                                                                    "print('CTs out per yr', sum(link.record.CTouts[-num:])/len(link.record.CTouts[-num:])*12)\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1195,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "PrintSummary",
                                                                "outgoing_links": {
                                                                    "record": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1167,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 4.3989560218880115,
                                                                    "y": 10.748931698013253
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {
                                                                    "finish": 0
                                                                },
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "rank = ''.join(filter(str.isalnum, link.hub.RankID.Name))\r",
                                                                    "cadre = link.hub.RankID.Cadre\r",
                                                                    "key = cadre + '_' + rank\r",
                                                                    "\r",
                                                                    "save = {}\r",
                                                                    "save[key + '_InRank'] = link.hub.record.InRank\r",
                                                                    "save[key + '_InTraining'] = link.hub.record.InTraining\r",
                                                                    "save[key + '_Deployed'] = link.hub.record.Deployed\r",
                                                                    "save[key + '_Promotable'] = link.hub.record.Promotable\r",
                                                                    "\r",
                                                                    "batch.set_replication_data(**save)"
                                                                ]
                                                            },
                                                            "key": 1196,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Finish",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1150,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 9.059105111281276,
                                                                    "y": -19.66197842857449
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        }
                                                    ],
                                                    "ifx_ports_left": [
                                                        1161,
                                                        1162,
                                                        1158
                                                    ],
                                                    "ifx_ports_right": [
                                                        1157,
                                                        1160,
                                                        1159,
                                                        1171
                                                    ],
                                                    "image_id": null,
                                                    "proxy_position": {
                                                        "x": -4.762093403985616,
                                                        "y": 3.5569417058638875
                                                    },
                                                    "rotation_2d": 0.0,
                                                    "rotation_3d": {
                                                        "pitch": 0.0,
                                                        "roll": 0.0,
                                                        "yaw": 0.0
                                                    }
                                                },
                                                "key": 1143,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "Lt-Capt",
                                                    "outgoing_links": {},
                                                    "position": {
                                                        "x": 4.012690515975853,
                                                        "y": -7.304619100666218
                                                    },
                                                    "size": {
                                                        "height": 5.595238095238095,
                                                        "scale_3d": 1.0,
                                                        "width": 6.19047619047619
                                                    },
                                                    "visible": true
                                                },
                                                "type": "actor"
                                            },
                                            {
                                                "content": {
                                                    "dict": [
                                                        [
                                                            "InOccupation",
                                                            {}
                                                        ],
                                                        [
                                                            "Deployed",
                                                            []
                                                        ],
                                                        [
                                                            "DeployRatio",
                                                            1
                                                        ],
                                                        [
                                                            "MaxDeployRatio",
                                                            1
                                                        ],
                                                        [
                                                            "DeployedPYs",
                                                            0.0
                                                        ]
                                                    ],
                                                    "display_order": "of_creation",
                                                    "pickled_keys": []
                                                },
                                                "key": 1197,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "data",
                                                    "outgoing_links": {},
                                                    "position": {
                                                        "x": 13.015281330780564,
                                                        "y": 22.316534754943596
                                                    },
                                                    "size": {
                                                        "height": 6.934523809523809,
                                                        "scale_3d": 1.0,
                                                        "width": 9.94047619047619
                                                    },
                                                    "visible": true
                                                },
                                                "type": "data"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "props",
                                                    "roles_and_prioritizing": {},
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "#initialize status properties\r",
                                                        "props['RESERVED'] = False\r",
                                                        "props['DEPLOYED'] = False\r",
                                                        "props['POST_DEPLOY'] = False\r",
                                                        "props['IN_TRAINING'] = False\r",
                                                        "props['ATTENDING_TRNG'] = False\r",
                                                        "props['RELEASED'] = False\r",
                                                        "\r",
                                                        "\r",
                                                        "#add the new person to the list of people in the occupation\r",
                                                        "link.hub.data.InOccupation[props['ID']] = props\r",
                                                        "\r",
                                                        "\r",
                                                        "link.Enter(props)"
                                                    ]
                                                },
                                                "key": 1198,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "Enter",
                                                    "outgoing_links": {
                                                        "Enter": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1161,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1205,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": -4.926934187113974,
                                                        "y": -6.81547619047619
                                                    },
                                                    "size": {
                                                        "height": 4.7023809523809526,
                                                        "scale_3d": 1.0,
                                                        "width": 7.3809523809523805
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "props",
                                                    "roles_and_prioritizing": {},
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "del link.hub.data.InOccupation[props['ID']]\r",
                                                        "\r",
                                                        "#if CT release, send to other component.\r",
                                                        "if 'CT' in props:\r",
                                                        "    #log.warning(\"Member %s CT from RegF\" % props['ID'])\r",
                                                        "    \r",
                                                        "    #send to other component\r",
                                                        "    link.CTout(props)\r",
                                                        ""
                                                    ]
                                                },
                                                "key": 1199,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "Release",
                                                    "outgoing_links": {
                                                        "CTout": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1214,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1205,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 48.50059493053199,
                                                        "y": -14.796614547747048
                                                    },
                                                    "size": {
                                                        "height": 5.1,
                                                        "scale_3d": 1.0,
                                                        "width": 10.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "durationDays, resReq = None",
                                                    "roles_and_prioritizing": {},
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "#request resources for deployment\r",
                                                        "#ResReq is a dict where the keys are the ranks\r",
                                                        "#and the values are the number of resources requested\r",
                                                        "\r",
                                                        "\r",
                                                        "ableToDeploy = []\r",
                                                        "\r",
                                                        "#create list of all that are able to deploy given number requested at each rank\r",
                                                        "for rank in resReq:\r",
                                                        "    number = resReq[rank]\r",
                                                        "    ableToDeploy.extend(link.hub.library.get_able_to_deploy(rank, number))\r",
                                                        "\r",
                                                        "#determine limit on the number of reservists that currently can deploy based on the task duration \r",
                                                        "deployLimit = link.hub.library.get_deploy_limit(durationDays/365.2422)\r",
                                                        "\r",
                                                        "#if the set of personnel able to deploy is greater than the deployment limit\r",
                                                        "if deployLimit < len(ableToDeploy):\r",
                                                        "    \r",
                                                        "    #randomly sample a subset within the able to deploy list with size equal to the deployment limit\r",
                                                        "    ableToDeploy = random.sample(ableToDeploy, deployLimit)\r",
                                                        "\r",
                                                        "\r",
                                                        "#return a dict of reservists who can deploy for this task\r",
                                                        "\r",
                                                        "resList = {}\r",
                                                        "for id in ableToDeploy:\r",
                                                        "    resList[id] = link.hub.data.InOccupation[id]\r",
                                                        "    \r",
                                                        "return resList\r",
                                                        "    \r",
                                                        "\r",
                                                        "    \r",
                                                        "    "
                                                    ]
                                                },
                                                "key": 1200,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "RequestResources",
                                                    "outgoing_links": {
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1205,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": -0.6766591814778572,
                                                        "y": -18.766014632985886
                                                    },
                                                    "size": {
                                                        "height": 7.738095238095238,
                                                        "scale_3d": 1.0,
                                                        "width": 14.583333333333332
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "ResList",
                                                    "roles_and_prioritizing": {},
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "#deploys the resources\r",
                                                        "\r",
                                                        "for props in ResList.values():\r",
                                                        "    props['RESERVED'] = False\r",
                                                        "    props['DEPLOYED'] = True"
                                                    ]
                                                },
                                                "key": 1201,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "DeployResources",
                                                    "outgoing_links": {
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1205,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": -0.7389364992813356,
                                                        "y": -31.200915375977395
                                                    },
                                                    "size": {
                                                        "height": 6.369047619047619,
                                                        "scale_3d": 1.0,
                                                        "width": 14.910714285714285
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "ResList",
                                                    "roles_and_prioritizing": {},
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "#returns the resources post-deployment\r",
                                                        "#these resources cannot be used on another deployment\r",
                                                        "#until they are released\r",
                                                        "\r",
                                                        "for props in ResList.values():\r",
                                                        "    props['DEPLOYED'] = False\r",
                                                        "    props['POST_DEPLOY'] = True\r",
                                                        "    \r",
                                                        "    link.hub.data.Deployed.remove(props['ID'])\r",
                                                        "    \r",
                                                        "\r",
                                                        ""
                                                    ]
                                                },
                                                "key": 1202,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "ReturnResources",
                                                    "outgoing_links": {
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1205,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": -0.6080188327633725,
                                                        "y": -37.13255070614585
                                                    },
                                                    "size": {
                                                        "height": 6.845238095238095,
                                                        "scale_3d": 1.0,
                                                        "width": 14.970238095238095
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "ResList",
                                                    "roles_and_prioritizing": {},
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "#releases the resources so that they can be deployed again\r",
                                                        "#(i.e., the end of the waiver period)\r",
                                                        "\r",
                                                        "for props in ResList.values():\r",
                                                        "    props['POST_DEPLOY'] = False"
                                                    ]
                                                },
                                                "key": 1203,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "ReleaseResources",
                                                    "outgoing_links": {
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1205,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": -0.4624420298046495,
                                                        "y": -42.88175928253953
                                                    },
                                                    "size": {
                                                        "height": 7.529761904761904,
                                                        "scale_3d": 1.0,
                                                        "width": 14.970238095238095
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "durationDays, resList",
                                                    "roles_and_prioritizing": {},
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "#reserves a list of resources for a deployment, preventing\r",
                                                        "#them from attending training or being used in another deployment\r",
                                                        "\r",
                                                        "for props in resList.values():\r",
                                                        "    \r",
                                                        "    props['RESERVED'] = True\r",
                                                        "    \r",
                                                        "link.hub.data.Deployed.extend(resList.keys())\r",
                                                        "\r",
                                                        "\r",
                                                        "pys = len(resList)*durationDays/365.2422\r",
                                                        "\r",
                                                        "link.hub.data.DeployedPYs += pys\r",
                                                        "\r",
                                                        "signal(link.ResetDeployedPYs, pys, time=delay(days = 365.2422))\r",
                                                        ""
                                                    ]
                                                },
                                                "key": 1204,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "ReserveResources",
                                                    "outgoing_links": {
                                                        "ResetDeployedPYs": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1209,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1205,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": -0.8012282321925087,
                                                        "y": -25.19458343902605
                                                    },
                                                    "size": {
                                                        "height": 7.946428571428571,
                                                        "scale_3d": 1.0,
                                                        "width": 14.94047619047619
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {},
                                                "key": 1205,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "hub",
                                                    "outgoing_links": {
                                                        "data": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1197,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "library": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1206,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 13.210007511458816,
                                                        "y": 10.608924159978631
                                                    },
                                                    "size": {
                                                        "height": 1.5,
                                                        "scale_3d": 1.0,
                                                        "width": 1.5
                                                    },
                                                    "visible": true
                                                },
                                                "type": "hub"
                                            },
                                            {
                                                "content": {
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "def get_able_to_deploy(rank, number):\r",
                                                        "    \r",
                                                        "    inOcc = link.hub.data.InOccupation\r",
                                                        "    \r",
                                                        "    #find deployable people\r",
                                                        "    able = [id for id in inOcc.keys()\r",
                                                        "        if inOcc[id]['RANK'] == rank\r",
                                                        "        and not inOcc[id]['ATTENDING_TRNG']\r",
                                                        "        and not inOcc[id]['RESERVED']\r",
                                                        "        and not inOcc[id]['DEPLOYED'] \r",
                                                        "        and not inOcc[id]['POST_DEPLOY']]\r",
                                                        "    \r",
                                                        "    #if need fewer than are able, randomly sample the number required from the able set\r",
                                                        "    if number < len(able):\r",
                                                        "        able = random.sample(able, number)\r",
                                                        "        \r",
                                                        "    return able\r",
                                                        "\r",
                                                        "\r",
                                                        "def get_deploy_limit(duration):\r",
                                                        "    \r",
                                                        "    data = link.hub.data\r",
                                                        "    \r",
                                                        "    #get max PYs that can deploy based on current occupation pop\r",
                                                        "    maxPYs = len(data.InOccupation) * data.DeployRatio\r",
                                                        "    \r",
                                                        "    #determine available PY room\r",
                                                        "    availPYs = maxPYs - data.DeployedPYs\r",
                                                        "    \r",
                                                        "    #determine number of deployable personnel based on available PY room\r",
                                                        "    availPers_PY = availPYs/duration\r",
                                                        "    \r",
                                                        "    #determine absolute max deployable personel\r",
                                                        "    maxDeployed = len(data.InOccupation) * data.MaxDeployRatio\r",
                                                        "    \r",
                                                        "    #determine number of deployable personnel based on max deployable\r",
                                                        "    availPers_Max = maxDeployed - len(data.Deployed)\r",
                                                        "    \r",
                                                        "    #the number of personnel that can deploy is the lesser of the\r",
                                                        "    #deployable personnel based on PYs or max deployable\r",
                                                        "    return max(0, int(min(availPers_PY, availPers_Max)))\r",
                                                        "    \r",
                                                        "\r",
                                                        "    "
                                                    ]
                                                },
                                                "key": 1206,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "library",
                                                    "outgoing_links": {
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1205,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 18.965057542710596,
                                                        "y": 13.991443438892098
                                                    },
                                                    "size": {
                                                        "height": 5.1,
                                                        "scale_3d": 1.0,
                                                        "width": 10.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "library"
                                            },
                                            {
                                                "content": {},
                                                "key": 1207,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 1,
                                                    "name": "DeployHub",
                                                    "outgoing_links": {
                                                        "Deploy": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1208,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": -12.92446735528416,
                                                        "y": -33.069246027404944
                                                    },
                                                    "size": {
                                                        "height": 0.5,
                                                        "scale_3d": 1.0,
                                                        "width": 0.5
                                                    },
                                                    "visible": true
                                                },
                                                "type": "node"
                                            },
                                            {
                                                "content": {},
                                                "key": 1208,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "Deploy",
                                                    "outgoing_links": {
                                                        "DeployResources": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1201,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "ReleaseResources": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1203,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "RequestResources": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1200,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "ReserveResources": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1204,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "ReturnResources": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1202,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": -7.635307008131811,
                                                        "y": -32.253441185791566
                                                    },
                                                    "size": {
                                                        "height": 1.5,
                                                        "scale_3d": 1.0,
                                                        "width": 1.5
                                                    },
                                                    "visible": true
                                                },
                                                "type": "hub"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "pys",
                                                    "roles_and_prioritizing": {},
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "link.hub.data.DeployedPYs -= pys"
                                                    ]
                                                },
                                                "key": 1209,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "ResetDeployedPYs",
                                                    "outgoing_links": {
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1205,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 7.916293194761721,
                                                        "y": -25.283586862916298
                                                    },
                                                    "size": {
                                                        "height": 5.1,
                                                        "scale_3d": 1.0,
                                                        "width": 10.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "",
                                                    "roles_and_prioritizing": {
                                                        "reset": 0
                                                    },
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "link.hub.data.InOccupation = {}\r",
                                                        "link.hub.data.Deployed = []\r",
                                                        "#link.hub.data.DeployRatio = 1.0/7.0\r",
                                                        "#link.hub.data.MaxDeployRatio = 0.5\r",
                                                        "link.hub.data.DeployedPYs = 0.0"
                                                    ]
                                                },
                                                "key": 1210,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "Reset",
                                                    "outgoing_links": {
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1205,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 19.321638703964354,
                                                        "y": 8.788145132529312
                                                    },
                                                    "size": {
                                                        "height": 5.1,
                                                        "scale_3d": 1.0,
                                                        "width": 10.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "",
                                                    "roles_and_prioritizing": {},
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "print('CPL-PTE', len(link.library.get_able_to_deploy('CPL-PTE', 100)))\r",
                                                        "print('MCPL', len(link.library.get_able_to_deploy('MCPL', 100)))\r",
                                                        "print('SGT', len(link.library.get_able_to_deploy('SGT', 100)))"
                                                    ]
                                                },
                                                "key": 1211,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "function",
                                                    "outgoing_links": {
                                                        "library": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1206,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 29.4586062592452,
                                                        "y": 15.335856119219542
                                                    },
                                                    "size": {
                                                        "height": 5.089285714285714,
                                                        "scale_3d": 1.0,
                                                        "width": 13.511904761904761
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "",
                                                    "roles_and_prioritizing": {},
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "print(link.library.get_deploy_limit(0.5))\r",
                                                        "\r",
                                                        ""
                                                    ]
                                                },
                                                "key": 1212,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "function",
                                                    "outgoing_links": {
                                                        "library": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1206,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 32.47035098970373,
                                                        "y": 9.57911374703742
                                                    },
                                                    "size": {
                                                        "height": 5.1,
                                                        "scale_3d": 1.0,
                                                        "width": 10.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "deployRatio, maxDeployRatio",
                                                    "roles_and_prioritizing": {
                                                        "setup": 0
                                                    },
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "link.hub.data.DeployRatio = deployRatio\r",
                                                        "link.hub.data.MaxDeployRatio = maxDeployRatio"
                                                    ]
                                                },
                                                "key": 1213,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "Setup",
                                                    "outgoing_links": {
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1205,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 5.009630424268722,
                                                        "y": 14.79659735278029
                                                    },
                                                    "size": {
                                                        "height": 5.1,
                                                        "scale_3d": 1.0,
                                                        "width": 10.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {},
                                                "key": 1214,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 1,
                                                    "name": "CTout",
                                                    "outgoing_links": {
                                                        "CTin": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1413,
                                                            "visible": true,
                                                            "waypoints": [
                                                                {
                                                                    "waypoint_pos": {
                                                                        "x": 27.987683982866116,
                                                                        "y": -8.94901313690634
                                                                    }
                                                                },
                                                                {
                                                                    "waypoint_pos": {
                                                                        "x": 28.05353321616019,
                                                                        "y": -13.182315388497765
                                                                    }
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 56.865941300696065,
                                                        "y": -16.836441835251403
                                                    },
                                                    "size": {
                                                        "height": 0.5,
                                                        "scale_3d": 1.0,
                                                        "width": 0.5
                                                    },
                                                    "visible": true
                                                },
                                                "type": "node"
                                            },
                                            {
                                                "content": {},
                                                "key": 1215,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 1,
                                                    "name": "CTin",
                                                    "outgoing_links": {
                                                        "CTin": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1216,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 56.71013403197822,
                                                        "y": -0.5214103838248743
                                                    },
                                                    "size": {
                                                        "height": 0.5,
                                                        "scale_3d": 1.0,
                                                        "width": 0.5
                                                    },
                                                    "visible": true
                                                },
                                                "type": "node"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "props",
                                                    "roles_and_prioritizing": {},
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "link.hub.data.InOccupation[props['ID']] = props\r",
                                                        "\r",
                                                        "#log.warning(\"Member %s CT to RegF\" % props['ID'])\r",
                                                        "\r",
                                                        "props['INSERT'] = True\r",
                                                        "\r",
                                                        "#drap the CT flag once they are in\r",
                                                        "del props['CT']\r",
                                                        "\r",
                                                        "\r",
                                                        "if props['ID'] == 101046:\r",
                                                        "    log.warning(\"CT to RegF 101046************\")\r",
                                                        "\r",
                                                        "link.Enter(props)\r",
                                                        "\r",
                                                        ""
                                                    ]
                                                },
                                                "key": 1216,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "CTin",
                                                    "outgoing_links": {
                                                        "Enter": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1161,
                                                            "visible": true,
                                                            "waypoints": [
                                                                {
                                                                    "waypoint_pos": {
                                                                        "x": 0.8780262439995659,
                                                                        "y": -0.7747290388231464
                                                                    }
                                                                },
                                                                {
                                                                    "waypoint_pos": {
                                                                        "x": 0.5681346284703073,
                                                                        "y": -4.131888207056781
                                                                    }
                                                                }
                                                            ]
                                                        },
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1205,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 48.83732176347636,
                                                        "y": 1.5784589604665178
                                                    },
                                                    "size": {
                                                        "height": 5.1,
                                                        "scale_3d": 1.0,
                                                        "width": 10.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {},
                                                "key": 1217,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 1,
                                                    "name": "Recruit",
                                                    "outgoing_links": {
                                                        "Enter": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1198,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": -13.736101844046901,
                                                        "y": -13.099680136986812
                                                    },
                                                    "size": {
                                                        "height": 0.5,
                                                        "scale_3d": 1.0,
                                                        "width": 0.5
                                                    },
                                                    "visible": true
                                                },
                                                "type": "node"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "",
                                                    "roles_and_prioritizing": {},
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "import pickle\r",
                                                        "\r",
                                                        "p = str(sim.get_replication_folder().joinpath(\"RegF.pickle\"))\r",
                                                        "\r",
                                                        "\r",
                                                        "#file = open(\"RegF.pickle\",\"wb\")\r",
                                                        "file = open(p, \"wb\")\r",
                                                        "pickle.dump(link.hub.data.InOccupation, file)\r",
                                                        "file.close()\r",
                                                        "\r",
                                                        "\r",
                                                        ""
                                                    ]
                                                },
                                                "key": 1218,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "save",
                                                    "outgoing_links": {
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1205,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 4.836866589679548,
                                                        "y": 8.04637163846358
                                                    },
                                                    "size": {
                                                        "height": 5.1,
                                                        "scale_3d": 1.0,
                                                        "width": 10.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "children": [
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#if part of initial pop, send to initial pop function\r",
                                                                    "if 'INSERT' in props:\r",
                                                                    "        link.Insert(props)\r",
                                                                    "        return\r",
                                                                    "\r",
                                                                    "#get id\r",
                                                                    "ID = props['ID']\r",
                                                                    "\r",
                                                                    "#update props\r",
                                                                    "props['RANK'] = link.hub.RankID.Name\r",
                                                                    "props['OCC'] = link.hub.RankID.Occupation\r",
                                                                    "props['CADRE'] = link.hub.RankID.Cadre\r",
                                                                    "props['DOP'] = link.hub.datetime.date_time\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "#add to in-rank\r",
                                                                    "link.hub.data.InRank[ID] = props\r",
                                                                    "link.hub.data.InRankCount += 1\r",
                                                                    "\r",
                                                                    "#delay before start training (if needed)\r",
                                                                    "dbt = link.hub.RankInfo.DelayBeforeTraining\r",
                                                                    "if dbt > 0:\r",
                                                                    "    signal(link.StartTraining, props, delay(days = dbt))\r",
                                                                    "else:\r",
                                                                    "    link.StartTraining(props)\r",
                                                                    "\r",
                                                                    "#setup attrition\r",
                                                                    "link.SetupAttrition(props)\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1220,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "EnterRank",
                                                                "outgoing_links": {
                                                                    "Insert": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1241,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "SetupAttrition": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1240,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "StartTraining": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1227,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1226,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -30.012218907185066,
                                                                    "y": -39.795841039640734
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "dict": [
                                                                    [
                                                                        "Positions",
                                                                        105
                                                                    ],
                                                                    [
                                                                        "MinTIR",
                                                                        4
                                                                    ],
                                                                    [
                                                                        "MaxTIR",
                                                                        1000
                                                                    ],
                                                                    [
                                                                        "DelayBeforeTraining",
                                                                        0
                                                                    ],
                                                                    [
                                                                        "ReleaseIfFail",
                                                                        true
                                                                    ],
                                                                    [
                                                                        "PushPromote",
                                                                        false
                                                                    ],
                                                                    [
                                                                        "AttrRate",
                                                                        0.12
                                                                    ],
                                                                    [
                                                                        "MaxAge",
                                                                        1000
                                                                    ],
                                                                    [
                                                                        "DeployRatio",
                                                                        0.143
                                                                    ],
                                                                    [
                                                                        "CTRate",
                                                                        0.02
                                                                    ]
                                                                ],
                                                                "display_order": "of_creation",
                                                                "pickled_keys": []
                                                            },
                                                            "key": 1221,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "RankInfo",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -24.690955916045823,
                                                                    "y": -0.8998517282035177
                                                                },
                                                                "size": {
                                                                    "height": 10.178571428571429,
                                                                    "scale_3d": 1.0,
                                                                    "width": 6.875
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "data"
                                                        },
                                                        {
                                                            "content": {
                                                                "dict": [
                                                                    [
                                                                        "InRank",
                                                                        {}
                                                                    ],
                                                                    [
                                                                        "InTraining",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "Promotable",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "Deployed",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "InRankCount",
                                                                        0
                                                                    ],
                                                                    [
                                                                        "InTrainingCount",
                                                                        0
                                                                    ],
                                                                    [
                                                                        "PromotableCount",
                                                                        0
                                                                    ],
                                                                    [
                                                                        "DeployedCount",
                                                                        0
                                                                    ]
                                                                ],
                                                                "display_order": "of_creation",
                                                                "pickled_keys": []
                                                            },
                                                            "key": 1222,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "data",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -15.753892763598326,
                                                                    "y": -2.1163262518204564
                                                                },
                                                                "size": {
                                                                    "height": 9.375,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "data"
                                                        },
                                                        {
                                                            "content": {
                                                                "dict": [
                                                                    [
                                                                        "Name",
                                                                        "Maj"
                                                                    ],
                                                                    [
                                                                        "Occupation",
                                                                        "NWO"
                                                                    ],
                                                                    [
                                                                        "Cadre",
                                                                        "RegF"
                                                                    ]
                                                                ],
                                                                "display_order": "of_creation",
                                                                "pickled_keys": []
                                                            },
                                                            "key": 1223,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "RankID",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -27.50527447254697,
                                                                    "y": -12.681312051278057
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "data"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {
                                                                    "reset": 0
                                                                },
                                                                "script_imports": {
                                                                    "datetime": [
                                                                        "datetime",
                                                                        "datetime"
                                                                    ]
                                                                },
                                                                "script_lines": [
                                                                    "\r",
                                                                    "link.hub.data.InRank = {}\r",
                                                                    "link.hub.data.InTraining = []\r",
                                                                    "link.hub.data.Promotable = []\r",
                                                                    "link.hub.data.Deployed = []\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "link.hub.data.InRankCount = 0\r",
                                                                    "link.hub.data.InTrainingCount = 0\r",
                                                                    "link.hub.data.PromotableCount = 0\r",
                                                                    "link.hub.data.DeployedCount = 0\r",
                                                                    "\r",
                                                                    "startDate = datetime(2019,6,1,9,0,0)\r",
                                                                    "link.hub.datetime.set_date_time(startDate)\r",
                                                                    "\r",
                                                                    "link.hub.record.InRank = [0]\r",
                                                                    "link.hub.record.InTraining = [0]\r",
                                                                    "link.hub.record.Promotable = [0]\r",
                                                                    "link.hub.record.Deployed = [0]\r",
                                                                    "link.hub.record.Time = [startDate]\r",
                                                                    "link.hub.record.Releases = []\r",
                                                                    "link.hub.record.CTouts = []\r",
                                                                    "link.hub.record.Promotions = []\r",
                                                                    "link.hub.record.Positions = [link.hub.RankInfo.Positions]\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1224,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Reset",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1226,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 3.3173287652768817,
                                                                    "y": -13.986227580374978
                                                                },
                                                                "size": {
                                                                    "height": 6.011904761904762,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "date_time": {
                                                                    "day": 1,
                                                                    "hour": 9,
                                                                    "minute": 0,
                                                                    "month": 6,
                                                                    "second": 0,
                                                                    "year": 2019
                                                                }
                                                            },
                                                            "key": 1225,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "datetime",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": 2.3615869633262303,
                                                                    "y": -9.033337372290976
                                                                },
                                                                "size": {
                                                                    "height": 3.988095238095238,
                                                                    "scale_3d": 1.0,
                                                                    "width": 6.19047619047619
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "datetime"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1226,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "hub",
                                                                "outgoing_links": {
                                                                    "RankID": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1223,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "RankInfo": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1221,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "data": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1222,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "datetime": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1225,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "library": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1270,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "rank": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1219,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "record": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1243,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -7.750112694994645,
                                                                    "y": -18.00391297376486
                                                                },
                                                                "size": {
                                                                    "height": 1.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 1.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "hub"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "if props['ID'] not in link.hub.data.InRank: return\r",
                                                                    "\r",
                                                                    "link.hub.data.InTraining.append(props['ID'])\r",
                                                                    "link.hub.data.InTrainingCount += 1\r",
                                                                    "\r",
                                                                    "link.TrainRequest(props)"
                                                                ]
                                                            },
                                                            "key": 1227,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "StartTraining",
                                                                "outgoing_links": {
                                                                    "TrainRequest": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1254,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1226,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -20.026080654978394,
                                                                    "y": -39.697656269064375
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props, result",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "if props['ID'] not in link.hub.data.InRank: return\r",
                                                                    "\r",
                                                                    "link.hub.data.InTraining.remove(props['ID'])\r",
                                                                    "link.hub.data.InTrainingCount -= 1\r",
                                                                    "\r",
                                                                    "#if fail\r",
                                                                    "if result == 'F':\r",
                                                                    "    \r",
                                                                    "    #immediate release\r",
                                                                    "    if link.hub.RankInfo.ReleaseIfFail:\r",
                                                                    "        link.RemoveMember(props, 'failed')\r",
                                                                    "        \r",
                                                                    "    #or stay in rank until release\r",
                                                                    "\r",
                                                                    "#else pass\r",
                                                                    "else:\r",
                                                                    "    link.MinTIRDelay(props)\r",
                                                                    "        \r",
                                                                    "        \r",
                                                                    "        \r",
                                                                    "    \r",
                                                                    "    \r",
                                                                    "    \r",
                                                                    "    \r",
                                                                    "\r",
                                                                    "    "
                                                                ]
                                                            },
                                                            "key": 1228,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "FinishTraining",
                                                                "outgoing_links": {
                                                                    "MinTIRDelay": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1242,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "RemoveMember": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1239,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1226,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 5.515274902002796,
                                                                    "y": -39.49022853059453
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "if props['ID'] not in link.hub.data.InRank: return\r",
                                                                    "\r",
                                                                    "#if there is no next rank, do nothing\r",
                                                                    "if link.SndReq is None: return\r",
                                                                    "\r",
                                                                    "#add to promo list if not already there (might already be there in obscure cases)\r",
                                                                    "if props['ID'] not in link.hub.data.Promotable:\r",
                                                                    "    link.hub.data.Promotable.append(props['ID'])\r",
                                                                    "    link.hub.data.PromotableCount += 1\r",
                                                                    "\r",
                                                                    "#if push promote\r",
                                                                    "if link.hub.RankInfo.PushPromote:\r",
                                                                    "    link.Promote(props)\r",
                                                                    "\r",
                                                                    "#else request promotion\r",
                                                                    "else:\r",
                                                                    "    link.SndReq()\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1229,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "MetMinTIR",
                                                                "outgoing_links": {
                                                                    "Promote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1230,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "SndReq": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1236,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1226,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 21.676515289907346,
                                                                    "y": -39.3404021116089
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#promote to next rank\r",
                                                                    "link.PromoteOut(props)\r",
                                                                    "\r",
                                                                    "#remove from current rank\r",
                                                                    "link.RemoveMember(props, 'promoted')\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1230,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Promote",
                                                                "outgoing_links": {
                                                                    "PromoteOut": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1233,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "RemoveMember": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1239,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1226,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 30.26797020714654,
                                                                    "y": -39.30186888370791
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "nextRankPositions, nextRankCount",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "data = link.hub.data\r",
                                                                    "info = link.hub.RankInfo\r",
                                                                    "\r",
                                                                    "#maximum possible promotions\r",
                                                                    "maxPromos = min(data.PromotableCount, nextRankPositions - nextRankCount)\r",
                                                                    "\r",
                                                                    "#promotions to balance strength\r",
                                                                    "s0 = data.InRankCount\r",
                                                                    "s1 = nextRankCount\r",
                                                                    "p0 = info.Positions\r",
                                                                    "p1 = nextRankPositions\r",
                                                                    "balancePromos = (s0*p1 - s1*p0)/(p0 + p1)\r",
                                                                    "\r",
                                                                    "#adjust number of promos stochastically\r",
                                                                    "balancePromos_ = math.floor(balancePromos)\r",
                                                                    "frac = balancePromos - balancePromos_\r",
                                                                    "if random.random() > frac:\r",
                                                                    "    balancePromos = balancePromos_\r",
                                                                    "else:\r",
                                                                    "    balancePromos = balancePromos_ + 1\r",
                                                                    "\r",
                                                                    "#determine final number of promos\r",
                                                                    "numPromos = min(maxPromos, balancePromos)\r",
                                                                    "\r",
                                                                    "if numPromos <= 0: return\r",
                                                                    "\r",
                                                                    "promoteIDs = random.sample(link.hub.data.Promotable, numPromos)\r",
                                                                    "\r",
                                                                    "for ID in promoteIDs:\r",
                                                                    "    link.Promote(link.hub.data.InRank[ID])\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1231,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "PromoteInvite",
                                                                "outgoing_links": {
                                                                    "Promote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1230,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1226,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 30.236943946864095,
                                                                    "y": -54.94925517566933
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#if nothing below this rank, don't invite a promotion\r",
                                                                    "if link.InvitePromote is None: return\r",
                                                                    "\r",
                                                                    "# if there is room in the rank\r",
                                                                    "if link.hub.data.InRankCount < link.hub.RankInfo.Positions:\r",
                                                                    "\r",
                                                                    "    #send the number of positions and current in-rank count\r",
                                                                    "    link.InvitePromote(link.hub.RankInfo.Positions, link.hub.data.InRankCount)"
                                                                ]
                                                            },
                                                            "key": 1232,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "InvitePromote",
                                                                "outgoing_links": {
                                                                    "InvitePromote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1234,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1226,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -30.008885903158987,
                                                                    "y": -54.932325409304234
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1233,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "SndPromo",
                                                                "outgoing_links": {
                                                                    "Enter": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1291,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 40.81257151160083,
                                                                    "y": -41.4195199794459
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1234,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "SndInvite",
                                                                "outgoing_links": {
                                                                    "Invite": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1159,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -37.22325753644102,
                                                                    "y": -57.04376020783337
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1235,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "Invite",
                                                                "outgoing_links": {
                                                                    "PromoteInvite": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1231,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 41.1022611870765,
                                                                    "y": -57.271274325502496
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1236,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "SndReq",
                                                                "outgoing_links": {
                                                                    "Request": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1292,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 40.58019488696916,
                                                                    "y": -49.98849280979479
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1237,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "Enter",
                                                                "outgoing_links": {
                                                                    "EnterRank": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1220,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -37.04218246881857,
                                                                    "y": -42.01569816569041
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1238,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "Request",
                                                                "outgoing_links": {
                                                                    "InvitePromote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1232,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -36.98495220560267,
                                                                    "y": -49.363009874348336
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props, lossType",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "ID = props['ID']\r",
                                                                    "\r",
                                                                    "#remove from all member lists\r",
                                                                    "if ID in link.hub.data.InTraining:\r",
                                                                    "    link.hub.data.InTraining.remove(ID)\r",
                                                                    "    link.hub.data.InTrainingCount -= 1\r",
                                                                    "    \r",
                                                                    "\r",
                                                                    "if ID in link.hub.data.Promotable:\r",
                                                                    "    link.hub.data.Promotable.remove(ID)\r",
                                                                    "    link.hub.data.PromotableCount -= 1\r",
                                                                    "\r",
                                                                    "if ID in link.hub.data.InRank:\r",
                                                                    "    del link.hub.data.InRank[ID]\r",
                                                                    "    link.hub.data.InRankCount -= 1\r",
                                                                    "    \r",
                                                                    "    #record release\r",
                                                                    "    if lossType == 'released':\r",
                                                                    "        props['RELEASED'] = True\r",
                                                                    "        link.hub.record.Releases[-1] += 1\r",
                                                                    "        link.Release(props)\r",
                                                                    "        link.StopTraining(ID)\r",
                                                                    "    \r",
                                                                    "    #record CT\r",
                                                                    "    elif lossType == 'CT':\r",
                                                                    "        props['CT'] = True\r",
                                                                    "        props['DOP'] = link.hub.datetime.date_time  #override promotion time\r",
                                                                    "        link.hub.record.CTouts[-1] += 1\r",
                                                                    "        link.Release(props)\r",
                                                                    "        link.StopTraining(ID)\r",
                                                                    "        \r",
                                                                    "    \r",
                                                                    "    #record promotion\r",
                                                                    "    elif lossType == 'promoted':\r",
                                                                    "        link.hub.record.Promotions[-1] += 1\r",
                                                                    "    \r",
                                                                    "    #invite promotion\r",
                                                                    "    link.InvitePromote()\r",
                                                                    "    \r",
                                                                    "\r",
                                                                    "    \r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1239,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "RemoveMember",
                                                                "outgoing_links": {
                                                                    "InvitePromote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1232,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "Release": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1247,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": 32.34392154184954,
                                                                                    "y": -63.223816325109745
                                                                                }
                                                                            }
                                                                        ]
                                                                    },
                                                                    "StopTraining": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1267,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": -11.890454134805578,
                                                                                    "y": -46.83253535228758
                                                                                }
                                                                            },
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": -11.858746257112767,
                                                                                    "y": -43.72516333839172
                                                                                }
                                                                            }
                                                                        ]
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1226,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 5.817043142888761,
                                                                    "y": -54.71431714204966
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#MaxAge\r",
                                                                    "ageDays = (link.hub.datetime.date_time - props['DOB']).days\r",
                                                                    "maxAgeDaysLeft = link.hub.RankInfo.MaxAge*365 - ageDays\r",
                                                                    "\r",
                                                                    "#Max TIR\r",
                                                                    "TIRDays = (link.hub.datetime.date_time - props['DOP']).days\r",
                                                                    "maxTIRDaysLeft = link.hub.RankInfo.MaxTIR*365 - TIRDays\r",
                                                                    "\r",
                                                                    "#voluntary release (based on attrition rate)\r",
                                                                    "alpha = -math.log(1.0 - link.hub.RankInfo.AttrRate)\r",
                                                                    "volDaysLeft = random.expovariate(alpha)*365\r",
                                                                    "\r",
                                                                    "#CT release (based on CT rate)\r",
                                                                    "alpha = -math.log(1.0 - link.hub.RankInfo.CTRate)\r",
                                                                    "ctDaysLeft = random.expovariate(alpha)*365\r",
                                                                    "\r",
                                                                    "#note, need to label CT releases\r",
                                                                    "\r",
                                                                    "#schedule release\r",
                                                                    "days = min(maxAgeDaysLeft, maxTIRDaysLeft, volDaysLeft, ctDaysLeft)\r",
                                                                    "\r",
                                                                    "#label the loss type\r",
                                                                    "lossType = 'released'\r",
                                                                    "if days == ctDaysLeft:\r",
                                                                    "    lossType = 'CT'\r",
                                                                    "\r",
                                                                    "signal(link.RemoveMember, (props, lossType), delay(days = days))"
                                                                ]
                                                            },
                                                            "key": 1240,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "SetupAttrition",
                                                                "outgoing_links": {
                                                                    "RemoveMember": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1239,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1226,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -20.00560338611418,
                                                                    "y": -46.629645698637454
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#insert member into model (used for initial pop and CTs)\r",
                                                                    "\r",
                                                                    "#if member not in this rank, send to next rank (if next rank exists)\r",
                                                                    "if props['RANK'] != link.hub.RankID.Name:\r",
                                                                    "    if link.SndPromo is not None:\r",
                                                                    "        #log.warning(\"Rank: %s, Member rank: %s, Member ID: %s\" % (link.hub.RankID.Name, props['RANK'], props['ID']))\r",
                                                                    "        link.SndPromo(props)\r",
                                                                    "    else:\r",
                                                                    "        log.warning(\"Input member's rank not found in model.\")\r",
                                                                    "    return\r",
                                                                    "\r",
                                                                    "#log.warning(\"member %s enter %s\" % (props['ID'], link.hub.RankID.Name))\r",
                                                                    "\r",
                                                                    "#cancel insert flag\r",
                                                                    "if 'INSERT' in props:\r",
                                                                    "    del props['INSERT']\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "#get id\r",
                                                                    "ID = props['ID']\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "#update props (not all usual props are updated for initial pop)\r",
                                                                    "props['OCC'] = link.hub.RankID.Occupation\r",
                                                                    "props['CADRE'] = link.hub.RankID.Cadre\r",
                                                                    "\r",
                                                                    "#add to in-rank\r",
                                                                    "link.hub.data.InRank[ID] = props\r",
                                                                    "link.hub.data.InRankCount += 1\r",
                                                                    "\r",
                                                                    "#insert at Min-TIR delay step\r",
                                                                    "link.MinTIRDelay(props)\r",
                                                                    "\r",
                                                                    "#setup attrition\r",
                                                                    "link.SetupAttrition(props)\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1241,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Insert",
                                                                "outgoing_links": {
                                                                    "MinTIRDelay": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1242,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": 13.558717964465075,
                                                                                    "y": -31.554183083148093
                                                                                }
                                                                            }
                                                                        ]
                                                                    },
                                                                    "SetupAttrition": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1240,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "SndPromo": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1233,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": 31.94937653742584,
                                                                                    "y": -28.477348338185028
                                                                                }
                                                                            }
                                                                        ]
                                                                    },
                                                                    "StartTraining": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1227,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1226,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -29.989434128890377,
                                                                    "y": -29.305548588756988
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#if member entered this rank as initial pop, cancel the flag here\r",
                                                                    "#(no more treatment as initial_pop once processed through initial rank)\r",
                                                                    "if 'INSERT' in props:\r",
                                                                    "    del props['INSERT']\r",
                                                                    "\r",
                                                                    "#delay to Min TIR (if required)\r",
                                                                    "TIRdays = (link.hub.datetime.date_time - props['DOP']).days\r",
                                                                    "daysLeft = link.hub.RankInfo.MinTIR*365.25 - TIRdays\r",
                                                                    "\r",
                                                                    "if daysLeft > 0.0:\r",
                                                                    "    signal(link.MetMinTIR, props, delay(days = daysLeft))\r",
                                                                    "else:\r",
                                                                    "    link.MetMinTIR(props)\r",
                                                                    "        "
                                                                ]
                                                            },
                                                            "key": 1242,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "MinTIRDelay",
                                                                "outgoing_links": {
                                                                    "MetMinTIR": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1229,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1226,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 13.542800192312592,
                                                                    "y": -39.313536257975215
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "dict": [
                                                                    [
                                                                        "InRank",
                                                                        [
                                                                            0
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "InTraining",
                                                                        [
                                                                            0
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "Promotable",
                                                                        [
                                                                            0
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "Time",
                                                                        "gANdcQBjZGF0ZXRpbWUKZGF0ZXRpbWUKcQFDCgfjBgEJAAAAAABxAoVxA1JxBGEu"
                                                                    ],
                                                                    [
                                                                        "Releases",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "Promotions",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "Deployed",
                                                                        [
                                                                            0
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "Positions",
                                                                        [
                                                                            105
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "CTouts",
                                                                        []
                                                                    ]
                                                                ],
                                                                "display_order": "of_creation",
                                                                "pickled_keys": [
                                                                    "Time"
                                                                ]
                                                            },
                                                            "key": 1243,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "record",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -2.318244754210149,
                                                                    "y": -2.2214258111749743
                                                                },
                                                                "size": {
                                                                    "height": 5.803571428571428,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "data"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {
                                                                    "startup": 0
                                                                },
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "link.hub.record.InRank.append(link.hub.data.InRankCount)\r",
                                                                    "link.hub.record.InTraining.append(link.hub.data.InTrainingCount)\r",
                                                                    "link.hub.record.Promotable.append(link.hub.data.PromotableCount)\r",
                                                                    "link.hub.record.Deployed.append(link.hub.library.count_deployed())\r",
                                                                    "link.hub.record.Time.append(link.hub.datetime.date_time)\r",
                                                                    "link.hub.record.Positions.append(link.hub.RankInfo.Positions)\r",
                                                                    "\r",
                                                                    "link.hub.record.Releases.append(0)\r",
                                                                    "link.hub.record.CTouts.append(0)\r",
                                                                    "link.hub.record.Promotions.append(0)\r",
                                                                    "\r",
                                                                    "signal(self, (), delay(days = 30.44))"
                                                                ]
                                                            },
                                                            "key": 1244,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Record",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1226,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 9.0110398583115,
                                                                    "y": -14.067710898295612
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "script_lines": [
                                                                    "def configure():",
                                                                    "    axes = setup_axes(1, 1)",
                                                                    "\r",
                                                                    "    axes.set_xlabel('Time')",
                                                                    "    axes.set_ylabel('Population')",
                                                                    "",
                                                                    "    ",
                                                                    "",
                                                                    "def plot():\r",
                                                                    "    \r",
                                                                    "    lastTime = link.record.Time[-1]\r",
                                                                    "    ",
                                                                    "    axes.fill(link.record.Time + [lastTime], link.record.InRank + [0], 'grey', alpha = 0.5, label = 'In Rank')\r",
                                                                    "    axes.fill(link.record.Time + [lastTime], link.record.InTraining + [0], 'r', alpha = 0.3, label = 'In Training')\r",
                                                                    "    axes.fill(link.record.Time + [lastTime], link.record.Promotable + [0], 'b', alpha = 0.3, label = 'Promotable')\r",
                                                                    "    axes.fill(link.record.Time + [lastTime], link.record.Deployed + [0], 'black', alpha = 0.6, label = 'Deployed')",
                                                                    "    axes.plot(link.record.Time, link.record.Positions, 'k', linestyle = 'dashed', label = 'Positions', linewidth = 3)\r",
                                                                    "\r",
                                                                    "    handles, labels = axes.get_legend_handles_labels()\r",
                                                                    "    axes.legend(handles, labels, loc = 9, ncol = 3, bbox_to_anchor = (0.5, 1.12))",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1245,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "plot",
                                                                "outgoing_links": {
                                                                    "record": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1243,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 16.366223339152167,
                                                                    "y": 2.484834311425601
                                                                },
                                                                "size": {
                                                                    "height": 21.07142857142857,
                                                                    "scale_3d": 1.0,
                                                                    "width": 19.910714285714285
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "plot"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "positions, attrRate, minTIR, pushPromo, ctRate",
                                                                "roles_and_prioritizing": {
                                                                    "setup": 3
                                                                },
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "link.hub.RankInfo.Positions = positions\r",
                                                                    "link.hub.RankInfo.AttrRate = attrRate\r",
                                                                    "link.hub.RankInfo.MinTIR = minTIR\r",
                                                                    "link.hub.RankInfo.PushPromote = pushPromo\r",
                                                                    "link.hub.RankInfo.CTRate = ctRate\r",
                                                                    "\r",
                                                                    "link.hub.RankID.Name = link.hub._rank_.get_name()"
                                                                ]
                                                            },
                                                            "key": 1246,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Setup",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1226,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 3.2430370494555407,
                                                                    "y": -19.466952743026894
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1247,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "Release",
                                                                "outgoing_links": {
                                                                    "Release": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1199,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": 24.76369239017657,
                                                                                    "y": -14.441873145234322
                                                                                }
                                                                            }
                                                                        ]
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 41.33403873965582,
                                                                    "y": -63.389691111668604
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {
                                                                "children": [
                                                                    {
                                                                        "content": {
                                                                            "parameters": "props",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "ID = props['ID']\r",
                                                                                "props['IN_TRAINING'] = True\r",
                                                                                "\r",
                                                                                "#add to training list\r",
                                                                                "link.hub.Data.InTraining[ID] = props\r",
                                                                                "\r",
                                                                                "#go on waitlist\r",
                                                                                "link.hub.Data.Waitlist.append(ID)\r",
                                                                                "\r",
                                                                                "\r",
                                                                                "\r",
                                                                                "\r",
                                                                                "    \r",
                                                                                "    "
                                                                            ]
                                                                        },
                                                                        "key": 1249,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Arrive",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1252,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -16.694797152199428,
                                                                                "y": -34.31994988357029
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "dict": [
                                                                                [
                                                                                    "DurationDays",
                                                                                    30
                                                                                ],
                                                                                [
                                                                                    "MinSessionSize",
                                                                                    1
                                                                                ],
                                                                                [
                                                                                    "MaxSessionSize",
                                                                                    10
                                                                                ],
                                                                                [
                                                                                    "SuccessRate",
                                                                                    1
                                                                                ],
                                                                                [
                                                                                    "SessionSchedule",
                                                                                    "gANdcQAoSwNLD4ZxAUsJSw+GcQJlLg=="
                                                                                ]
                                                                            ],
                                                                            "display_order": "of_creation",
                                                                            "pickled_keys": [
                                                                                "SessionSchedule"
                                                                            ]
                                                                        },
                                                                        "key": 1250,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Input",
                                                                            "outgoing_links": {},
                                                                            "position": {
                                                                                "x": -14.664036274121262,
                                                                                "y": -0.76648840428639
                                                                            },
                                                                            "size": {
                                                                                "height": 6.5476190476190474,
                                                                                "scale_3d": 1.0,
                                                                                "width": 9.523809523809524
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "data"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "dict": [
                                                                                [
                                                                                    "InTraining",
                                                                                    {}
                                                                                ],
                                                                                [
                                                                                    "Waitlist",
                                                                                    []
                                                                                ],
                                                                                [
                                                                                    "Attendance",
                                                                                    []
                                                                                ],
                                                                                [
                                                                                    "StartDates",
                                                                                    []
                                                                                ],
                                                                                [
                                                                                    "SessionIdx",
                                                                                    0
                                                                                ]
                                                                            ],
                                                                            "display_order": "of_creation",
                                                                            "pickled_keys": []
                                                                        },
                                                                        "key": 1251,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Data",
                                                                            "outgoing_links": {},
                                                                            "position": {
                                                                                "x": -4.235163886363756,
                                                                                "y": -0.7590424824417763
                                                                            },
                                                                            "size": {
                                                                                "height": 6.607142857142857,
                                                                                "scale_3d": 1.0,
                                                                                "width": 8.660714285714285
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "data"
                                                                    },
                                                                    {
                                                                        "content": {},
                                                                        "key": 1252,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "hub",
                                                                            "outgoing_links": {
                                                                                "Data": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1251,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "Input": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1250,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "Record": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1258,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "datetime": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1256,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "library": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1261,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -1.135639561950389,
                                                                                "y": -13.488105952112994
                                                                            },
                                                                            "size": {
                                                                                "height": 1.5,
                                                                                "scale_3d": 1.0,
                                                                                "width": 1.5
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "hub"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {
                                                                                "reset": 0
                                                                            },
                                                                            "script_imports": {
                                                                                "datetime": [
                                                                                    "datetime",
                                                                                    "datetime"
                                                                                ]
                                                                            },
                                                                            "script_lines": [
                                                                                "link.hub.Data.InTraining = {}\r",
                                                                                "link.hub.Data.Waitlist = []\r",
                                                                                "link.hub.Data.Attendance = []\r",
                                                                                "link.hub.Data.StartDates = []\r",
                                                                                "link.hub.Data.SessionIdx = 0\r",
                                                                                "\r",
                                                                                "startDate = datetime(2019,6,1,9,0,0)\r",
                                                                                "link.hub.datetime.set_date_time(startDate)\r",
                                                                                "\r",
                                                                                "link.hub.Record.Waitlist = [0]\r",
                                                                                "link.hub.Record.Time = [startDate]\r",
                                                                                ""
                                                                            ]
                                                                        },
                                                                        "key": 1253,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Reset",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1252,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 9.448075269869122,
                                                                                "y": -13.073071682303503
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {},
                                                                        "key": 1254,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 1,
                                                                            "name": "TrainRequest",
                                                                            "outgoing_links": {
                                                                                "Arrive": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1249,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -20.800874878523683,
                                                                                "y": -36.48950085353416
                                                                            },
                                                                            "size": {
                                                                                "height": 0.5,
                                                                                "scale_3d": 1.0,
                                                                                "width": 0.5
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "node"
                                                                    },
                                                                    {
                                                                        "content": {},
                                                                        "key": 1255,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 1,
                                                                            "name": "SndTrainFinish",
                                                                            "outgoing_links": {
                                                                                "FinishTraining": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1228,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 27.97851400511773,
                                                                                "y": -36.629572966635514
                                                                            },
                                                                            "size": {
                                                                                "height": 0.5,
                                                                                "scale_3d": 1.0,
                                                                                "width": 0.5
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "node"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "date_time": {
                                                                                "day": 1,
                                                                                "hour": 9,
                                                                                "minute": 0,
                                                                                "month": 6,
                                                                                "second": 0,
                                                                                "year": 2019
                                                                            }
                                                                        },
                                                                        "key": 1256,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "datetime",
                                                                            "outgoing_links": {},
                                                                            "position": {
                                                                                "x": -11.68177009004484,
                                                                                "y": -11.093761528465397
                                                                            },
                                                                            "size": {
                                                                                "height": 3.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 6.2
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "datetime"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "script_lines": [
                                                                                "def configure():\r",
                                                                                "    axes = setup_axes(1, 1)",
                                                                                "\r",
                                                                                "    \r",
                                                                                "",
                                                                                "",
                                                                                "def plot():\r",
                                                                                "    \r",
                                                                                "    axes = setup_axes(1, 1)\r",
                                                                                "    axes.set_xlabel('Time (years)')\r",
                                                                                "    axes.set_ylabel('Number of people')\r",
                                                                                "    \r",
                                                                                "    #don't plot if data is empty\r",
                                                                                "    if len(link.hub.Record.Waitlist) <= 1:\r",
                                                                                "        return\r",
                                                                                "\r",
                                                                                "    #plot the waitlist\r",
                                                                                "    lastTime = link.hub.Record.Time[-1]\r",
                                                                                "    axes.fill(link.hub.Record.Time + [lastTime], link.hub.Record.Waitlist + [0], 'b', alpha = 0.3, label = 'Waitlist')",
                                                                                "    axes.figure.autofmt_xdate()\r",
                                                                                "    \r",
                                                                                "    \r",
                                                                                "    #plot the session attendance\r",
                                                                                "    height = link.hub.Data.Attendance\r",
                                                                                "    width = [link.hub.Input.DurationDays]*len(height)\r",
                                                                                "    left = link.hub.Data.StartDates\r",
                                                                                "    y_pos = [0]*len(height)\r",
                                                                                "    axes.barh(y_pos, width, height = height, left = left, color = 'green', alpha = 0.6, label = 'Session Attendance')\r",
                                                                                "    \r",
                                                                                "    #legend\r",
                                                                                "    handles, labels = axes.get_legend_handles_labels()\r",
                                                                                "    axes.legend(handles, labels, loc = 9, ncol = 3, bbox_to_anchor = (0.5, 1.12))"
                                                                            ]
                                                                        },
                                                                        "key": 1257,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Attendance",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1252,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 18.05520745979187,
                                                                                "y": -1.1322048215124676
                                                                            },
                                                                            "size": {
                                                                                "height": 16.2,
                                                                                "scale_3d": 1.0,
                                                                                "width": 15.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "plot"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "dict": [
                                                                                [
                                                                                    "Waitlist",
                                                                                    [
                                                                                        0
                                                                                    ]
                                                                                ],
                                                                                [
                                                                                    "Time",
                                                                                    "gANdcQBjZGF0ZXRpbWUKZGF0ZXRpbWUKcQFDCgfjBgEJAAAAAABxAoVxA1JxBGEu"
                                                                                ]
                                                                            ],
                                                                            "display_order": "of_creation",
                                                                            "pickled_keys": [
                                                                                "Time"
                                                                            ]
                                                                        },
                                                                        "key": 1258,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Record",
                                                                            "outgoing_links": {},
                                                                            "position": {
                                                                                "x": 5.519563999613053,
                                                                                "y": -0.7859267560572475
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "data"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {
                                                                                "startup": 0
                                                                            },
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "link.hub.Record.Waitlist.append(len(link.hub.Data.Waitlist))\r",
                                                                                "link.hub.Record.Time.append(link.hub.datetime.date_time)\r",
                                                                                "\r",
                                                                                "signal(self, (), delay(days = 7))"
                                                                            ]
                                                                        },
                                                                        "key": 1259,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Record",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1252,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 9.55578961375507,
                                                                                "y": -7.625327065521719
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "duration, minSessionSize, maxSessionSize, successRate, sessionSchedule",
                                                                            "roles_and_prioritizing": {
                                                                                "setup": 3
                                                                            },
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "link.hub.Input.DurationDays = duration\r",
                                                                                "link.hub.Input.MinSessionSize = minSessionSize\r",
                                                                                "link.hub.Input.MaxSessionSize = maxSessionSize\r",
                                                                                "link.hub.Input.SuccessRate = successRate\r",
                                                                                "link.hub.Input.SessionSchedule = sessionSchedule"
                                                                            ]
                                                                        },
                                                                        "key": 1260,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Setup",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1252,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 9.417960966070991,
                                                                                "y": -18.46107648244264
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "script_imports": {
                                                                                "datetime": [
                                                                                    "datetime",
                                                                                    "datetime"
                                                                                ]
                                                                            },
                                                                            "script_lines": [
                                                                                "def get_waitlist():\r",
                                                                                "    inTrng = link.hub.Data.InTraining\r",
                                                                                "    return [id for id in link.hub.Data.Waitlist\r",
                                                                                "        if inTrng[id]['RELEASED']]\r",
                                                                                "        \r",
                                                                                "\r",
                                                                                "\r",
                                                                                "def get_trainable_on_waitlist():\r",
                                                                                "    inTrng = link.hub.Data.InTraining\r",
                                                                                "    return [id for id in link.hub.Data.Waitlist\r",
                                                                                "        if not inTrng[id]['RESERVED']\r",
                                                                                "        and not inTrng[id]['DEPLOYED']\r",
                                                                                "        and not inTrng[id]['RELEASED']]\r",
                                                                                "    \r",
                                                                                "def count_trainable_on_waitlist():\r",
                                                                                "    return len(get_trainable_on_waitlist())\r",
                                                                                "    \r",
                                                                                "    \r",
                                                                                "def get_start_session_idx():\r",
                                                                                "    #assumes session schedule is in order\r",
                                                                                "    #returns the index of the first session based on the current datetime\r",
                                                                                "    \r",
                                                                                "    year = link.hub.datetime.year\r",
                                                                                "    \r",
                                                                                "    startDates = [datetime(year, m, d, 8, 0, 0) for m,d in link.hub.Input.SessionSchedule]\r",
                                                                                "    \r",
                                                                                "    delays = [(t - link.hub.datetime.get_date_time()).total_seconds() for t in startDates]\r",
                                                                                "    \r",
                                                                                "    #return the smallest positive delay\r",
                                                                                "    for i in range(len(delays)):\r",
                                                                                "        if delays[i] > 0:\r",
                                                                                "            return i\r",
                                                                                "   \r",
                                                                                "    #if no more sessions this year, return first session for next year\r",
                                                                                "    return 0\r",
                                                                                "    "
                                                                            ]
                                                                        },
                                                                        "key": 1261,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "library",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1252,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -11.156992490107825,
                                                                                "y": -15.437735791363107
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "library"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {
                                                                                "startup": 0
                                                                            },
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "link.hub.Data.SessionIdx = link.hub.library.get_start_session_idx()\r",
                                                                                "\r",
                                                                                "link.DelayToSessionStart()\r",
                                                                                "\r",
                                                                                "\r",
                                                                                ""
                                                                            ]
                                                                        },
                                                                        "key": 1262,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "GetFirstSession",
                                                                            "outgoing_links": {
                                                                                "DelayToSessionStart": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1263,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1252,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -6.831928977706746,
                                                                                "y": -34.44116769677284
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "nextYr = False",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {
                                                                                "datetime": [
                                                                                    "datetime",
                                                                                    "datetime"
                                                                                ]
                                                                            },
                                                                            "script_lines": [
                                                                                "session = link.hub.Input.SessionSchedule[link.hub.Data.SessionIdx]\r",
                                                                                "\r",
                                                                                "year = link.hub.datetime.year\r",
                                                                                "month = session[0]\r",
                                                                                "day = session[1]\r",
                                                                                "\r",
                                                                                "delayDays = (datetime(year, month, day, 8, 0, 0) - link.hub.datetime.date_time).total_seconds()/86400.0\r",
                                                                                "\r",
                                                                                "if delayDays < 0.0 or nextYr:\r",
                                                                                "    delayDays = (datetime(year + 1, month, day, 8, 0, 0) - link.hub.datetime.date_time).total_seconds()/86400.0\r",
                                                                                "\r",
                                                                                "signal(link.StartSession, (), delay(days = delayDays))\r",
                                                                                ""
                                                                            ]
                                                                        },
                                                                        "key": 1263,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "DelayToSessionStart",
                                                                            "outgoing_links": {
                                                                                "StartSession": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1264,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1252,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 1.5855408583978676,
                                                                                "y": -34.353601749967424
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "input = link.hub.Input\r",
                                                                                "data = link.hub.Data\r",
                                                                                "\r",
                                                                                "#get the list of potential session starts, up to max session size\r",
                                                                                "sessionList = link.hub.library.get_trainable_on_waitlist()[:input.MaxSessionSize]\r",
                                                                                "\r",
                                                                                "#if at least have the min session size\r",
                                                                                "if len(sessionList) >= input.MinSessionSize:\r",
                                                                                "    \r",
                                                                                "    #remove ids from waitlist and set status to attending training\r",
                                                                                "    for id in sessionList:\r",
                                                                                "        data.Waitlist.remove(id)\r",
                                                                                "        data.InTraining[id]['ATTENDING_TRNG'] = True\r",
                                                                                "    \r",
                                                                                "    #track attendance and start date\r",
                                                                                "    data.Attendance.append(len(sessionList))\r",
                                                                                "    data.StartDates.append(link.hub.datetime.date_time)\r",
                                                                                "    \r",
                                                                                "    #signal to finish the course after course duration\r",
                                                                                "    signal(link.Finish, sessionList, delay(days = input.DurationDays))\r",
                                                                                "\r",
                                                                                "#else record zero-loaded session\r",
                                                                                "else:\r",
                                                                                "    data.Attendance.append(0)\r",
                                                                                "    data.StartDates.append(link.hub.datetime.date_time)\r",
                                                                                "    \r",
                                                                                "#setup next session\r",
                                                                                "link.NextSession()"
                                                                            ]
                                                                        },
                                                                        "key": 1264,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "StartSession",
                                                                            "outgoing_links": {
                                                                                "Finish": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1265,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "NextSession": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1266,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1252,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 10.16430095764344,
                                                                                "y": -34.388760602833166
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "sessionList",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "input = link.hub.Input\r",
                                                                                "data = link.hub.Data\r",
                                                                                "#for each session attendee\r",
                                                                                "for ID in sessionList:\r",
                                                                                "    \r",
                                                                                "    if ID in data.InTraining:\r",
                                                                                "    \r",
                                                                                "        #update properties\r",
                                                                                "        props = data.InTraining[ID]\r",
                                                                                "        props['ATTENDING_TRNG'] = False\r",
                                                                                "        props['IN_TRAINING'] = False\r",
                                                                                "        props['TRAINING_COMPLETED'] = True\r",
                                                                                "\r",
                                                                                "        #if pass\r",
                                                                                "        if random.random() < input.SuccessRate:\r",
                                                                                "            result = 'P'\r",
                                                                                "        #else fail\r",
                                                                                "        else:\r",
                                                                                "            result = 'F'\r",
                                                                                "            props['TRAINING_FAILED'] = True\r",
                                                                                "                 \r",
                                                                                "        #remove\r",
                                                                                "        del data.InTraining[ID]\r",
                                                                                "\r",
                                                                                "        link.SndTrainFinish(props, result)"
                                                                            ]
                                                                        },
                                                                        "key": 1265,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Finish",
                                                                            "outgoing_links": {
                                                                                "SndTrainFinish": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1255,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1252,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 18.44440284604379,
                                                                                "y": -34.377498855660235
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "#go to next session\r",
                                                                                "link.hub.Data.SessionIdx += 1\r",
                                                                                "\r",
                                                                                "if link.hub.Data.SessionIdx < len(link.hub.Input.SessionSchedule):\r",
                                                                                "    link.DelayToSessionStart(nextYr = False)\r",
                                                                                "    \r",
                                                                                "else:\r",
                                                                                "    link.hub.Data.SessionIdx = 0\r",
                                                                                "    link.DelayToSessionStart(nextYr = True)"
                                                                            ]
                                                                        },
                                                                        "key": 1266,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "NextSession",
                                                                            "outgoing_links": {
                                                                                "DelayToSessionStart": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1263,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1252,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 5.983814681569553,
                                                                                "y": -42.51810526522001
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {},
                                                                        "key": 1267,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 1,
                                                                            "name": "StopTraining",
                                                                            "outgoing_links": {
                                                                                "Release": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1268,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -21.034880837044263,
                                                                                "y": -46.91947031151817
                                                                            },
                                                                            "size": {
                                                                                "height": 0.5,
                                                                                "scale_3d": 1.0,
                                                                                "width": 0.5
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "node"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "ID",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "if ID in link.hub.Data.InTraining:\r",
                                                                                "    del link.hub.Data.InTraining[ID]\r",
                                                                                "    \r",
                                                                                "if ID in link.hub.Data.Waitlist:\r",
                                                                                "    link.hub.Data.Waitlist.remove(ID)"
                                                                            ]
                                                                        },
                                                                        "key": 1268,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "StopTraining",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1252,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -16.869280390907246,
                                                                                "y": -44.82919111941537
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "print(link.library.get_waitlist())"
                                                                            ]
                                                                        },
                                                                        "key": 1269,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "function",
                                                                            "outgoing_links": {
                                                                                "library": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1261,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -9.936127294350463,
                                                                                "y": -23.705182031625434
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    }
                                                                ],
                                                                "ifx_ports_left": [
                                                                    1254,
                                                                    1267
                                                                ],
                                                                "ifx_ports_right": [
                                                                    1255
                                                                ],
                                                                "image_id": null,
                                                                "proxy_position": {
                                                                    "x": -0.6806719555009858,
                                                                    "y": 1.7989187395383204
                                                                },
                                                                "rotation_2d": 0.0,
                                                                "rotation_3d": {
                                                                    "pitch": 0.0,
                                                                    "roll": 0.0,
                                                                    "yaw": 0.0
                                                                }
                                                            },
                                                            "key": 1248,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Training",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -8.874374904552498,
                                                                    "y": -39.957315946695566
                                                                },
                                                                "size": {
                                                                    "height": 3.392857142857143,
                                                                    "scale_3d": 1.0,
                                                                    "width": 6.398809523809524
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "actor"
                                                        },
                                                        {
                                                            "content": {
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "def count_deployed():\r",
                                                                    "    \r",
                                                                    "    inRank = link.hub.data.InRank\r",
                                                                    "\r",
                                                                    "    return len([id for id in inRank if inRank[id]['DEPLOYED']])\r",
                                                                    "    \r",
                                                                    "    "
                                                                ]
                                                            },
                                                            "key": 1270,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "library",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1226,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 3.2885695338145924,
                                                                    "y": -24.435898619316763
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "library"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "num = 1200\r",
                                                                    "print('In rank', sum(link.record.InRank[-num:])/num)\r",
                                                                    "print('Promotable', sum(link.record.Promotable[-num:])/num)\r",
                                                                    "print('Promos per yr', sum(link.record.Promotions[-num:])/len(link.record.Promotions[-num:])*12)\r",
                                                                    "print('Releases per yr', sum(link.record.Releases[-num:])/len(link.record.Releases[-num:])*12)\r",
                                                                    "print('CTs out per yr', sum(link.record.CTouts[-num:])/len(link.record.CTouts[-num:])*12)\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1271,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "PrintSummary",
                                                                "outgoing_links": {
                                                                    "record": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1243,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 4.876750797335997,
                                                                    "y": 8.519222745922649
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {
                                                                    "finish": 0
                                                                },
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "rank = ''.join(filter(str.isalnum, link.hub.RankID.Name))\r",
                                                                    "cadre = link.hub.RankID.Cadre\r",
                                                                    "key = cadre + '_' + rank\r",
                                                                    "\r",
                                                                    "save = {}\r",
                                                                    "save[key + '_InRank'] = link.hub.record.InRank\r",
                                                                    "save[key + '_InTraining'] = link.hub.record.InTraining\r",
                                                                    "save[key + '_Deployed'] = link.hub.record.Deployed\r",
                                                                    "save[key + '_Promotable'] = link.hub.record.Promotable\r",
                                                                    "\r",
                                                                    "batch.set_replication_data(**save)"
                                                                ]
                                                            },
                                                            "key": 1272,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Finish",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1226,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 9.23936895472022,
                                                                    "y": -19.551756559137125
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        }
                                                    ],
                                                    "ifx_ports_left": [
                                                        1237,
                                                        1238,
                                                        1234
                                                    ],
                                                    "ifx_ports_right": [
                                                        1233,
                                                        1236,
                                                        1235,
                                                        1247
                                                    ],
                                                    "image_id": null,
                                                    "proxy_position": {
                                                        "x": -4.762093403985616,
                                                        "y": 3.5569417058638875
                                                    },
                                                    "rotation_2d": 0.0,
                                                    "rotation_3d": {
                                                        "pitch": 0.0,
                                                        "roll": 0.0,
                                                        "yaw": 0.0
                                                    }
                                                },
                                                "key": 1219,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "Maj",
                                                    "outgoing_links": {},
                                                    "position": {
                                                        "x": 14.339095251260998,
                                                        "y": -7.22316501579177
                                                    },
                                                    "size": {
                                                        "height": 5.595238095238095,
                                                        "scale_3d": 1.0,
                                                        "width": 6.19047619047619
                                                    },
                                                    "visible": true
                                                },
                                                "type": "actor"
                                            },
                                            {
                                                "content": {
                                                    "children": [
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#if part of initial pop, send to initial pop function\r",
                                                                    "if 'INSERT' in props:\r",
                                                                    "        link.Insert(props)\r",
                                                                    "        return\r",
                                                                    "\r",
                                                                    "#get id\r",
                                                                    "ID = props['ID']\r",
                                                                    "\r",
                                                                    "#update props\r",
                                                                    "props['RANK'] = link.hub.RankID.Name\r",
                                                                    "props['OCC'] = link.hub.RankID.Occupation\r",
                                                                    "props['CADRE'] = link.hub.RankID.Cadre\r",
                                                                    "props['DOP'] = link.hub.datetime.date_time\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "#add to in-rank\r",
                                                                    "link.hub.data.InRank[ID] = props\r",
                                                                    "link.hub.data.InRankCount += 1\r",
                                                                    "\r",
                                                                    "#delay before start training (if needed)\r",
                                                                    "dbt = link.hub.RankInfo.DelayBeforeTraining\r",
                                                                    "if dbt > 0:\r",
                                                                    "    signal(link.StartTraining, props, delay(days = dbt))\r",
                                                                    "else:\r",
                                                                    "    link.StartTraining(props)\r",
                                                                    "\r",
                                                                    "#setup attrition\r",
                                                                    "link.SetupAttrition(props)\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1274,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "EnterRank",
                                                                "outgoing_links": {
                                                                    "Insert": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1295,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "SetupAttrition": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1294,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "StartTraining": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1281,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1280,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -30.012218907185066,
                                                                    "y": -39.795841039640734
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "dict": [
                                                                    [
                                                                        "Positions",
                                                                        45
                                                                    ],
                                                                    [
                                                                        "MinTIR",
                                                                        3
                                                                    ],
                                                                    [
                                                                        "MaxTIR",
                                                                        1000
                                                                    ],
                                                                    [
                                                                        "DelayBeforeTraining",
                                                                        0
                                                                    ],
                                                                    [
                                                                        "ReleaseIfFail",
                                                                        true
                                                                    ],
                                                                    [
                                                                        "PushPromote",
                                                                        false
                                                                    ],
                                                                    [
                                                                        "AttrRate",
                                                                        0.06
                                                                    ],
                                                                    [
                                                                        "MaxAge",
                                                                        1000
                                                                    ],
                                                                    [
                                                                        "DeployRatio",
                                                                        0.143
                                                                    ],
                                                                    [
                                                                        "CTRate",
                                                                        0.02
                                                                    ]
                                                                ],
                                                                "display_order": "of_creation",
                                                                "pickled_keys": []
                                                            },
                                                            "key": 1275,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "RankInfo",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -24.690955916045823,
                                                                    "y": -0.8998517282035177
                                                                },
                                                                "size": {
                                                                    "height": 10.178571428571429,
                                                                    "scale_3d": 1.0,
                                                                    "width": 6.875
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "data"
                                                        },
                                                        {
                                                            "content": {
                                                                "dict": [
                                                                    [
                                                                        "InRank",
                                                                        {}
                                                                    ],
                                                                    [
                                                                        "InTraining",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "Promotable",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "Deployed",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "InRankCount",
                                                                        0
                                                                    ],
                                                                    [
                                                                        "InTrainingCount",
                                                                        0
                                                                    ],
                                                                    [
                                                                        "PromotableCount",
                                                                        0
                                                                    ],
                                                                    [
                                                                        "DeployedCount",
                                                                        0
                                                                    ]
                                                                ],
                                                                "display_order": "of_creation",
                                                                "pickled_keys": []
                                                            },
                                                            "key": 1276,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "data",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -15.753892763598326,
                                                                    "y": -2.1163262518204564
                                                                },
                                                                "size": {
                                                                    "height": 9.375,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "data"
                                                        },
                                                        {
                                                            "content": {
                                                                "dict": [
                                                                    [
                                                                        "Name",
                                                                        "LCol"
                                                                    ],
                                                                    [
                                                                        "Occupation",
                                                                        "NWO"
                                                                    ],
                                                                    [
                                                                        "Cadre",
                                                                        "RegF"
                                                                    ]
                                                                ],
                                                                "display_order": "of_creation",
                                                                "pickled_keys": []
                                                            },
                                                            "key": 1277,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "RankID",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -27.50527447254697,
                                                                    "y": -12.681312051278057
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "data"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {
                                                                    "reset": 0
                                                                },
                                                                "script_imports": {
                                                                    "datetime": [
                                                                        "datetime",
                                                                        "datetime"
                                                                    ]
                                                                },
                                                                "script_lines": [
                                                                    "\r",
                                                                    "link.hub.data.InRank = {}\r",
                                                                    "link.hub.data.InTraining = []\r",
                                                                    "link.hub.data.Promotable = []\r",
                                                                    "link.hub.data.Deployed = []\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "link.hub.data.InRankCount = 0\r",
                                                                    "link.hub.data.InTrainingCount = 0\r",
                                                                    "link.hub.data.PromotableCount = 0\r",
                                                                    "link.hub.data.DeployedCount = 0\r",
                                                                    "\r",
                                                                    "startDate = datetime(2019,6,1,9,0,0)\r",
                                                                    "link.hub.datetime.set_date_time(startDate)\r",
                                                                    "\r",
                                                                    "link.hub.record.InRank = [0]\r",
                                                                    "link.hub.record.InTraining = [0]\r",
                                                                    "link.hub.record.Promotable = [0]\r",
                                                                    "link.hub.record.Deployed = [0]\r",
                                                                    "link.hub.record.Time = [startDate]\r",
                                                                    "link.hub.record.Releases = []\r",
                                                                    "link.hub.record.CTouts = []\r",
                                                                    "link.hub.record.Promotions = []\r",
                                                                    "link.hub.record.Positions = [link.hub.RankInfo.Positions]\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1278,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Reset",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1280,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 3.3173287652768817,
                                                                    "y": -13.986227580374978
                                                                },
                                                                "size": {
                                                                    "height": 6.011904761904762,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "date_time": {
                                                                    "day": 1,
                                                                    "hour": 9,
                                                                    "minute": 0,
                                                                    "month": 6,
                                                                    "second": 0,
                                                                    "year": 2019
                                                                }
                                                            },
                                                            "key": 1279,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "datetime",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": 2.3615869633262303,
                                                                    "y": -9.033337372290976
                                                                },
                                                                "size": {
                                                                    "height": 3.988095238095238,
                                                                    "scale_3d": 1.0,
                                                                    "width": 6.19047619047619
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "datetime"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1280,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "hub",
                                                                "outgoing_links": {
                                                                    "RankID": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1277,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "RankInfo": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1275,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "data": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1276,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "datetime": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1279,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "library": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1324,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "rank": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1273,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "record": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1297,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -7.750112694994645,
                                                                    "y": -18.00391297376486
                                                                },
                                                                "size": {
                                                                    "height": 1.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 1.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "hub"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "if props['ID'] not in link.hub.data.InRank: return\r",
                                                                    "\r",
                                                                    "link.hub.data.InTraining.append(props['ID'])\r",
                                                                    "link.hub.data.InTrainingCount += 1\r",
                                                                    "\r",
                                                                    "link.TrainRequest(props)"
                                                                ]
                                                            },
                                                            "key": 1281,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "StartTraining",
                                                                "outgoing_links": {
                                                                    "TrainRequest": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1308,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1280,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -20.026080654978394,
                                                                    "y": -39.697656269064375
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props, result",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "if props['ID'] not in link.hub.data.InRank: return\r",
                                                                    "\r",
                                                                    "link.hub.data.InTraining.remove(props['ID'])\r",
                                                                    "link.hub.data.InTrainingCount -= 1\r",
                                                                    "\r",
                                                                    "#if fail\r",
                                                                    "if result == 'F':\r",
                                                                    "    \r",
                                                                    "    #immediate release\r",
                                                                    "    if link.hub.RankInfo.ReleaseIfFail:\r",
                                                                    "        link.RemoveMember(props, 'failed')\r",
                                                                    "        \r",
                                                                    "    #or stay in rank until release\r",
                                                                    "\r",
                                                                    "#else pass\r",
                                                                    "else:\r",
                                                                    "    link.MinTIRDelay(props)\r",
                                                                    "        \r",
                                                                    "        \r",
                                                                    "        \r",
                                                                    "    \r",
                                                                    "    \r",
                                                                    "    \r",
                                                                    "    \r",
                                                                    "\r",
                                                                    "    "
                                                                ]
                                                            },
                                                            "key": 1282,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "FinishTraining",
                                                                "outgoing_links": {
                                                                    "MinTIRDelay": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1296,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "RemoveMember": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1293,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1280,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 5.515274902002796,
                                                                    "y": -39.49022853059453
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "if props['ID'] not in link.hub.data.InRank: return\r",
                                                                    "\r",
                                                                    "#if there is no next rank, do nothing\r",
                                                                    "if link.SndReq is None: return\r",
                                                                    "\r",
                                                                    "#add to promo list if not already there (might already be there in obscure cases)\r",
                                                                    "if props['ID'] not in link.hub.data.Promotable:\r",
                                                                    "    link.hub.data.Promotable.append(props['ID'])\r",
                                                                    "    link.hub.data.PromotableCount += 1\r",
                                                                    "\r",
                                                                    "#if push promote\r",
                                                                    "if link.hub.RankInfo.PushPromote:\r",
                                                                    "    link.Promote(props)\r",
                                                                    "\r",
                                                                    "#else request promotion\r",
                                                                    "else:\r",
                                                                    "    link.SndReq()\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1283,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "MetMinTIR",
                                                                "outgoing_links": {
                                                                    "Promote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1284,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "SndReq": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1290,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1280,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 21.676515289907346,
                                                                    "y": -39.3404021116089
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#promote to next rank\r",
                                                                    "link.PromoteOut(props)\r",
                                                                    "\r",
                                                                    "#remove from current rank\r",
                                                                    "link.RemoveMember(props, 'promoted')\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1284,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Promote",
                                                                "outgoing_links": {
                                                                    "PromoteOut": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1287,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "RemoveMember": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1293,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1280,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 30.26797020714654,
                                                                    "y": -39.30186888370791
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "nextRankPositions, nextRankCount",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "data = link.hub.data\r",
                                                                    "info = link.hub.RankInfo\r",
                                                                    "\r",
                                                                    "#maximum possible promotions\r",
                                                                    "maxPromos = min(data.PromotableCount, nextRankPositions - nextRankCount)\r",
                                                                    "\r",
                                                                    "#promotions to balance strength\r",
                                                                    "s0 = data.InRankCount\r",
                                                                    "s1 = nextRankCount\r",
                                                                    "p0 = info.Positions\r",
                                                                    "p1 = nextRankPositions\r",
                                                                    "balancePromos = (s0*p1 - s1*p0)/(p0 + p1)\r",
                                                                    "\r",
                                                                    "#adjust number of promos stochastically\r",
                                                                    "balancePromos_ = math.floor(balancePromos)\r",
                                                                    "frac = balancePromos - balancePromos_\r",
                                                                    "if random.random() > frac:\r",
                                                                    "    balancePromos = balancePromos_\r",
                                                                    "else:\r",
                                                                    "    balancePromos = balancePromos_ + 1\r",
                                                                    "\r",
                                                                    "#determine final number of promos\r",
                                                                    "numPromos = min(maxPromos, balancePromos)\r",
                                                                    "\r",
                                                                    "if numPromos <= 0: return\r",
                                                                    "\r",
                                                                    "promoteIDs = random.sample(link.hub.data.Promotable, numPromos)\r",
                                                                    "\r",
                                                                    "for ID in promoteIDs:\r",
                                                                    "    link.Promote(link.hub.data.InRank[ID])\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1285,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "PromoteInvite",
                                                                "outgoing_links": {
                                                                    "Promote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1284,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1280,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 30.236943946864095,
                                                                    "y": -54.94925517566933
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#if nothing below this rank, don't invite a promotion\r",
                                                                    "if link.InvitePromote is None: return\r",
                                                                    "\r",
                                                                    "# if there is room in the rank\r",
                                                                    "if link.hub.data.InRankCount < link.hub.RankInfo.Positions:\r",
                                                                    "\r",
                                                                    "    #send the number of positions and current in-rank count\r",
                                                                    "    link.InvitePromote(link.hub.RankInfo.Positions, link.hub.data.InRankCount)"
                                                                ]
                                                            },
                                                            "key": 1286,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "InvitePromote",
                                                                "outgoing_links": {
                                                                    "InvitePromote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1288,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1280,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -30.008885903158987,
                                                                    "y": -54.932325409304234
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1287,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "SndPromo",
                                                                "outgoing_links": {
                                                                    "Enter": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1345,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 40.81257151160083,
                                                                    "y": -41.4195199794459
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1288,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "SndInvite",
                                                                "outgoing_links": {
                                                                    "Invite": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1235,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -37.22325753644102,
                                                                    "y": -57.04376020783337
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1289,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "Invite",
                                                                "outgoing_links": {
                                                                    "PromoteInvite": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1285,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 41.1022611870765,
                                                                    "y": -57.271274325502496
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1290,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "SndReq",
                                                                "outgoing_links": {
                                                                    "Request": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1346,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 40.58019488696916,
                                                                    "y": -49.98849280979479
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1291,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "Enter",
                                                                "outgoing_links": {
                                                                    "EnterRank": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1274,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -37.04218246881857,
                                                                    "y": -42.01569816569041
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1292,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "Request",
                                                                "outgoing_links": {
                                                                    "InvitePromote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1286,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -36.98495220560267,
                                                                    "y": -49.363009874348336
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props, lossType",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "ID = props['ID']\r",
                                                                    "\r",
                                                                    "#remove from all member lists\r",
                                                                    "if ID in link.hub.data.InTraining:\r",
                                                                    "    link.hub.data.InTraining.remove(ID)\r",
                                                                    "    link.hub.data.InTrainingCount -= 1\r",
                                                                    "    \r",
                                                                    "\r",
                                                                    "if ID in link.hub.data.Promotable:\r",
                                                                    "    link.hub.data.Promotable.remove(ID)\r",
                                                                    "    link.hub.data.PromotableCount -= 1\r",
                                                                    "\r",
                                                                    "if ID in link.hub.data.InRank:\r",
                                                                    "    del link.hub.data.InRank[ID]\r",
                                                                    "    link.hub.data.InRankCount -= 1\r",
                                                                    "    \r",
                                                                    "    #record release\r",
                                                                    "    if lossType == 'released':\r",
                                                                    "        props['RELEASED'] = True\r",
                                                                    "        link.hub.record.Releases[-1] += 1\r",
                                                                    "        link.Release(props)\r",
                                                                    "        link.StopTraining(ID)\r",
                                                                    "    \r",
                                                                    "    #record CT\r",
                                                                    "    elif lossType == 'CT':\r",
                                                                    "        props['CT'] = True\r",
                                                                    "        props['DOP'] = link.hub.datetime.date_time  #override promotion time\r",
                                                                    "        link.hub.record.CTouts[-1] += 1\r",
                                                                    "        link.Release(props)\r",
                                                                    "        link.StopTraining(ID)\r",
                                                                    "        \r",
                                                                    "    \r",
                                                                    "    #record promotion\r",
                                                                    "    elif lossType == 'promoted':\r",
                                                                    "        link.hub.record.Promotions[-1] += 1\r",
                                                                    "    \r",
                                                                    "    #invite promotion\r",
                                                                    "    link.InvitePromote()\r",
                                                                    "    \r",
                                                                    "\r",
                                                                    "    \r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1293,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "RemoveMember",
                                                                "outgoing_links": {
                                                                    "InvitePromote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1286,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "Release": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1301,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": 32.34392154184954,
                                                                                    "y": -63.223816325109745
                                                                                }
                                                                            }
                                                                        ]
                                                                    },
                                                                    "StopTraining": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1321,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": -11.890454134805578,
                                                                                    "y": -46.83253535228758
                                                                                }
                                                                            },
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": -11.858746257112767,
                                                                                    "y": -43.72516333839172
                                                                                }
                                                                            }
                                                                        ]
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1280,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 5.817043142888761,
                                                                    "y": -54.71431714204966
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#MaxAge\r",
                                                                    "ageDays = (link.hub.datetime.date_time - props['DOB']).days\r",
                                                                    "maxAgeDaysLeft = link.hub.RankInfo.MaxAge*365 - ageDays\r",
                                                                    "\r",
                                                                    "#Max TIR\r",
                                                                    "TIRDays = (link.hub.datetime.date_time - props['DOP']).days\r",
                                                                    "maxTIRDaysLeft = link.hub.RankInfo.MaxTIR*365 - TIRDays\r",
                                                                    "\r",
                                                                    "#voluntary release (based on attrition rate)\r",
                                                                    "alpha = -math.log(1.0 - link.hub.RankInfo.AttrRate)\r",
                                                                    "volDaysLeft = random.expovariate(alpha)*365\r",
                                                                    "\r",
                                                                    "#CT release (based on CT rate)\r",
                                                                    "alpha = -math.log(1.0 - link.hub.RankInfo.CTRate)\r",
                                                                    "ctDaysLeft = random.expovariate(alpha)*365\r",
                                                                    "\r",
                                                                    "#note, need to label CT releases\r",
                                                                    "\r",
                                                                    "#schedule release\r",
                                                                    "days = min(maxAgeDaysLeft, maxTIRDaysLeft, volDaysLeft, ctDaysLeft)\r",
                                                                    "\r",
                                                                    "#label the loss type\r",
                                                                    "lossType = 'released'\r",
                                                                    "if days == ctDaysLeft:\r",
                                                                    "    lossType = 'CT'\r",
                                                                    "\r",
                                                                    "signal(link.RemoveMember, (props, lossType), delay(days = days))"
                                                                ]
                                                            },
                                                            "key": 1294,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "SetupAttrition",
                                                                "outgoing_links": {
                                                                    "RemoveMember": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1293,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1280,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -20.00560338611418,
                                                                    "y": -46.629645698637454
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#insert member into model (used for initial pop and CTs)\r",
                                                                    "\r",
                                                                    "#if member not in this rank, send to next rank (if next rank exists)\r",
                                                                    "if props['RANK'] != link.hub.RankID.Name:\r",
                                                                    "    if link.SndPromo is not None:\r",
                                                                    "        #log.warning(\"Rank: %s, Member rank: %s, Member ID: %s\" % (link.hub.RankID.Name, props['RANK'], props['ID']))\r",
                                                                    "        link.SndPromo(props)\r",
                                                                    "    else:\r",
                                                                    "        log.warning(\"Input member's rank not found in model.\")\r",
                                                                    "    return\r",
                                                                    "\r",
                                                                    "#log.warning(\"member %s enter %s\" % (props['ID'], link.hub.RankID.Name))\r",
                                                                    "\r",
                                                                    "#cancel insert flag\r",
                                                                    "if 'INSERT' in props:\r",
                                                                    "    del props['INSERT']\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "#get id\r",
                                                                    "ID = props['ID']\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "#update props (not all usual props are updated for initial pop)\r",
                                                                    "props['OCC'] = link.hub.RankID.Occupation\r",
                                                                    "props['CADRE'] = link.hub.RankID.Cadre\r",
                                                                    "\r",
                                                                    "#add to in-rank\r",
                                                                    "link.hub.data.InRank[ID] = props\r",
                                                                    "link.hub.data.InRankCount += 1\r",
                                                                    "\r",
                                                                    "#insert at Min-TIR delay step\r",
                                                                    "link.MinTIRDelay(props)\r",
                                                                    "\r",
                                                                    "#setup attrition\r",
                                                                    "link.SetupAttrition(props)\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1295,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Insert",
                                                                "outgoing_links": {
                                                                    "MinTIRDelay": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1296,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": 13.558717964465075,
                                                                                    "y": -31.554183083148093
                                                                                }
                                                                            }
                                                                        ]
                                                                    },
                                                                    "SetupAttrition": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1294,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "SndPromo": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1287,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": 31.94937653742584,
                                                                                    "y": -28.477348338185028
                                                                                }
                                                                            }
                                                                        ]
                                                                    },
                                                                    "StartTraining": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1281,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1280,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -29.989434128890377,
                                                                    "y": -29.305548588756988
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#if member entered this rank as initial pop, cancel the flag here\r",
                                                                    "#(no more treatment as initial_pop once processed through initial rank)\r",
                                                                    "if 'INSERT' in props:\r",
                                                                    "    del props['INSERT']\r",
                                                                    "\r",
                                                                    "#delay to Min TIR (if required)\r",
                                                                    "TIRdays = (link.hub.datetime.date_time - props['DOP']).days\r",
                                                                    "daysLeft = link.hub.RankInfo.MinTIR*365.25 - TIRdays\r",
                                                                    "\r",
                                                                    "if daysLeft > 0.0:\r",
                                                                    "    signal(link.MetMinTIR, props, delay(days = daysLeft))\r",
                                                                    "else:\r",
                                                                    "    link.MetMinTIR(props)\r",
                                                                    "        "
                                                                ]
                                                            },
                                                            "key": 1296,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "MinTIRDelay",
                                                                "outgoing_links": {
                                                                    "MetMinTIR": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1283,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1280,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 13.542800192312592,
                                                                    "y": -39.313536257975215
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "dict": [
                                                                    [
                                                                        "InRank",
                                                                        [
                                                                            0
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "InTraining",
                                                                        [
                                                                            0
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "Promotable",
                                                                        [
                                                                            0
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "Time",
                                                                        "gANdcQBjZGF0ZXRpbWUKZGF0ZXRpbWUKcQFDCgfjBgEJAAAAAABxAoVxA1JxBGEu"
                                                                    ],
                                                                    [
                                                                        "Releases",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "Promotions",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "Deployed",
                                                                        [
                                                                            0
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "Positions",
                                                                        [
                                                                            45
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "CTouts",
                                                                        []
                                                                    ]
                                                                ],
                                                                "display_order": "of_creation",
                                                                "pickled_keys": [
                                                                    "Time"
                                                                ]
                                                            },
                                                            "key": 1297,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "record",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -2.318244754210149,
                                                                    "y": -2.2214258111749743
                                                                },
                                                                "size": {
                                                                    "height": 5.803571428571428,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "data"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {
                                                                    "startup": 0
                                                                },
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "link.hub.record.InRank.append(link.hub.data.InRankCount)\r",
                                                                    "link.hub.record.InTraining.append(link.hub.data.InTrainingCount)\r",
                                                                    "link.hub.record.Promotable.append(link.hub.data.PromotableCount)\r",
                                                                    "link.hub.record.Deployed.append(link.hub.library.count_deployed())\r",
                                                                    "link.hub.record.Time.append(link.hub.datetime.date_time)\r",
                                                                    "link.hub.record.Positions.append(link.hub.RankInfo.Positions)\r",
                                                                    "\r",
                                                                    "link.hub.record.Releases.append(0)\r",
                                                                    "link.hub.record.CTouts.append(0)\r",
                                                                    "link.hub.record.Promotions.append(0)\r",
                                                                    "\r",
                                                                    "signal(self, (), delay(days = 30.44))"
                                                                ]
                                                            },
                                                            "key": 1298,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Record",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1280,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 9.0110398583115,
                                                                    "y": -14.067710898295612
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "script_lines": [
                                                                    "def configure():",
                                                                    "    axes = setup_axes(1, 1)",
                                                                    "\r",
                                                                    "    axes.set_xlabel('Time')",
                                                                    "    axes.set_ylabel('Population')",
                                                                    "",
                                                                    "    ",
                                                                    "",
                                                                    "def plot():\r",
                                                                    "    \r",
                                                                    "    lastTime = link.record.Time[-1]\r",
                                                                    "    ",
                                                                    "    axes.fill(link.record.Time + [lastTime], link.record.InRank + [0], 'grey', alpha = 0.5, label = 'In Rank')\r",
                                                                    "    axes.fill(link.record.Time + [lastTime], link.record.InTraining + [0], 'r', alpha = 0.3, label = 'In Training')\r",
                                                                    "    axes.fill(link.record.Time + [lastTime], link.record.Promotable + [0], 'b', alpha = 0.3, label = 'Promotable')\r",
                                                                    "    axes.fill(link.record.Time + [lastTime], link.record.Deployed + [0], 'black', alpha = 0.6, label = 'Deployed')",
                                                                    "    axes.plot(link.record.Time, link.record.Positions, 'k', linestyle = 'dashed', label = 'Positions', linewidth = 3)\r",
                                                                    "\r",
                                                                    "    handles, labels = axes.get_legend_handles_labels()\r",
                                                                    "    axes.legend(handles, labels, loc = 9, ncol = 3, bbox_to_anchor = (0.5, 1.12))",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1299,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "plot",
                                                                "outgoing_links": {
                                                                    "record": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1297,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 16.366223339152167,
                                                                    "y": 2.484834311425601
                                                                },
                                                                "size": {
                                                                    "height": 21.07142857142857,
                                                                    "scale_3d": 1.0,
                                                                    "width": 19.910714285714285
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "plot"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "positions, attrRate, minTIR, pushPromo, ctRate",
                                                                "roles_and_prioritizing": {
                                                                    "setup": 3
                                                                },
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "link.hub.RankInfo.Positions = positions\r",
                                                                    "link.hub.RankInfo.AttrRate = attrRate\r",
                                                                    "link.hub.RankInfo.MinTIR = minTIR\r",
                                                                    "link.hub.RankInfo.PushPromote = pushPromo\r",
                                                                    "link.hub.RankInfo.CTRate = ctRate\r",
                                                                    "\r",
                                                                    "link.hub.RankID.Name = link.hub._rank_.get_name()"
                                                                ]
                                                            },
                                                            "key": 1300,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Setup",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1280,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 3.2430370494555407,
                                                                    "y": -19.466952743026894
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1301,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "Release",
                                                                "outgoing_links": {
                                                                    "Release": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1199,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": 33.82781097081913,
                                                                                    "y": -14.138290226265433
                                                                                }
                                                                            }
                                                                        ]
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 41.33403873965582,
                                                                    "y": -63.389691111668604
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {
                                                                "children": [
                                                                    {
                                                                        "content": {
                                                                            "parameters": "props",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "ID = props['ID']\r",
                                                                                "props['IN_TRAINING'] = True\r",
                                                                                "\r",
                                                                                "#add to training list\r",
                                                                                "link.hub.Data.InTraining[ID] = props\r",
                                                                                "\r",
                                                                                "#go on waitlist\r",
                                                                                "link.hub.Data.Waitlist.append(ID)\r",
                                                                                "\r",
                                                                                "\r",
                                                                                "\r",
                                                                                "\r",
                                                                                "    \r",
                                                                                "    "
                                                                            ]
                                                                        },
                                                                        "key": 1303,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Arrive",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1306,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -16.694797152199428,
                                                                                "y": -34.31994988357029
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "dict": [
                                                                                [
                                                                                    "DurationDays",
                                                                                    30
                                                                                ],
                                                                                [
                                                                                    "MinSessionSize",
                                                                                    1
                                                                                ],
                                                                                [
                                                                                    "MaxSessionSize",
                                                                                    10
                                                                                ],
                                                                                [
                                                                                    "SuccessRate",
                                                                                    1
                                                                                ],
                                                                                [
                                                                                    "SessionSchedule",
                                                                                    "gANdcQBLB0sBhnEBYS4="
                                                                                ]
                                                                            ],
                                                                            "display_order": "of_creation",
                                                                            "pickled_keys": [
                                                                                "SessionSchedule"
                                                                            ]
                                                                        },
                                                                        "key": 1304,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Input",
                                                                            "outgoing_links": {},
                                                                            "position": {
                                                                                "x": -14.664036274121262,
                                                                                "y": -0.76648840428639
                                                                            },
                                                                            "size": {
                                                                                "height": 6.5476190476190474,
                                                                                "scale_3d": 1.0,
                                                                                "width": 9.523809523809524
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "data"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "dict": [
                                                                                [
                                                                                    "InTraining",
                                                                                    {}
                                                                                ],
                                                                                [
                                                                                    "Waitlist",
                                                                                    []
                                                                                ],
                                                                                [
                                                                                    "Attendance",
                                                                                    []
                                                                                ],
                                                                                [
                                                                                    "StartDates",
                                                                                    []
                                                                                ],
                                                                                [
                                                                                    "SessionIdx",
                                                                                    0
                                                                                ]
                                                                            ],
                                                                            "display_order": "of_creation",
                                                                            "pickled_keys": []
                                                                        },
                                                                        "key": 1305,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Data",
                                                                            "outgoing_links": {},
                                                                            "position": {
                                                                                "x": -4.235163886363756,
                                                                                "y": -0.7590424824417763
                                                                            },
                                                                            "size": {
                                                                                "height": 6.607142857142857,
                                                                                "scale_3d": 1.0,
                                                                                "width": 8.660714285714285
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "data"
                                                                    },
                                                                    {
                                                                        "content": {},
                                                                        "key": 1306,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "hub",
                                                                            "outgoing_links": {
                                                                                "Data": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1305,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "Input": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1304,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "Record": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1312,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "datetime": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1310,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "library": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1315,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -1.135639561950389,
                                                                                "y": -13.488105952112994
                                                                            },
                                                                            "size": {
                                                                                "height": 1.5,
                                                                                "scale_3d": 1.0,
                                                                                "width": 1.5
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "hub"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {
                                                                                "reset": 0
                                                                            },
                                                                            "script_imports": {
                                                                                "datetime": [
                                                                                    "datetime",
                                                                                    "datetime"
                                                                                ]
                                                                            },
                                                                            "script_lines": [
                                                                                "link.hub.Data.InTraining = {}\r",
                                                                                "link.hub.Data.Waitlist = []\r",
                                                                                "link.hub.Data.Attendance = []\r",
                                                                                "link.hub.Data.StartDates = []\r",
                                                                                "link.hub.Data.SessionIdx = 0\r",
                                                                                "\r",
                                                                                "startDate = datetime(2019,6,1,9,0,0)\r",
                                                                                "link.hub.datetime.set_date_time(startDate)\r",
                                                                                "\r",
                                                                                "link.hub.Record.Waitlist = [0]\r",
                                                                                "link.hub.Record.Time = [startDate]\r",
                                                                                ""
                                                                            ]
                                                                        },
                                                                        "key": 1307,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Reset",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1306,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 9.448075269869122,
                                                                                "y": -13.073071682303503
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {},
                                                                        "key": 1308,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 1,
                                                                            "name": "TrainRequest",
                                                                            "outgoing_links": {
                                                                                "Arrive": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1303,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -20.800874878523683,
                                                                                "y": -36.48950085353416
                                                                            },
                                                                            "size": {
                                                                                "height": 0.5,
                                                                                "scale_3d": 1.0,
                                                                                "width": 0.5
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "node"
                                                                    },
                                                                    {
                                                                        "content": {},
                                                                        "key": 1309,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 1,
                                                                            "name": "SndTrainFinish",
                                                                            "outgoing_links": {
                                                                                "FinishTraining": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1282,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 27.97851400511773,
                                                                                "y": -36.629572966635514
                                                                            },
                                                                            "size": {
                                                                                "height": 0.5,
                                                                                "scale_3d": 1.0,
                                                                                "width": 0.5
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "node"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "date_time": {
                                                                                "day": 1,
                                                                                "hour": 9,
                                                                                "minute": 0,
                                                                                "month": 6,
                                                                                "second": 0,
                                                                                "year": 2019
                                                                            }
                                                                        },
                                                                        "key": 1310,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "datetime",
                                                                            "outgoing_links": {},
                                                                            "position": {
                                                                                "x": -11.68177009004484,
                                                                                "y": -11.093761528465397
                                                                            },
                                                                            "size": {
                                                                                "height": 3.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 6.2
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "datetime"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "script_lines": [
                                                                                "def configure():\r",
                                                                                "    axes = setup_axes(1, 1)",
                                                                                "\r",
                                                                                "    \r",
                                                                                "",
                                                                                "",
                                                                                "def plot():\r",
                                                                                "    \r",
                                                                                "    axes = setup_axes(1, 1)\r",
                                                                                "    axes.set_xlabel('Time (years)')\r",
                                                                                "    axes.set_ylabel('Number of people')\r",
                                                                                "    \r",
                                                                                "    #don't plot if data is empty\r",
                                                                                "    if len(link.hub.Record.Waitlist) <= 1:\r",
                                                                                "        return\r",
                                                                                "\r",
                                                                                "    #plot the waitlist\r",
                                                                                "    lastTime = link.hub.Record.Time[-1]\r",
                                                                                "    axes.fill(link.hub.Record.Time + [lastTime], link.hub.Record.Waitlist + [0], 'b', alpha = 0.3, label = 'Waitlist')",
                                                                                "    axes.figure.autofmt_xdate()\r",
                                                                                "    \r",
                                                                                "    \r",
                                                                                "    #plot the session attendance\r",
                                                                                "    height = link.hub.Data.Attendance\r",
                                                                                "    width = [link.hub.Input.DurationDays]*len(height)\r",
                                                                                "    left = link.hub.Data.StartDates\r",
                                                                                "    y_pos = [0]*len(height)\r",
                                                                                "    axes.barh(y_pos, width, height = height, left = left, color = 'green', alpha = 0.6, label = 'Session Attendance')\r",
                                                                                "    \r",
                                                                                "    #legend\r",
                                                                                "    handles, labels = axes.get_legend_handles_labels()\r",
                                                                                "    axes.legend(handles, labels, loc = 9, ncol = 3, bbox_to_anchor = (0.5, 1.12))"
                                                                            ]
                                                                        },
                                                                        "key": 1311,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Attendance",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1306,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 18.05520745979187,
                                                                                "y": -1.1322048215124676
                                                                            },
                                                                            "size": {
                                                                                "height": 16.2,
                                                                                "scale_3d": 1.0,
                                                                                "width": 15.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "plot"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "dict": [
                                                                                [
                                                                                    "Waitlist",
                                                                                    [
                                                                                        0
                                                                                    ]
                                                                                ],
                                                                                [
                                                                                    "Time",
                                                                                    "gANdcQBjZGF0ZXRpbWUKZGF0ZXRpbWUKcQFDCgfjBgEJAAAAAABxAoVxA1JxBGEu"
                                                                                ]
                                                                            ],
                                                                            "display_order": "of_creation",
                                                                            "pickled_keys": [
                                                                                "Time"
                                                                            ]
                                                                        },
                                                                        "key": 1312,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Record",
                                                                            "outgoing_links": {},
                                                                            "position": {
                                                                                "x": 5.519563999613053,
                                                                                "y": -0.7859267560572475
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "data"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {
                                                                                "startup": 0
                                                                            },
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "link.hub.Record.Waitlist.append(len(link.hub.Data.Waitlist))\r",
                                                                                "link.hub.Record.Time.append(link.hub.datetime.date_time)\r",
                                                                                "\r",
                                                                                "signal(self, (), delay(days = 7))"
                                                                            ]
                                                                        },
                                                                        "key": 1313,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Record",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1306,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 9.55578961375507,
                                                                                "y": -7.625327065521719
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "duration, minSessionSize, maxSessionSize, successRate, sessionSchedule",
                                                                            "roles_and_prioritizing": {
                                                                                "setup": 3
                                                                            },
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "link.hub.Input.DurationDays = duration\r",
                                                                                "link.hub.Input.MinSessionSize = minSessionSize\r",
                                                                                "link.hub.Input.MaxSessionSize = maxSessionSize\r",
                                                                                "link.hub.Input.SuccessRate = successRate\r",
                                                                                "link.hub.Input.SessionSchedule = sessionSchedule"
                                                                            ]
                                                                        },
                                                                        "key": 1314,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Setup",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1306,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 9.417960966070991,
                                                                                "y": -18.46107648244264
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "script_imports": {
                                                                                "datetime": [
                                                                                    "datetime",
                                                                                    "datetime"
                                                                                ]
                                                                            },
                                                                            "script_lines": [
                                                                                "def get_waitlist():\r",
                                                                                "    inTrng = link.hub.Data.InTraining\r",
                                                                                "    return [id for id in link.hub.Data.Waitlist\r",
                                                                                "        if inTrng[id]['RELEASED']]\r",
                                                                                "        \r",
                                                                                "\r",
                                                                                "\r",
                                                                                "def get_trainable_on_waitlist():\r",
                                                                                "    inTrng = link.hub.Data.InTraining\r",
                                                                                "    return [id for id in link.hub.Data.Waitlist\r",
                                                                                "        if not inTrng[id]['RESERVED']\r",
                                                                                "        and not inTrng[id]['DEPLOYED']\r",
                                                                                "        and not inTrng[id]['RELEASED']]\r",
                                                                                "    \r",
                                                                                "def count_trainable_on_waitlist():\r",
                                                                                "    return len(get_trainable_on_waitlist())\r",
                                                                                "    \r",
                                                                                "    \r",
                                                                                "def get_start_session_idx():\r",
                                                                                "    #assumes session schedule is in order\r",
                                                                                "    #returns the index of the first session based on the current datetime\r",
                                                                                "    \r",
                                                                                "    year = link.hub.datetime.year\r",
                                                                                "    \r",
                                                                                "    startDates = [datetime(year, m, d, 8, 0, 0) for m,d in link.hub.Input.SessionSchedule]\r",
                                                                                "    \r",
                                                                                "    delays = [(t - link.hub.datetime.get_date_time()).total_seconds() for t in startDates]\r",
                                                                                "    \r",
                                                                                "    #return the smallest positive delay\r",
                                                                                "    for i in range(len(delays)):\r",
                                                                                "        if delays[i] > 0:\r",
                                                                                "            return i\r",
                                                                                "   \r",
                                                                                "    #if no more sessions this year, return first session for next year\r",
                                                                                "    return 0\r",
                                                                                "    "
                                                                            ]
                                                                        },
                                                                        "key": 1315,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "library",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1306,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -11.156992490107825,
                                                                                "y": -15.437735791363107
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "library"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {
                                                                                "startup": 0
                                                                            },
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "link.hub.Data.SessionIdx = link.hub.library.get_start_session_idx()\r",
                                                                                "\r",
                                                                                "link.DelayToSessionStart()\r",
                                                                                "\r",
                                                                                "\r",
                                                                                ""
                                                                            ]
                                                                        },
                                                                        "key": 1316,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "GetFirstSession",
                                                                            "outgoing_links": {
                                                                                "DelayToSessionStart": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1317,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1306,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -6.831928977706746,
                                                                                "y": -34.44116769677284
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "nextYr = False",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {
                                                                                "datetime": [
                                                                                    "datetime",
                                                                                    "datetime"
                                                                                ]
                                                                            },
                                                                            "script_lines": [
                                                                                "session = link.hub.Input.SessionSchedule[link.hub.Data.SessionIdx]\r",
                                                                                "\r",
                                                                                "year = link.hub.datetime.year\r",
                                                                                "month = session[0]\r",
                                                                                "day = session[1]\r",
                                                                                "\r",
                                                                                "delayDays = (datetime(year, month, day, 8, 0, 0) - link.hub.datetime.date_time).total_seconds()/86400.0\r",
                                                                                "\r",
                                                                                "if delayDays < 0.0 or nextYr:\r",
                                                                                "    delayDays = (datetime(year + 1, month, day, 8, 0, 0) - link.hub.datetime.date_time).total_seconds()/86400.0\r",
                                                                                "\r",
                                                                                "signal(link.StartSession, (), delay(days = delayDays))\r",
                                                                                ""
                                                                            ]
                                                                        },
                                                                        "key": 1317,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "DelayToSessionStart",
                                                                            "outgoing_links": {
                                                                                "StartSession": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1318,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1306,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 1.5855408583978676,
                                                                                "y": -34.353601749967424
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "input = link.hub.Input\r",
                                                                                "data = link.hub.Data\r",
                                                                                "\r",
                                                                                "#get the list of potential session starts, up to max session size\r",
                                                                                "sessionList = link.hub.library.get_trainable_on_waitlist()[:input.MaxSessionSize]\r",
                                                                                "\r",
                                                                                "#if at least have the min session size\r",
                                                                                "if len(sessionList) >= input.MinSessionSize:\r",
                                                                                "    \r",
                                                                                "    #remove ids from waitlist and set status to attending training\r",
                                                                                "    for id in sessionList:\r",
                                                                                "        data.Waitlist.remove(id)\r",
                                                                                "        data.InTraining[id]['ATTENDING_TRNG'] = True\r",
                                                                                "    \r",
                                                                                "    #track attendance and start date\r",
                                                                                "    data.Attendance.append(len(sessionList))\r",
                                                                                "    data.StartDates.append(link.hub.datetime.date_time)\r",
                                                                                "    \r",
                                                                                "    #signal to finish the course after course duration\r",
                                                                                "    signal(link.Finish, sessionList, delay(days = input.DurationDays))\r",
                                                                                "\r",
                                                                                "#else record zero-loaded session\r",
                                                                                "else:\r",
                                                                                "    data.Attendance.append(0)\r",
                                                                                "    data.StartDates.append(link.hub.datetime.date_time)\r",
                                                                                "    \r",
                                                                                "#setup next session\r",
                                                                                "link.NextSession()"
                                                                            ]
                                                                        },
                                                                        "key": 1318,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "StartSession",
                                                                            "outgoing_links": {
                                                                                "Finish": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1319,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "NextSession": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1320,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1306,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 10.16430095764344,
                                                                                "y": -34.388760602833166
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "sessionList",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "input = link.hub.Input\r",
                                                                                "data = link.hub.Data\r",
                                                                                "#for each session attendee\r",
                                                                                "for ID in sessionList:\r",
                                                                                "    \r",
                                                                                "    if ID in data.InTraining:\r",
                                                                                "    \r",
                                                                                "        #update properties\r",
                                                                                "        props = data.InTraining[ID]\r",
                                                                                "        props['ATTENDING_TRNG'] = False\r",
                                                                                "        props['IN_TRAINING'] = False\r",
                                                                                "        props['TRAINING_COMPLETED'] = True\r",
                                                                                "\r",
                                                                                "        #if pass\r",
                                                                                "        if random.random() < input.SuccessRate:\r",
                                                                                "            result = 'P'\r",
                                                                                "        #else fail\r",
                                                                                "        else:\r",
                                                                                "            result = 'F'\r",
                                                                                "            props['TRAINING_FAILED'] = True\r",
                                                                                "                 \r",
                                                                                "        #remove\r",
                                                                                "        del data.InTraining[ID]\r",
                                                                                "\r",
                                                                                "        link.SndTrainFinish(props, result)"
                                                                            ]
                                                                        },
                                                                        "key": 1319,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Finish",
                                                                            "outgoing_links": {
                                                                                "SndTrainFinish": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1309,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1306,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 18.44440284604379,
                                                                                "y": -34.377498855660235
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "#go to next session\r",
                                                                                "link.hub.Data.SessionIdx += 1\r",
                                                                                "\r",
                                                                                "if link.hub.Data.SessionIdx < len(link.hub.Input.SessionSchedule):\r",
                                                                                "    link.DelayToSessionStart(nextYr = False)\r",
                                                                                "    \r",
                                                                                "else:\r",
                                                                                "    link.hub.Data.SessionIdx = 0\r",
                                                                                "    link.DelayToSessionStart(nextYr = True)"
                                                                            ]
                                                                        },
                                                                        "key": 1320,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "NextSession",
                                                                            "outgoing_links": {
                                                                                "DelayToSessionStart": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1317,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1306,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 5.983814681569553,
                                                                                "y": -42.51810526522001
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {},
                                                                        "key": 1321,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 1,
                                                                            "name": "StopTraining",
                                                                            "outgoing_links": {
                                                                                "Release": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1322,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -21.034880837044263,
                                                                                "y": -46.91947031151817
                                                                            },
                                                                            "size": {
                                                                                "height": 0.5,
                                                                                "scale_3d": 1.0,
                                                                                "width": 0.5
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "node"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "ID",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "if ID in link.hub.Data.InTraining:\r",
                                                                                "    del link.hub.Data.InTraining[ID]\r",
                                                                                "    \r",
                                                                                "if ID in link.hub.Data.Waitlist:\r",
                                                                                "    link.hub.Data.Waitlist.remove(ID)"
                                                                            ]
                                                                        },
                                                                        "key": 1322,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "StopTraining",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1306,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -16.869280390907246,
                                                                                "y": -44.82919111941537
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "print(link.library.get_waitlist())"
                                                                            ]
                                                                        },
                                                                        "key": 1323,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "function",
                                                                            "outgoing_links": {
                                                                                "library": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1315,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -9.936127294350463,
                                                                                "y": -23.705182031625434
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    }
                                                                ],
                                                                "ifx_ports_left": [
                                                                    1308,
                                                                    1321
                                                                ],
                                                                "ifx_ports_right": [
                                                                    1309
                                                                ],
                                                                "image_id": null,
                                                                "proxy_position": {
                                                                    "x": -0.6806719555009858,
                                                                    "y": 1.7989187395383204
                                                                },
                                                                "rotation_2d": 0.0,
                                                                "rotation_3d": {
                                                                    "pitch": 0.0,
                                                                    "roll": 0.0,
                                                                    "yaw": 0.0
                                                                }
                                                            },
                                                            "key": 1302,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Training",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -8.874374904552498,
                                                                    "y": -39.957315946695566
                                                                },
                                                                "size": {
                                                                    "height": 3.392857142857143,
                                                                    "scale_3d": 1.0,
                                                                    "width": 6.398809523809524
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "actor"
                                                        },
                                                        {
                                                            "content": {
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "def count_deployed():\r",
                                                                    "    \r",
                                                                    "    inRank = link.hub.data.InRank\r",
                                                                    "\r",
                                                                    "    return len([id for id in inRank if inRank[id]['DEPLOYED']])\r",
                                                                    "    \r",
                                                                    "    "
                                                                ]
                                                            },
                                                            "key": 1324,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "library",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1280,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 3.2885695338145924,
                                                                    "y": -24.435898619316763
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "library"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "num = 1200\r",
                                                                    "print('In rank', sum(link.record.InRank[-num:])/num)\r",
                                                                    "print('Promotable', sum(link.record.Promotable[-num:])/num)\r",
                                                                    "print('Promos per yr', sum(link.record.Promotions[-num:])/len(link.record.Promotions[-num:])*12)\r",
                                                                    "print('Releases per yr', sum(link.record.Releases[-num:])/len(link.record.Releases[-num:])*12)\r",
                                                                    "print('CTs out per yr', sum(link.record.CTouts[-num:])/len(link.record.CTouts[-num:])*12)\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1325,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "PrintSummary",
                                                                "outgoing_links": {
                                                                    "record": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1297,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 4.876750797335997,
                                                                    "y": 8.519222745922649
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {
                                                                    "finish": 0
                                                                },
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "rank = ''.join(filter(str.isalnum, link.hub.RankID.Name))\r",
                                                                    "cadre = link.hub.RankID.Cadre\r",
                                                                    "key = cadre + '_' + rank\r",
                                                                    "\r",
                                                                    "save = {}\r",
                                                                    "save[key + '_InRank'] = link.hub.record.InRank\r",
                                                                    "save[key + '_InTraining'] = link.hub.record.InTraining\r",
                                                                    "save[key + '_Deployed'] = link.hub.record.Deployed\r",
                                                                    "save[key + '_Promotable'] = link.hub.record.Promotable\r",
                                                                    "\r",
                                                                    "batch.set_replication_data(**save)"
                                                                ]
                                                            },
                                                            "key": 1326,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Finish",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1280,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 9.31265400294534,
                                                                    "y": -19.698326655587362
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        }
                                                    ],
                                                    "ifx_ports_left": [
                                                        1291,
                                                        1292,
                                                        1288
                                                    ],
                                                    "ifx_ports_right": [
                                                        1287,
                                                        1290,
                                                        1289,
                                                        1301
                                                    ],
                                                    "image_id": null,
                                                    "proxy_position": {
                                                        "x": -4.762093403985616,
                                                        "y": 3.5569417058638875
                                                    },
                                                    "rotation_2d": 0.0,
                                                    "rotation_3d": {
                                                        "pitch": 0.0,
                                                        "roll": 0.0,
                                                        "yaw": 0.0
                                                    }
                                                },
                                                "key": 1273,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "LCol",
                                                    "outgoing_links": {},
                                                    "position": {
                                                        "x": 24.270593600386103,
                                                        "y": -7.179796027367643
                                                    },
                                                    "size": {
                                                        "height": 5.595238095238095,
                                                        "scale_3d": 1.0,
                                                        "width": 6.19047619047619
                                                    },
                                                    "visible": true
                                                },
                                                "type": "actor"
                                            },
                                            {
                                                "content": {
                                                    "children": [
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#if part of initial pop, send to initial pop function\r",
                                                                    "if 'INSERT' in props:\r",
                                                                    "        link.Insert(props)\r",
                                                                    "        return\r",
                                                                    "\r",
                                                                    "#get id\r",
                                                                    "ID = props['ID']\r",
                                                                    "\r",
                                                                    "#update props\r",
                                                                    "props['RANK'] = link.hub.RankID.Name\r",
                                                                    "props['OCC'] = link.hub.RankID.Occupation\r",
                                                                    "props['CADRE'] = link.hub.RankID.Cadre\r",
                                                                    "props['DOP'] = link.hub.datetime.date_time\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "#add to in-rank\r",
                                                                    "link.hub.data.InRank[ID] = props\r",
                                                                    "link.hub.data.InRankCount += 1\r",
                                                                    "\r",
                                                                    "#delay before start training (if needed)\r",
                                                                    "dbt = link.hub.RankInfo.DelayBeforeTraining\r",
                                                                    "if dbt > 0:\r",
                                                                    "    signal(link.StartTraining, props, delay(days = dbt))\r",
                                                                    "else:\r",
                                                                    "    link.StartTraining(props)\r",
                                                                    "\r",
                                                                    "#setup attrition\r",
                                                                    "link.SetupAttrition(props)\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1328,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "EnterRank",
                                                                "outgoing_links": {
                                                                    "Insert": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1349,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "SetupAttrition": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1348,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "StartTraining": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1335,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1334,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -30.012218907185066,
                                                                    "y": -39.795841039640734
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "dict": [
                                                                    [
                                                                        "Positions",
                                                                        20
                                                                    ],
                                                                    [
                                                                        "MinTIR",
                                                                        100
                                                                    ],
                                                                    [
                                                                        "MaxTIR",
                                                                        1000
                                                                    ],
                                                                    [
                                                                        "DelayBeforeTraining",
                                                                        0
                                                                    ],
                                                                    [
                                                                        "ReleaseIfFail",
                                                                        true
                                                                    ],
                                                                    [
                                                                        "PushPromote",
                                                                        false
                                                                    ],
                                                                    [
                                                                        "AttrRate",
                                                                        0.05
                                                                    ],
                                                                    [
                                                                        "MaxAge",
                                                                        1000
                                                                    ],
                                                                    [
                                                                        "DeployRatio",
                                                                        0.143
                                                                    ],
                                                                    [
                                                                        "CTRate",
                                                                        0.02
                                                                    ]
                                                                ],
                                                                "display_order": "of_creation",
                                                                "pickled_keys": []
                                                            },
                                                            "key": 1329,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "RankInfo",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -24.690955916045823,
                                                                    "y": -0.8998517282035177
                                                                },
                                                                "size": {
                                                                    "height": 10.178571428571429,
                                                                    "scale_3d": 1.0,
                                                                    "width": 6.875
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "data"
                                                        },
                                                        {
                                                            "content": {
                                                                "dict": [
                                                                    [
                                                                        "InRank",
                                                                        {}
                                                                    ],
                                                                    [
                                                                        "InTraining",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "Promotable",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "Deployed",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "InRankCount",
                                                                        0
                                                                    ],
                                                                    [
                                                                        "InTrainingCount",
                                                                        0
                                                                    ],
                                                                    [
                                                                        "PromotableCount",
                                                                        0
                                                                    ],
                                                                    [
                                                                        "DeployedCount",
                                                                        0
                                                                    ]
                                                                ],
                                                                "display_order": "of_creation",
                                                                "pickled_keys": []
                                                            },
                                                            "key": 1330,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "data",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -15.753892763598326,
                                                                    "y": -2.1163262518204564
                                                                },
                                                                "size": {
                                                                    "height": 9.375,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "data"
                                                        },
                                                        {
                                                            "content": {
                                                                "dict": [
                                                                    [
                                                                        "Name",
                                                                        "Col"
                                                                    ],
                                                                    [
                                                                        "Occupation",
                                                                        "NWO"
                                                                    ],
                                                                    [
                                                                        "Cadre",
                                                                        "RegF"
                                                                    ]
                                                                ],
                                                                "display_order": "of_creation",
                                                                "pickled_keys": []
                                                            },
                                                            "key": 1331,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "RankID",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -27.50527447254697,
                                                                    "y": -12.681312051278057
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "data"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {
                                                                    "reset": 0
                                                                },
                                                                "script_imports": {
                                                                    "datetime": [
                                                                        "datetime",
                                                                        "datetime"
                                                                    ]
                                                                },
                                                                "script_lines": [
                                                                    "\r",
                                                                    "link.hub.data.InRank = {}\r",
                                                                    "link.hub.data.InTraining = []\r",
                                                                    "link.hub.data.Promotable = []\r",
                                                                    "link.hub.data.Deployed = []\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "link.hub.data.InRankCount = 0\r",
                                                                    "link.hub.data.InTrainingCount = 0\r",
                                                                    "link.hub.data.PromotableCount = 0\r",
                                                                    "link.hub.data.DeployedCount = 0\r",
                                                                    "\r",
                                                                    "startDate = datetime(2019,6,1,9,0,0)\r",
                                                                    "link.hub.datetime.set_date_time(startDate)\r",
                                                                    "\r",
                                                                    "link.hub.record.InRank = [0]\r",
                                                                    "link.hub.record.InTraining = [0]\r",
                                                                    "link.hub.record.Promotable = [0]\r",
                                                                    "link.hub.record.Deployed = [0]\r",
                                                                    "link.hub.record.Time = [startDate]\r",
                                                                    "link.hub.record.Releases = []\r",
                                                                    "link.hub.record.CTouts = []\r",
                                                                    "link.hub.record.Promotions = []\r",
                                                                    "link.hub.record.Positions = [link.hub.RankInfo.Positions]\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1332,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Reset",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1334,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 3.3173287652768817,
                                                                    "y": -13.986227580374978
                                                                },
                                                                "size": {
                                                                    "height": 6.011904761904762,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "date_time": {
                                                                    "day": 1,
                                                                    "hour": 9,
                                                                    "minute": 0,
                                                                    "month": 6,
                                                                    "second": 0,
                                                                    "year": 2019
                                                                }
                                                            },
                                                            "key": 1333,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "datetime",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": 2.3615869633262303,
                                                                    "y": -9.033337372290976
                                                                },
                                                                "size": {
                                                                    "height": 3.988095238095238,
                                                                    "scale_3d": 1.0,
                                                                    "width": 6.19047619047619
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "datetime"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1334,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "hub",
                                                                "outgoing_links": {
                                                                    "RankID": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1331,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "RankInfo": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1329,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "data": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1330,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "datetime": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1333,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "library": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1378,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "rank": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1327,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "record": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1351,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -7.750112694994645,
                                                                    "y": -18.00391297376486
                                                                },
                                                                "size": {
                                                                    "height": 1.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 1.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "hub"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "if props['ID'] not in link.hub.data.InRank: return\r",
                                                                    "\r",
                                                                    "link.hub.data.InTraining.append(props['ID'])\r",
                                                                    "link.hub.data.InTrainingCount += 1\r",
                                                                    "\r",
                                                                    "link.TrainRequest(props)"
                                                                ]
                                                            },
                                                            "key": 1335,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "StartTraining",
                                                                "outgoing_links": {
                                                                    "TrainRequest": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1362,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1334,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -20.026080654978394,
                                                                    "y": -39.697656269064375
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props, result",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "if props['ID'] not in link.hub.data.InRank: return\r",
                                                                    "\r",
                                                                    "link.hub.data.InTraining.remove(props['ID'])\r",
                                                                    "link.hub.data.InTrainingCount -= 1\r",
                                                                    "\r",
                                                                    "#if fail\r",
                                                                    "if result == 'F':\r",
                                                                    "    \r",
                                                                    "    #immediate release\r",
                                                                    "    if link.hub.RankInfo.ReleaseIfFail:\r",
                                                                    "        link.RemoveMember(props, 'failed')\r",
                                                                    "        \r",
                                                                    "    #or stay in rank until release\r",
                                                                    "\r",
                                                                    "#else pass\r",
                                                                    "else:\r",
                                                                    "    link.MinTIRDelay(props)\r",
                                                                    "        \r",
                                                                    "        \r",
                                                                    "        \r",
                                                                    "    \r",
                                                                    "    \r",
                                                                    "    \r",
                                                                    "    \r",
                                                                    "\r",
                                                                    "    "
                                                                ]
                                                            },
                                                            "key": 1336,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "FinishTraining",
                                                                "outgoing_links": {
                                                                    "MinTIRDelay": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1350,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "RemoveMember": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1347,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1334,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 5.515274902002796,
                                                                    "y": -39.49022853059453
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "if props['ID'] not in link.hub.data.InRank: return\r",
                                                                    "\r",
                                                                    "#if there is no next rank, do nothing\r",
                                                                    "if link.SndReq is None: return\r",
                                                                    "\r",
                                                                    "#add to promo list if not already there (might already be there in obscure cases)\r",
                                                                    "if props['ID'] not in link.hub.data.Promotable:\r",
                                                                    "    link.hub.data.Promotable.append(props['ID'])\r",
                                                                    "    link.hub.data.PromotableCount += 1\r",
                                                                    "\r",
                                                                    "#if push promote\r",
                                                                    "if link.hub.RankInfo.PushPromote:\r",
                                                                    "    link.Promote(props)\r",
                                                                    "\r",
                                                                    "#else request promotion\r",
                                                                    "else:\r",
                                                                    "    link.SndReq()\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1337,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "MetMinTIR",
                                                                "outgoing_links": {
                                                                    "Promote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1338,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "SndReq": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1344,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1334,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 21.676515289907346,
                                                                    "y": -39.3404021116089
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#promote to next rank\r",
                                                                    "link.PromoteOut(props)\r",
                                                                    "\r",
                                                                    "#remove from current rank\r",
                                                                    "link.RemoveMember(props, 'promoted')\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1338,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Promote",
                                                                "outgoing_links": {
                                                                    "PromoteOut": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1341,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "RemoveMember": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1347,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1334,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 30.26797020714654,
                                                                    "y": -39.30186888370791
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "nextRankPositions, nextRankCount",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "data = link.hub.data\r",
                                                                    "info = link.hub.RankInfo\r",
                                                                    "\r",
                                                                    "#maximum possible promotions\r",
                                                                    "maxPromos = min(data.PromotableCount, nextRankPositions - nextRankCount)\r",
                                                                    "\r",
                                                                    "#promotions to balance strength\r",
                                                                    "s0 = data.InRankCount\r",
                                                                    "s1 = nextRankCount\r",
                                                                    "p0 = info.Positions\r",
                                                                    "p1 = nextRankPositions\r",
                                                                    "balancePromos = (s0*p1 - s1*p0)/(p0 + p1)\r",
                                                                    "\r",
                                                                    "#adjust number of promos stochastically\r",
                                                                    "balancePromos_ = math.floor(balancePromos)\r",
                                                                    "frac = balancePromos - balancePromos_\r",
                                                                    "if random.random() > frac:\r",
                                                                    "    balancePromos = balancePromos_\r",
                                                                    "else:\r",
                                                                    "    balancePromos = balancePromos_ + 1\r",
                                                                    "\r",
                                                                    "#determine final number of promos\r",
                                                                    "numPromos = min(maxPromos, balancePromos)\r",
                                                                    "\r",
                                                                    "if numPromos <= 0: return\r",
                                                                    "\r",
                                                                    "promoteIDs = random.sample(link.hub.data.Promotable, numPromos)\r",
                                                                    "\r",
                                                                    "for ID in promoteIDs:\r",
                                                                    "    link.Promote(link.hub.data.InRank[ID])\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1339,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "PromoteInvite",
                                                                "outgoing_links": {
                                                                    "Promote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1338,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1334,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 30.236943946864095,
                                                                    "y": -54.94925517566933
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#if nothing below this rank, don't invite a promotion\r",
                                                                    "if link.InvitePromote is None: return\r",
                                                                    "\r",
                                                                    "# if there is room in the rank\r",
                                                                    "if link.hub.data.InRankCount < link.hub.RankInfo.Positions:\r",
                                                                    "\r",
                                                                    "    #send the number of positions and current in-rank count\r",
                                                                    "    link.InvitePromote(link.hub.RankInfo.Positions, link.hub.data.InRankCount)"
                                                                ]
                                                            },
                                                            "key": 1340,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "InvitePromote",
                                                                "outgoing_links": {
                                                                    "InvitePromote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1342,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1334,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -30.008885903158987,
                                                                    "y": -54.932325409304234
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1341,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "SndPromo",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": 40.81257151160083,
                                                                    "y": -41.4195199794459
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1342,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "SndInvite",
                                                                "outgoing_links": {
                                                                    "Invite": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1289,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -37.22325753644102,
                                                                    "y": -57.04376020783337
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1343,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "Invite",
                                                                "outgoing_links": {
                                                                    "PromoteInvite": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1339,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 41.1022611870765,
                                                                    "y": -57.271274325502496
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1344,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "SndReq",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": 40.58019488696916,
                                                                    "y": -49.98849280979479
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1345,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "Enter",
                                                                "outgoing_links": {
                                                                    "EnterRank": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1328,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -37.04218246881857,
                                                                    "y": -42.01569816569041
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1346,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "Request",
                                                                "outgoing_links": {
                                                                    "InvitePromote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1340,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -36.98495220560267,
                                                                    "y": -49.363009874348336
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props, lossType",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "ID = props['ID']\r",
                                                                    "\r",
                                                                    "#remove from all member lists\r",
                                                                    "if ID in link.hub.data.InTraining:\r",
                                                                    "    link.hub.data.InTraining.remove(ID)\r",
                                                                    "    link.hub.data.InTrainingCount -= 1\r",
                                                                    "    \r",
                                                                    "\r",
                                                                    "if ID in link.hub.data.Promotable:\r",
                                                                    "    link.hub.data.Promotable.remove(ID)\r",
                                                                    "    link.hub.data.PromotableCount -= 1\r",
                                                                    "\r",
                                                                    "if ID in link.hub.data.InRank:\r",
                                                                    "    del link.hub.data.InRank[ID]\r",
                                                                    "    link.hub.data.InRankCount -= 1\r",
                                                                    "    \r",
                                                                    "    #record release\r",
                                                                    "    if lossType == 'released':\r",
                                                                    "        props['RELEASED'] = True\r",
                                                                    "        link.hub.record.Releases[-1] += 1\r",
                                                                    "        link.Release(props)\r",
                                                                    "        link.StopTraining(ID)\r",
                                                                    "    \r",
                                                                    "    #record CT\r",
                                                                    "    elif lossType == 'CT':\r",
                                                                    "        props['CT'] = True\r",
                                                                    "        props['DOP'] = link.hub.datetime.date_time  #override promotion time\r",
                                                                    "        link.hub.record.CTouts[-1] += 1\r",
                                                                    "        link.Release(props)\r",
                                                                    "        link.StopTraining(ID)\r",
                                                                    "        \r",
                                                                    "    \r",
                                                                    "    #record promotion\r",
                                                                    "    elif lossType == 'promoted':\r",
                                                                    "        link.hub.record.Promotions[-1] += 1\r",
                                                                    "    \r",
                                                                    "    #invite promotion\r",
                                                                    "    link.InvitePromote()\r",
                                                                    "    \r",
                                                                    "\r",
                                                                    "    \r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1347,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "RemoveMember",
                                                                "outgoing_links": {
                                                                    "InvitePromote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1340,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "Release": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1355,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": 32.34392154184954,
                                                                                    "y": -63.223816325109745
                                                                                }
                                                                            }
                                                                        ]
                                                                    },
                                                                    "StopTraining": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1375,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": -11.890454134805578,
                                                                                    "y": -46.83253535228758
                                                                                }
                                                                            },
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": -11.858746257112767,
                                                                                    "y": -43.72516333839172
                                                                                }
                                                                            }
                                                                        ]
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1334,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 5.817043142888761,
                                                                    "y": -54.71431714204966
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#MaxAge\r",
                                                                    "ageDays = (link.hub.datetime.date_time - props['DOB']).days\r",
                                                                    "maxAgeDaysLeft = link.hub.RankInfo.MaxAge*365 - ageDays\r",
                                                                    "\r",
                                                                    "#Max TIR\r",
                                                                    "TIRDays = (link.hub.datetime.date_time - props['DOP']).days\r",
                                                                    "maxTIRDaysLeft = link.hub.RankInfo.MaxTIR*365 - TIRDays\r",
                                                                    "\r",
                                                                    "#voluntary release (based on attrition rate)\r",
                                                                    "alpha = -math.log(1.0 - link.hub.RankInfo.AttrRate)\r",
                                                                    "volDaysLeft = random.expovariate(alpha)*365\r",
                                                                    "\r",
                                                                    "#CT release (based on CT rate)\r",
                                                                    "alpha = -math.log(1.0 - link.hub.RankInfo.CTRate)\r",
                                                                    "ctDaysLeft = random.expovariate(alpha)*365\r",
                                                                    "\r",
                                                                    "#note, need to label CT releases\r",
                                                                    "\r",
                                                                    "#schedule release\r",
                                                                    "days = min(maxAgeDaysLeft, maxTIRDaysLeft, volDaysLeft, ctDaysLeft)\r",
                                                                    "\r",
                                                                    "#label the loss type\r",
                                                                    "lossType = 'released'\r",
                                                                    "if days == ctDaysLeft:\r",
                                                                    "    lossType = 'CT'\r",
                                                                    "\r",
                                                                    "signal(link.RemoveMember, (props, lossType), delay(days = days))"
                                                                ]
                                                            },
                                                            "key": 1348,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "SetupAttrition",
                                                                "outgoing_links": {
                                                                    "RemoveMember": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1347,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1334,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -20.00560338611418,
                                                                    "y": -46.629645698637454
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#insert member into model (used for initial pop and CTs)\r",
                                                                    "\r",
                                                                    "#if member not in this rank, send to next rank (if next rank exists)\r",
                                                                    "if props['RANK'] != link.hub.RankID.Name:\r",
                                                                    "    if link.SndPromo is not None:\r",
                                                                    "        #log.warning(\"Rank: %s, Member rank: %s, Member ID: %s\" % (link.hub.RankID.Name, props['RANK'], props['ID']))\r",
                                                                    "        link.SndPromo(props)\r",
                                                                    "    else:\r",
                                                                    "        log.warning(\"Input member's rank not found in model.\")\r",
                                                                    "    return\r",
                                                                    "\r",
                                                                    "#log.warning(\"member %s enter %s\" % (props['ID'], link.hub.RankID.Name))\r",
                                                                    "\r",
                                                                    "#cancel insert flag\r",
                                                                    "if 'INSERT' in props:\r",
                                                                    "    del props['INSERT']\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "#get id\r",
                                                                    "ID = props['ID']\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "#update props (not all usual props are updated for initial pop)\r",
                                                                    "props['OCC'] = link.hub.RankID.Occupation\r",
                                                                    "props['CADRE'] = link.hub.RankID.Cadre\r",
                                                                    "\r",
                                                                    "#add to in-rank\r",
                                                                    "link.hub.data.InRank[ID] = props\r",
                                                                    "link.hub.data.InRankCount += 1\r",
                                                                    "\r",
                                                                    "#insert at Min-TIR delay step\r",
                                                                    "link.MinTIRDelay(props)\r",
                                                                    "\r",
                                                                    "#setup attrition\r",
                                                                    "link.SetupAttrition(props)\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1349,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Insert",
                                                                "outgoing_links": {
                                                                    "MinTIRDelay": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1350,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": 13.558717964465075,
                                                                                    "y": -31.554183083148093
                                                                                }
                                                                            }
                                                                        ]
                                                                    },
                                                                    "SetupAttrition": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1348,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "SndPromo": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1341,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": 31.94937653742584,
                                                                                    "y": -28.477348338185028
                                                                                }
                                                                            }
                                                                        ]
                                                                    },
                                                                    "StartTraining": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1335,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1334,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -29.989434128890377,
                                                                    "y": -29.305548588756988
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#if member entered this rank as initial pop, cancel the flag here\r",
                                                                    "#(no more treatment as initial_pop once processed through initial rank)\r",
                                                                    "if 'INSERT' in props:\r",
                                                                    "    del props['INSERT']\r",
                                                                    "\r",
                                                                    "#delay to Min TIR (if required)\r",
                                                                    "TIRdays = (link.hub.datetime.date_time - props['DOP']).days\r",
                                                                    "daysLeft = link.hub.RankInfo.MinTIR*365.25 - TIRdays\r",
                                                                    "\r",
                                                                    "if daysLeft > 0.0:\r",
                                                                    "    signal(link.MetMinTIR, props, delay(days = daysLeft))\r",
                                                                    "else:\r",
                                                                    "    link.MetMinTIR(props)\r",
                                                                    "        "
                                                                ]
                                                            },
                                                            "key": 1350,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "MinTIRDelay",
                                                                "outgoing_links": {
                                                                    "MetMinTIR": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1337,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1334,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 13.542800192312592,
                                                                    "y": -39.313536257975215
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "dict": [
                                                                    [
                                                                        "InRank",
                                                                        [
                                                                            0
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "InTraining",
                                                                        [
                                                                            0
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "Promotable",
                                                                        [
                                                                            0
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "Time",
                                                                        "gANdcQBjZGF0ZXRpbWUKZGF0ZXRpbWUKcQFDCgfjBgEJAAAAAABxAoVxA1JxBGEu"
                                                                    ],
                                                                    [
                                                                        "Releases",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "Promotions",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "Deployed",
                                                                        [
                                                                            0
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "Positions",
                                                                        [
                                                                            20
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "CTouts",
                                                                        []
                                                                    ]
                                                                ],
                                                                "display_order": "of_creation",
                                                                "pickled_keys": [
                                                                    "Time"
                                                                ]
                                                            },
                                                            "key": 1351,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "record",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -2.318244754210149,
                                                                    "y": -2.2214258111749743
                                                                },
                                                                "size": {
                                                                    "height": 5.803571428571428,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "data"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {
                                                                    "startup": 0
                                                                },
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "link.hub.record.InRank.append(link.hub.data.InRankCount)\r",
                                                                    "link.hub.record.InTraining.append(link.hub.data.InTrainingCount)\r",
                                                                    "link.hub.record.Promotable.append(link.hub.data.PromotableCount)\r",
                                                                    "link.hub.record.Deployed.append(link.hub.library.count_deployed())\r",
                                                                    "link.hub.record.Time.append(link.hub.datetime.date_time)\r",
                                                                    "link.hub.record.Positions.append(link.hub.RankInfo.Positions)\r",
                                                                    "\r",
                                                                    "link.hub.record.Releases.append(0)\r",
                                                                    "link.hub.record.CTouts.append(0)\r",
                                                                    "link.hub.record.Promotions.append(0)\r",
                                                                    "\r",
                                                                    "signal(self, (), delay(days = 30.44))"
                                                                ]
                                                            },
                                                            "key": 1352,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Record",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1334,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 9.0110398583115,
                                                                    "y": -14.067710898295612
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "script_lines": [
                                                                    "def configure():",
                                                                    "    axes = setup_axes(1, 1)",
                                                                    "\r",
                                                                    "    axes.set_xlabel('Time')",
                                                                    "    axes.set_ylabel('Population')",
                                                                    "",
                                                                    "    ",
                                                                    "",
                                                                    "def plot():\r",
                                                                    "    \r",
                                                                    "    lastTime = link.record.Time[-1]\r",
                                                                    "    ",
                                                                    "    axes.fill(link.record.Time + [lastTime], link.record.InRank + [0], 'grey', alpha = 0.5, label = 'In Rank')\r",
                                                                    "    axes.fill(link.record.Time + [lastTime], link.record.InTraining + [0], 'r', alpha = 0.3, label = 'In Training')\r",
                                                                    "    axes.fill(link.record.Time + [lastTime], link.record.Promotable + [0], 'b', alpha = 0.3, label = 'Promotable')\r",
                                                                    "    axes.fill(link.record.Time + [lastTime], link.record.Deployed + [0], 'black', alpha = 0.6, label = 'Deployed')",
                                                                    "    axes.plot(link.record.Time, link.record.Positions, 'k', linestyle = 'dashed', label = 'Positions', linewidth = 3)\r",
                                                                    "\r",
                                                                    "    handles, labels = axes.get_legend_handles_labels()\r",
                                                                    "    axes.legend(handles, labels, loc = 9, ncol = 3, bbox_to_anchor = (0.5, 1.12))",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1353,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "plot",
                                                                "outgoing_links": {
                                                                    "record": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1351,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 16.366223339152167,
                                                                    "y": 2.484834311425601
                                                                },
                                                                "size": {
                                                                    "height": 21.07142857142857,
                                                                    "scale_3d": 1.0,
                                                                    "width": 19.910714285714285
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "plot"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "positions, attrRate, minTIR, pushPromo, ctRate",
                                                                "roles_and_prioritizing": {
                                                                    "setup": 3
                                                                },
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "link.hub.RankInfo.Positions = positions\r",
                                                                    "link.hub.RankInfo.AttrRate = attrRate\r",
                                                                    "link.hub.RankInfo.MinTIR = minTIR\r",
                                                                    "link.hub.RankInfo.PushPromote = pushPromo\r",
                                                                    "link.hub.RankInfo.CTRate = ctRate\r",
                                                                    "\r",
                                                                    "link.hub.RankID.Name = link.hub._rank_.get_name()"
                                                                ]
                                                            },
                                                            "key": 1354,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Setup",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1334,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 3.2430370494555407,
                                                                    "y": -19.466952743026894
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1355,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "Release",
                                                                "outgoing_links": {
                                                                    "Release": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1199,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": 42.15465674825153,
                                                                                    "y": -14.311766179961941
                                                                                }
                                                                            }
                                                                        ]
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 41.33403873965582,
                                                                    "y": -63.389691111668604
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {
                                                                "children": [
                                                                    {
                                                                        "content": {
                                                                            "parameters": "props",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "ID = props['ID']\r",
                                                                                "props['IN_TRAINING'] = True\r",
                                                                                "\r",
                                                                                "#add to training list\r",
                                                                                "link.hub.Data.InTraining[ID] = props\r",
                                                                                "\r",
                                                                                "#go on waitlist\r",
                                                                                "link.hub.Data.Waitlist.append(ID)\r",
                                                                                "\r",
                                                                                "\r",
                                                                                "\r",
                                                                                "\r",
                                                                                "    \r",
                                                                                "    "
                                                                            ]
                                                                        },
                                                                        "key": 1357,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Arrive",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1360,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -16.694797152199428,
                                                                                "y": -34.31994988357029
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "dict": [
                                                                                [
                                                                                    "DurationDays",
                                                                                    20
                                                                                ],
                                                                                [
                                                                                    "MinSessionSize",
                                                                                    1
                                                                                ],
                                                                                [
                                                                                    "MaxSessionSize",
                                                                                    5
                                                                                ],
                                                                                [
                                                                                    "SuccessRate",
                                                                                    1
                                                                                ],
                                                                                [
                                                                                    "SessionSchedule",
                                                                                    "gANdcQBLCEsPhnEBYS4="
                                                                                ]
                                                                            ],
                                                                            "display_order": "of_creation",
                                                                            "pickled_keys": [
                                                                                "SessionSchedule"
                                                                            ]
                                                                        },
                                                                        "key": 1358,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Input",
                                                                            "outgoing_links": {},
                                                                            "position": {
                                                                                "x": -14.664036274121262,
                                                                                "y": -0.76648840428639
                                                                            },
                                                                            "size": {
                                                                                "height": 6.5476190476190474,
                                                                                "scale_3d": 1.0,
                                                                                "width": 9.523809523809524
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "data"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "dict": [
                                                                                [
                                                                                    "InTraining",
                                                                                    {}
                                                                                ],
                                                                                [
                                                                                    "Waitlist",
                                                                                    []
                                                                                ],
                                                                                [
                                                                                    "Attendance",
                                                                                    []
                                                                                ],
                                                                                [
                                                                                    "StartDates",
                                                                                    []
                                                                                ],
                                                                                [
                                                                                    "SessionIdx",
                                                                                    0
                                                                                ]
                                                                            ],
                                                                            "display_order": "of_creation",
                                                                            "pickled_keys": []
                                                                        },
                                                                        "key": 1359,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Data",
                                                                            "outgoing_links": {},
                                                                            "position": {
                                                                                "x": -4.235163886363756,
                                                                                "y": -0.7590424824417763
                                                                            },
                                                                            "size": {
                                                                                "height": 6.607142857142857,
                                                                                "scale_3d": 1.0,
                                                                                "width": 8.660714285714285
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "data"
                                                                    },
                                                                    {
                                                                        "content": {},
                                                                        "key": 1360,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "hub",
                                                                            "outgoing_links": {
                                                                                "Data": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1359,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "Input": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1358,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "Record": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1366,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "datetime": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1364,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "library": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1369,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -1.135639561950389,
                                                                                "y": -13.488105952112994
                                                                            },
                                                                            "size": {
                                                                                "height": 1.5,
                                                                                "scale_3d": 1.0,
                                                                                "width": 1.5
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "hub"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {
                                                                                "reset": 0
                                                                            },
                                                                            "script_imports": {
                                                                                "datetime": [
                                                                                    "datetime",
                                                                                    "datetime"
                                                                                ]
                                                                            },
                                                                            "script_lines": [
                                                                                "link.hub.Data.InTraining = {}\r",
                                                                                "link.hub.Data.Waitlist = []\r",
                                                                                "link.hub.Data.Attendance = []\r",
                                                                                "link.hub.Data.StartDates = []\r",
                                                                                "link.hub.Data.SessionIdx = 0\r",
                                                                                "\r",
                                                                                "startDate = datetime(2019,6,1,9,0,0)\r",
                                                                                "link.hub.datetime.set_date_time(startDate)\r",
                                                                                "\r",
                                                                                "link.hub.Record.Waitlist = [0]\r",
                                                                                "link.hub.Record.Time = [startDate]\r",
                                                                                ""
                                                                            ]
                                                                        },
                                                                        "key": 1361,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Reset",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1360,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 9.448075269869122,
                                                                                "y": -13.073071682303503
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {},
                                                                        "key": 1362,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 1,
                                                                            "name": "TrainRequest",
                                                                            "outgoing_links": {
                                                                                "Arrive": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1357,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -20.800874878523683,
                                                                                "y": -36.48950085353416
                                                                            },
                                                                            "size": {
                                                                                "height": 0.5,
                                                                                "scale_3d": 1.0,
                                                                                "width": 0.5
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "node"
                                                                    },
                                                                    {
                                                                        "content": {},
                                                                        "key": 1363,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 1,
                                                                            "name": "SndTrainFinish",
                                                                            "outgoing_links": {
                                                                                "FinishTraining": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1336,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 27.97851400511773,
                                                                                "y": -36.629572966635514
                                                                            },
                                                                            "size": {
                                                                                "height": 0.5,
                                                                                "scale_3d": 1.0,
                                                                                "width": 0.5
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "node"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "date_time": {
                                                                                "day": 1,
                                                                                "hour": 9,
                                                                                "minute": 0,
                                                                                "month": 6,
                                                                                "second": 0,
                                                                                "year": 2019
                                                                            }
                                                                        },
                                                                        "key": 1364,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "datetime",
                                                                            "outgoing_links": {},
                                                                            "position": {
                                                                                "x": -11.68177009004484,
                                                                                "y": -11.093761528465397
                                                                            },
                                                                            "size": {
                                                                                "height": 3.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 6.2
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "datetime"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "script_lines": [
                                                                                "def configure():\r",
                                                                                "    axes = setup_axes(1, 1)",
                                                                                "\r",
                                                                                "    \r",
                                                                                "",
                                                                                "",
                                                                                "def plot():\r",
                                                                                "    \r",
                                                                                "    axes = setup_axes(1, 1)\r",
                                                                                "    axes.set_xlabel('Time (years)')\r",
                                                                                "    axes.set_ylabel('Number of people')\r",
                                                                                "    \r",
                                                                                "    #don't plot if data is empty\r",
                                                                                "    if len(link.hub.Record.Waitlist) <= 1:\r",
                                                                                "        return\r",
                                                                                "\r",
                                                                                "    #plot the waitlist\r",
                                                                                "    lastTime = link.hub.Record.Time[-1]\r",
                                                                                "    axes.fill(link.hub.Record.Time + [lastTime], link.hub.Record.Waitlist + [0], 'b', alpha = 0.3, label = 'Waitlist')",
                                                                                "    axes.figure.autofmt_xdate()\r",
                                                                                "    \r",
                                                                                "    \r",
                                                                                "    #plot the session attendance\r",
                                                                                "    height = link.hub.Data.Attendance\r",
                                                                                "    width = [link.hub.Input.DurationDays]*len(height)\r",
                                                                                "    left = link.hub.Data.StartDates\r",
                                                                                "    y_pos = [0]*len(height)\r",
                                                                                "    axes.barh(y_pos, width, height = height, left = left, color = 'green', alpha = 0.6, label = 'Session Attendance')\r",
                                                                                "    \r",
                                                                                "    #legend\r",
                                                                                "    handles, labels = axes.get_legend_handles_labels()\r",
                                                                                "    axes.legend(handles, labels, loc = 9, ncol = 3, bbox_to_anchor = (0.5, 1.12))"
                                                                            ]
                                                                        },
                                                                        "key": 1365,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Attendance",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1360,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 18.05520745979187,
                                                                                "y": -1.1322048215124676
                                                                            },
                                                                            "size": {
                                                                                "height": 16.2,
                                                                                "scale_3d": 1.0,
                                                                                "width": 15.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "plot"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "dict": [
                                                                                [
                                                                                    "Waitlist",
                                                                                    [
                                                                                        0
                                                                                    ]
                                                                                ],
                                                                                [
                                                                                    "Time",
                                                                                    "gANdcQBjZGF0ZXRpbWUKZGF0ZXRpbWUKcQFDCgfjBgEJAAAAAABxAoVxA1JxBGEu"
                                                                                ]
                                                                            ],
                                                                            "display_order": "of_creation",
                                                                            "pickled_keys": [
                                                                                "Time"
                                                                            ]
                                                                        },
                                                                        "key": 1366,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Record",
                                                                            "outgoing_links": {},
                                                                            "position": {
                                                                                "x": 5.519563999613053,
                                                                                "y": -0.7859267560572475
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "data"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {
                                                                                "startup": 0
                                                                            },
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "link.hub.Record.Waitlist.append(len(link.hub.Data.Waitlist))\r",
                                                                                "link.hub.Record.Time.append(link.hub.datetime.date_time)\r",
                                                                                "\r",
                                                                                "signal(self, (), delay(days = 7))"
                                                                            ]
                                                                        },
                                                                        "key": 1367,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Record",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1360,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 9.55578961375507,
                                                                                "y": -7.625327065521719
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "duration, minSessionSize, maxSessionSize, successRate, sessionSchedule",
                                                                            "roles_and_prioritizing": {
                                                                                "setup": 3
                                                                            },
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "link.hub.Input.DurationDays = duration\r",
                                                                                "link.hub.Input.MinSessionSize = minSessionSize\r",
                                                                                "link.hub.Input.MaxSessionSize = maxSessionSize\r",
                                                                                "link.hub.Input.SuccessRate = successRate\r",
                                                                                "link.hub.Input.SessionSchedule = sessionSchedule"
                                                                            ]
                                                                        },
                                                                        "key": 1368,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Setup",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1360,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 9.417960966070991,
                                                                                "y": -18.46107648244264
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "script_imports": {
                                                                                "datetime": [
                                                                                    "datetime",
                                                                                    "datetime"
                                                                                ]
                                                                            },
                                                                            "script_lines": [
                                                                                "def get_waitlist():\r",
                                                                                "    inTrng = link.hub.Data.InTraining\r",
                                                                                "    return [id for id in link.hub.Data.Waitlist\r",
                                                                                "        if inTrng[id]['RELEASED']]\r",
                                                                                "        \r",
                                                                                "\r",
                                                                                "\r",
                                                                                "def get_trainable_on_waitlist():\r",
                                                                                "    inTrng = link.hub.Data.InTraining\r",
                                                                                "    return [id for id in link.hub.Data.Waitlist\r",
                                                                                "        if not inTrng[id]['RESERVED']\r",
                                                                                "        and not inTrng[id]['DEPLOYED']\r",
                                                                                "        and not inTrng[id]['RELEASED']]\r",
                                                                                "    \r",
                                                                                "def count_trainable_on_waitlist():\r",
                                                                                "    return len(get_trainable_on_waitlist())\r",
                                                                                "    \r",
                                                                                "    \r",
                                                                                "def get_start_session_idx():\r",
                                                                                "    #assumes session schedule is in order\r",
                                                                                "    #returns the index of the first session based on the current datetime\r",
                                                                                "    \r",
                                                                                "    year = link.hub.datetime.year\r",
                                                                                "    \r",
                                                                                "    startDates = [datetime(year, m, d, 8, 0, 0) for m,d in link.hub.Input.SessionSchedule]\r",
                                                                                "    \r",
                                                                                "    delays = [(t - link.hub.datetime.get_date_time()).total_seconds() for t in startDates]\r",
                                                                                "    \r",
                                                                                "    #return the smallest positive delay\r",
                                                                                "    for i in range(len(delays)):\r",
                                                                                "        if delays[i] > 0:\r",
                                                                                "            return i\r",
                                                                                "   \r",
                                                                                "    #if no more sessions this year, return first session for next year\r",
                                                                                "    return 0\r",
                                                                                "    "
                                                                            ]
                                                                        },
                                                                        "key": 1369,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "library",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1360,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -11.156992490107825,
                                                                                "y": -15.437735791363107
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "library"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {
                                                                                "startup": 0
                                                                            },
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "link.hub.Data.SessionIdx = link.hub.library.get_start_session_idx()\r",
                                                                                "\r",
                                                                                "link.DelayToSessionStart()\r",
                                                                                "\r",
                                                                                "\r",
                                                                                ""
                                                                            ]
                                                                        },
                                                                        "key": 1370,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "GetFirstSession",
                                                                            "outgoing_links": {
                                                                                "DelayToSessionStart": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1371,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1360,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -6.831928977706746,
                                                                                "y": -34.44116769677284
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "nextYr = False",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {
                                                                                "datetime": [
                                                                                    "datetime",
                                                                                    "datetime"
                                                                                ]
                                                                            },
                                                                            "script_lines": [
                                                                                "session = link.hub.Input.SessionSchedule[link.hub.Data.SessionIdx]\r",
                                                                                "\r",
                                                                                "year = link.hub.datetime.year\r",
                                                                                "month = session[0]\r",
                                                                                "day = session[1]\r",
                                                                                "\r",
                                                                                "delayDays = (datetime(year, month, day, 8, 0, 0) - link.hub.datetime.date_time).total_seconds()/86400.0\r",
                                                                                "\r",
                                                                                "if delayDays < 0.0 or nextYr:\r",
                                                                                "    delayDays = (datetime(year + 1, month, day, 8, 0, 0) - link.hub.datetime.date_time).total_seconds()/86400.0\r",
                                                                                "\r",
                                                                                "signal(link.StartSession, (), delay(days = delayDays))\r",
                                                                                ""
                                                                            ]
                                                                        },
                                                                        "key": 1371,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "DelayToSessionStart",
                                                                            "outgoing_links": {
                                                                                "StartSession": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1372,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1360,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 1.5855408583978676,
                                                                                "y": -34.353601749967424
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "input = link.hub.Input\r",
                                                                                "data = link.hub.Data\r",
                                                                                "\r",
                                                                                "#get the list of potential session starts, up to max session size\r",
                                                                                "sessionList = link.hub.library.get_trainable_on_waitlist()[:input.MaxSessionSize]\r",
                                                                                "\r",
                                                                                "#if at least have the min session size\r",
                                                                                "if len(sessionList) >= input.MinSessionSize:\r",
                                                                                "    \r",
                                                                                "    #remove ids from waitlist and set status to attending training\r",
                                                                                "    for id in sessionList:\r",
                                                                                "        data.Waitlist.remove(id)\r",
                                                                                "        data.InTraining[id]['ATTENDING_TRNG'] = True\r",
                                                                                "    \r",
                                                                                "    #track attendance and start date\r",
                                                                                "    data.Attendance.append(len(sessionList))\r",
                                                                                "    data.StartDates.append(link.hub.datetime.date_time)\r",
                                                                                "    \r",
                                                                                "    #signal to finish the course after course duration\r",
                                                                                "    signal(link.Finish, sessionList, delay(days = input.DurationDays))\r",
                                                                                "\r",
                                                                                "#else record zero-loaded session\r",
                                                                                "else:\r",
                                                                                "    data.Attendance.append(0)\r",
                                                                                "    data.StartDates.append(link.hub.datetime.date_time)\r",
                                                                                "    \r",
                                                                                "#setup next session\r",
                                                                                "link.NextSession()"
                                                                            ]
                                                                        },
                                                                        "key": 1372,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "StartSession",
                                                                            "outgoing_links": {
                                                                                "Finish": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1373,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "NextSession": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1374,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1360,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 10.16430095764344,
                                                                                "y": -34.388760602833166
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "sessionList",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "input = link.hub.Input\r",
                                                                                "data = link.hub.Data\r",
                                                                                "#for each session attendee\r",
                                                                                "for ID in sessionList:\r",
                                                                                "    \r",
                                                                                "    if ID in data.InTraining:\r",
                                                                                "    \r",
                                                                                "        #update properties\r",
                                                                                "        props = data.InTraining[ID]\r",
                                                                                "        props['ATTENDING_TRNG'] = False\r",
                                                                                "        props['IN_TRAINING'] = False\r",
                                                                                "        props['TRAINING_COMPLETED'] = True\r",
                                                                                "\r",
                                                                                "        #if pass\r",
                                                                                "        if random.random() < input.SuccessRate:\r",
                                                                                "            result = 'P'\r",
                                                                                "        #else fail\r",
                                                                                "        else:\r",
                                                                                "            result = 'F'\r",
                                                                                "            props['TRAINING_FAILED'] = True\r",
                                                                                "                 \r",
                                                                                "        #remove\r",
                                                                                "        del data.InTraining[ID]\r",
                                                                                "\r",
                                                                                "        link.SndTrainFinish(props, result)"
                                                                            ]
                                                                        },
                                                                        "key": 1373,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Finish",
                                                                            "outgoing_links": {
                                                                                "SndTrainFinish": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1363,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1360,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 18.44440284604379,
                                                                                "y": -34.377498855660235
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "#go to next session\r",
                                                                                "link.hub.Data.SessionIdx += 1\r",
                                                                                "\r",
                                                                                "if link.hub.Data.SessionIdx < len(link.hub.Input.SessionSchedule):\r",
                                                                                "    link.DelayToSessionStart(nextYr = False)\r",
                                                                                "    \r",
                                                                                "else:\r",
                                                                                "    link.hub.Data.SessionIdx = 0\r",
                                                                                "    link.DelayToSessionStart(nextYr = True)"
                                                                            ]
                                                                        },
                                                                        "key": 1374,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "NextSession",
                                                                            "outgoing_links": {
                                                                                "DelayToSessionStart": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1371,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1360,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 5.983814681569553,
                                                                                "y": -42.51810526522001
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {},
                                                                        "key": 1375,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 1,
                                                                            "name": "StopTraining",
                                                                            "outgoing_links": {
                                                                                "Release": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1376,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -21.034880837044263,
                                                                                "y": -46.91947031151817
                                                                            },
                                                                            "size": {
                                                                                "height": 0.5,
                                                                                "scale_3d": 1.0,
                                                                                "width": 0.5
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "node"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "ID",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "if ID in link.hub.Data.InTraining:\r",
                                                                                "    del link.hub.Data.InTraining[ID]\r",
                                                                                "    \r",
                                                                                "if ID in link.hub.Data.Waitlist:\r",
                                                                                "    link.hub.Data.Waitlist.remove(ID)"
                                                                            ]
                                                                        },
                                                                        "key": 1376,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "StopTraining",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1360,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -16.869280390907246,
                                                                                "y": -44.82919111941537
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "print(link.library.get_waitlist())"
                                                                            ]
                                                                        },
                                                                        "key": 1377,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "function",
                                                                            "outgoing_links": {
                                                                                "library": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1369,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -9.936127294350463,
                                                                                "y": -23.705182031625434
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    }
                                                                ],
                                                                "ifx_ports_left": [
                                                                    1362,
                                                                    1375
                                                                ],
                                                                "ifx_ports_right": [
                                                                    1363
                                                                ],
                                                                "image_id": null,
                                                                "proxy_position": {
                                                                    "x": -0.6806719555009858,
                                                                    "y": 1.7989187395383204
                                                                },
                                                                "rotation_2d": 0.0,
                                                                "rotation_3d": {
                                                                    "pitch": 0.0,
                                                                    "roll": 0.0,
                                                                    "yaw": 0.0
                                                                }
                                                            },
                                                            "key": 1356,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Training",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -8.874374904552498,
                                                                    "y": -39.957315946695566
                                                                },
                                                                "size": {
                                                                    "height": 3.392857142857143,
                                                                    "scale_3d": 1.0,
                                                                    "width": 6.398809523809524
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "actor"
                                                        },
                                                        {
                                                            "content": {
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "def count_deployed():\r",
                                                                    "    \r",
                                                                    "    inRank = link.hub.data.InRank\r",
                                                                    "\r",
                                                                    "    return len([id for id in inRank if inRank[id]['DEPLOYED']])\r",
                                                                    "    \r",
                                                                    "    "
                                                                ]
                                                            },
                                                            "key": 1378,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "library",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1334,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 3.2885695338145924,
                                                                    "y": -24.435898619316763
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "library"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "num = 1200\r",
                                                                    "print('In rank', sum(link.record.InRank[-num:])/num)\r",
                                                                    "print('Promotable', sum(link.record.Promotable[-num:])/num)\r",
                                                                    "print('Promos per yr', sum(link.record.Promotions[-num:])/len(link.record.Promotions[-num:])*12)\r",
                                                                    "print('Releases per yr', sum(link.record.Releases[-num:])/len(link.record.Releases[-num:])*12)\r",
                                                                    "print('CTs out per yr', sum(link.record.CTouts[-num:])/len(link.record.CTouts[-num:])*12)\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1379,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "PrintSummary",
                                                                "outgoing_links": {
                                                                    "record": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1351,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 4.876750797335997,
                                                                    "y": 8.519222745922649
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {
                                                                    "finish": 0
                                                                },
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "rank = ''.join(filter(str.isalnum, link.hub.RankID.Name))\r",
                                                                    "cadre = link.hub.RankID.Cadre\r",
                                                                    "key = cadre + '_' + rank\r",
                                                                    "\r",
                                                                    "save = {}\r",
                                                                    "save[key + '_InRank'] = link.hub.record.InRank\r",
                                                                    "save[key + '_InTraining'] = link.hub.record.InTraining\r",
                                                                    "save[key + '_Deployed'] = link.hub.record.Deployed\r",
                                                                    "save[key + '_Promotable'] = link.hub.record.Promotable\r",
                                                                    "\r",
                                                                    "batch.set_replication_data(**save)"
                                                                ]
                                                            },
                                                            "key": 1380,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Finish",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1334,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 9.092798858269987,
                                                                    "y": -19.551756559137136
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        }
                                                    ],
                                                    "ifx_ports_left": [
                                                        1345,
                                                        1346,
                                                        1342
                                                    ],
                                                    "ifx_ports_right": [
                                                        1341,
                                                        1344,
                                                        1343,
                                                        1355
                                                    ],
                                                    "image_id": null,
                                                    "proxy_position": {
                                                        "x": -4.762093403985616,
                                                        "y": 3.5569417058638875
                                                    },
                                                    "rotation_2d": 0.0,
                                                    "rotation_3d": {
                                                        "pitch": 0.0,
                                                        "roll": 0.0,
                                                        "yaw": 0.0
                                                    }
                                                },
                                                "key": 1327,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "Col",
                                                    "outgoing_links": {},
                                                    "position": {
                                                        "x": 33.985247007390576,
                                                        "y": -7.1364270389435145
                                                    },
                                                    "size": {
                                                        "height": 5.595238095238095,
                                                        "scale_3d": 1.0,
                                                        "width": 6.19047619047619
                                                    },
                                                    "visible": true
                                                },
                                                "type": "actor"
                                            }
                                        ],
                                        "ifx_ports_left": [
                                            1217,
                                            1207
                                        ],
                                        "ifx_ports_right": [
                                            1215,
                                            1214
                                        ],
                                        "image_id": null,
                                        "proxy_position": {
                                            "x": 2.907396421569733,
                                            "y": 23.83177218446786
                                        },
                                        "rotation_2d": 0.0,
                                        "rotation_3d": {
                                            "pitch": 0.0,
                                            "roll": 0.0,
                                            "yaw": 0.0
                                        }
                                    },
                                    "key": 1136,
                                    "part_frame": {
                                        "comment": "",
                                        "detail_level": "full",
                                        "frame_style": "normal",
                                        "ifx_level": 0,
                                        "name": "RegForce",
                                        "outgoing_links": {},
                                        "position": {
                                            "x": 17.476190878979065,
                                            "y": -6.368314710785462
                                        },
                                        "size": {
                                            "height": 3.4226190476190474,
                                            "scale_3d": 1.0,
                                            "width": 7.113095238095238
                                        },
                                        "visible": true
                                    },
                                    "type": "actor"
                                },
                                {
                                    "content": {},
                                    "key": 1381,
                                    "part_frame": {
                                        "comment": "",
                                        "detail_level": "full",
                                        "frame_style": "normal",
                                        "ifx_level": 1,
                                        "name": "Deploy",
                                        "outgoing_links": {
                                            "hub": {
                                                "bold": false,
                                                "declutter": false,
                                                "target_path": 1382,
                                                "visible": true,
                                                "waypoints": []
                                            }
                                        },
                                        "position": {
                                            "x": -16.861394654043103,
                                            "y": -19.752389802123545
                                        },
                                        "size": {
                                            "height": 0.5,
                                            "scale_3d": 1.0,
                                            "width": 0.5
                                        },
                                        "visible": true
                                    },
                                    "type": "node"
                                },
                                {
                                    "content": {},
                                    "key": 1382,
                                    "part_frame": {
                                        "comment": "",
                                        "detail_level": "full",
                                        "frame_style": "normal",
                                        "ifx_level": 0,
                                        "name": "hub",
                                        "outgoing_links": {
                                            "DeployResources": {
                                                "bold": false,
                                                "declutter": false,
                                                "target_path": 1384,
                                                "visible": true,
                                                "waypoints": []
                                            },
                                            "ReleaseResources": {
                                                "bold": false,
                                                "declutter": false,
                                                "target_path": 1386,
                                                "visible": true,
                                                "waypoints": []
                                            },
                                            "RequestResources": {
                                                "bold": false,
                                                "declutter": false,
                                                "target_path": 1383,
                                                "visible": true,
                                                "waypoints": []
                                            },
                                            "ReserveResources": {
                                                "bold": false,
                                                "declutter": false,
                                                "target_path": 1387,
                                                "visible": true,
                                                "waypoints": []
                                            },
                                            "ReturnResources": {
                                                "bold": false,
                                                "declutter": false,
                                                "target_path": 1385,
                                                "visible": true,
                                                "waypoints": []
                                            }
                                        },
                                        "position": {
                                            "x": -12.741500846212022,
                                            "y": -18.889957122250888
                                        },
                                        "size": {
                                            "height": 1.5,
                                            "scale_3d": 1.0,
                                            "width": 1.5
                                        },
                                        "visible": true
                                    },
                                    "type": "hub"
                                },
                                {
                                    "content": {
                                        "parameters": "durationDays, resReq = None, source = 'reg'",
                                        "roles_and_prioritizing": {},
                                        "script_imports": {},
                                        "script_lines": [
                                            "if source == 'reg':\r",
                                            "    return link.DeployHub.RequestResources(durationDays, resReq), {}\r",
                                            "\r",
                                            "elif source == 'res':\r",
                                            "    return {}, link.DeployHub2.RequestResources(durationDays, resReq)\r",
                                            "    \r",
                                            "elif source == 'reg-aug':\r",
                                            "    #request resources from reg force\r",
                                            "    resReg = link.DeployHub.RequestResources(durationDays, resReq)\r",
                                            "    \r",
                                            "    #copy the requirement and decrement each found resource from the requirement\r",
                                            "    req = dict(resReq)\r",
                                            "    for v in resReg.values():\r",
                                            "        req[v['RANK']] -= 1\r",
                                            "        \r",
                                            "        #remove the entry if it has reached a 0 requirement\r",
                                            "        if req[v['RANK']] == 0:\r",
                                            "            del req[v['RANK']]\r",
                                            "    \r",
                                            "    #if remaining requirement is nill (all resources found in reg f)\r",
                                            "    #return the original resource list from the reg f request\r",
                                            "    if req == {}:\r",
                                            "        return resReg, {}\r",
                                            "    \r",
                                            "    #else request to fill the remaining requirement from the res F and return both\r",
                                            "    else:\r",
                                            "        return resReg, link.DeployHub2.RequestResources(durationDays, req)\r",
                                            "\r",
                                            "        \r",
                                            "        \r",
                                            "\r",
                                            "\r",
                                            ""
                                        ]
                                    },
                                    "key": 1383,
                                    "part_frame": {
                                        "comment": "",
                                        "detail_level": "minimal",
                                        "frame_style": "normal",
                                        "ifx_level": 0,
                                        "name": "RequestResources",
                                        "outgoing_links": {
                                            "DeployHub": {
                                                "bold": false,
                                                "declutter": false,
                                                "target_path": 1207,
                                                "visible": true,
                                                "waypoints": []
                                            },
                                            "DeployHub2": {
                                                "bold": false,
                                                "declutter": false,
                                                "target_path": 1405,
                                                "visible": true,
                                                "waypoints": []
                                            }
                                        },
                                        "position": {
                                            "x": -5.572485510625388,
                                            "y": -6.982083633899818
                                        },
                                        "size": {
                                            "height": 5.1,
                                            "scale_3d": 1.0,
                                            "width": 10.0
                                        },
                                        "visible": true
                                    },
                                    "type": "function"
                                },
                                {
                                    "content": {
                                        "parameters": "resReg, resRes",
                                        "roles_and_prioritizing": {},
                                        "script_imports": {},
                                        "script_lines": [
                                            "link.DeployHub.DeployResources(resReg)\r",
                                            "link.DeployHub2.DeployResources(resRes)\r",
                                            ""
                                        ]
                                    },
                                    "key": 1384,
                                    "part_frame": {
                                        "comment": "",
                                        "detail_level": "minimal",
                                        "frame_style": "normal",
                                        "ifx_level": 0,
                                        "name": "DeployResources",
                                        "outgoing_links": {
                                            "DeployHub": {
                                                "bold": false,
                                                "declutter": false,
                                                "target_path": 1207,
                                                "visible": true,
                                                "waypoints": []
                                            },
                                            "DeployHub2": {
                                                "bold": false,
                                                "declutter": false,
                                                "target_path": 1405,
                                                "visible": true,
                                                "waypoints": []
                                            }
                                        },
                                        "position": {
                                            "x": -5.581970106536318,
                                            "y": -16.898661318120613
                                        },
                                        "size": {
                                            "height": 5.1,
                                            "scale_3d": 1.0,
                                            "width": 10.0
                                        },
                                        "visible": true
                                    },
                                    "type": "function"
                                },
                                {
                                    "content": {
                                        "parameters": "resReg, resRes",
                                        "roles_and_prioritizing": {},
                                        "script_imports": {},
                                        "script_lines": [
                                            "link.DeployHub.ReturnResources(resReg)\r",
                                            "link.DeployHub2.ReturnResources(resRes)"
                                        ]
                                    },
                                    "key": 1385,
                                    "part_frame": {
                                        "comment": "",
                                        "detail_level": "minimal",
                                        "frame_style": "normal",
                                        "ifx_level": 0,
                                        "name": "ReturnResources",
                                        "outgoing_links": {
                                            "DeployHub": {
                                                "bold": false,
                                                "declutter": false,
                                                "target_path": 1207,
                                                "visible": true,
                                                "waypoints": []
                                            },
                                            "DeployHub2": {
                                                "bold": false,
                                                "declutter": false,
                                                "target_path": 1405,
                                                "visible": true,
                                                "waypoints": []
                                            }
                                        },
                                        "position": {
                                            "x": -5.571560350780896,
                                            "y": -21.67406561626502
                                        },
                                        "size": {
                                            "height": 5.1,
                                            "scale_3d": 1.0,
                                            "width": 10.0
                                        },
                                        "visible": true
                                    },
                                    "type": "function"
                                },
                                {
                                    "content": {
                                        "parameters": "resReg, resRes",
                                        "roles_and_prioritizing": {},
                                        "script_imports": {},
                                        "script_lines": [
                                            "link.DeployHub.ReleaseResources(resReg)\r",
                                            "link.DeployHub2.ReleaseResources(resRes)"
                                        ]
                                    },
                                    "key": 1386,
                                    "part_frame": {
                                        "comment": "",
                                        "detail_level": "minimal",
                                        "frame_style": "normal",
                                        "ifx_level": 0,
                                        "name": "ReleaseResources",
                                        "outgoing_links": {
                                            "DeployHub": {
                                                "bold": false,
                                                "declutter": false,
                                                "target_path": 1207,
                                                "visible": true,
                                                "waypoints": []
                                            },
                                            "DeployHub2": {
                                                "bold": false,
                                                "declutter": false,
                                                "target_path": 1405,
                                                "visible": true,
                                                "waypoints": []
                                            }
                                        },
                                        "position": {
                                            "x": -5.56999062666874,
                                            "y": -26.64522400617108
                                        },
                                        "size": {
                                            "height": 5.1,
                                            "scale_3d": 1.0,
                                            "width": 10.0
                                        },
                                        "visible": true
                                    },
                                    "type": "function"
                                },
                                {
                                    "content": {
                                        "parameters": "durationDays, resReg, resRes",
                                        "roles_and_prioritizing": {},
                                        "script_imports": {},
                                        "script_lines": [
                                            "link.DeployHub.ReserveResources(durationDays, resReg)\r",
                                            "link.DeployHub2.ReserveResources(durationDays, resRes)"
                                        ]
                                    },
                                    "key": 1387,
                                    "part_frame": {
                                        "comment": "",
                                        "detail_level": "minimal",
                                        "frame_style": "normal",
                                        "ifx_level": 0,
                                        "name": "ReserveResources",
                                        "outgoing_links": {
                                            "DeployHub": {
                                                "bold": false,
                                                "declutter": false,
                                                "target_path": 1207,
                                                "visible": true,
                                                "waypoints": []
                                            },
                                            "DeployHub2": {
                                                "bold": false,
                                                "declutter": false,
                                                "target_path": 1405,
                                                "visible": true,
                                                "waypoints": []
                                            }
                                        },
                                        "position": {
                                            "x": -5.655800833830105,
                                            "y": -11.957733966686066
                                        },
                                        "size": {
                                            "height": 5.1,
                                            "scale_3d": 1.0,
                                            "width": 10.0
                                        },
                                        "visible": true
                                    },
                                    "type": "function"
                                },
                                {
                                    "content": {
                                        "children": [
                                            {
                                                "content": {
                                                    "children": [
                                                        {
                                                            "content": {},
                                                            "key": 1390,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "SndInitPop",
                                                                "outgoing_links": {
                                                                    "Enter": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1396,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 8.06813660687165,
                                                                    "y": -14.598900895401652
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {
                                                                    "startup": 1
                                                                },
                                                                "script_imports": {
                                                                    "datetime": [
                                                                        "datetime",
                                                                        "datetime"
                                                                    ]
                                                                },
                                                                "script_lines": [
                                                                    "#get personnel records\r",
                                                                    "records = link.InitPopRecords.select()\r",
                                                                    "\r",
                                                                    "#for each record\r",
                                                                    "for rec in records:\r",
                                                                    "    #create the props dictionary \r",
                                                                    "    props = {}\r",
                                                                    "    \r",
                                                                    "    #set flag to insert into model\r",
                                                                    "    props['INSERT'] = True\r",
                                                                    "    \r",
                                                                    "    props['ID'] = rec[0]\r",
                                                                    "    props['DOB'] = datetime.strptime(rec[1], \"%Y-%m-%d %H:%M:%S\")\r",
                                                                    "    props['SEX'] = rec[2]\r",
                                                                    "    props['DOH'] = datetime.strptime(rec[3], \"%Y-%m-%d %H:%M:%S\")\r",
                                                                    "    \r",
                                                                    "    props['OCC'] = rec[4]\r",
                                                                    "    props['RANK'] = rec[5]\r",
                                                                    "    props['DOP'] = datetime.strptime(rec[6], \"%Y-%m-%d %H:%M:%S\")\r",
                                                                    "    props['IN_TRAINING'] = rec[7] == 1\r",
                                                                    "    props['TRAINING_COMPLETE'] = rec[8] == 1\r",
                                                                    "    \r",
                                                                    "    link.SndInitPop(props)\r",
                                                                    "    \r",
                                                                    "    "
                                                                ]
                                                            },
                                                            "key": 1391,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "function",
                                                                "outgoing_links": {
                                                                    "InitPopRecords": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1392,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "SndInitPop": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1390,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -2.641172167266989,
                                                                    "y": -12.145446990144777
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "column_names": [
                                                                    "ID",
                                                                    "DOB",
                                                                    "SEX",
                                                                    "DOH",
                                                                    "OCC",
                                                                    "RANK",
                                                                    "DOP",
                                                                    "IN_TRAINING",
                                                                    "TRAINING_COMPLETE"
                                                                ],
                                                                "column_types": [
                                                                    "INTEGER(10)",
                                                                    "DATETIME",
                                                                    "TEXT(255)",
                                                                    "DATETIME",
                                                                    "TEXT(255)",
                                                                    "TEXT(255)",
                                                                    "DATETIME",
                                                                    "INTEGER(10)",
                                                                    "INTEGER(10)"
                                                                ],
                                                                "data": [],
                                                                "indices": {}
                                                            },
                                                            "key": 1392,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "InitPopRecords",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -2.701352145796589,
                                                                    "y": -2.0040016567794354
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "table"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "link.InitPopRecords.import_from_msaccess(link.file.filepath, 'People')\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1393,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Import",
                                                                "outgoing_links": {
                                                                    "InitPopRecords": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1392,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "file": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1394,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -14.338156855761008,
                                                                    "y": -2.136123004766041
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "filepath": "Personnel.accdb",
                                                                "relative_to_scen_folder": true
                                                            },
                                                            "key": 1394,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "file",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -14.353314222930482,
                                                                    "y": 6.529917286939677
                                                                },
                                                                "size": {
                                                                    "height": 4.821428571428571,
                                                                    "scale_3d": 1.0,
                                                                    "width": 16.75595238095238
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "file"
                                                        }
                                                    ],
                                                    "ifx_ports_left": [],
                                                    "ifx_ports_right": [
                                                        1390
                                                    ],
                                                    "image_id": null,
                                                    "proxy_position": {
                                                        "x": 0.4419391460345034,
                                                        "y": 12.228166757628967
                                                    },
                                                    "rotation_2d": 0.0,
                                                    "rotation_3d": {
                                                        "pitch": 0.0,
                                                        "roll": 0.0,
                                                        "yaw": 0.0
                                                    }
                                                },
                                                "key": 1389,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "InitPop",
                                                    "outgoing_links": {},
                                                    "position": {
                                                        "x": -16.875514449895995,
                                                        "y": -6.93264655757171
                                                    },
                                                    "size": {
                                                        "height": 2.708333333333333,
                                                        "scale_3d": 1.0,
                                                        "width": 5.9523809523809526
                                                    },
                                                    "visible": true
                                                },
                                                "type": "actor"
                                            },
                                            {
                                                "content": {
                                                    "dict": [
                                                        [
                                                            "InOccupation",
                                                            {}
                                                        ],
                                                        [
                                                            "Deployed",
                                                            []
                                                        ],
                                                        [
                                                            "DeployRatio",
                                                            0.16
                                                        ],
                                                        [
                                                            "MaxDeployRatio",
                                                            0.5
                                                        ],
                                                        [
                                                            "DeployedPYs",
                                                            0.0
                                                        ]
                                                    ],
                                                    "display_order": "of_creation",
                                                    "pickled_keys": []
                                                },
                                                "key": 1395,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "data",
                                                    "outgoing_links": {},
                                                    "position": {
                                                        "x": 13.015281330780564,
                                                        "y": 22.316534754943596
                                                    },
                                                    "size": {
                                                        "height": 6.934523809523809,
                                                        "scale_3d": 1.0,
                                                        "width": 9.94047619047619
                                                    },
                                                    "visible": true
                                                },
                                                "type": "data"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "props",
                                                    "roles_and_prioritizing": {},
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "#initialize status properties\r",
                                                        "props['RESERVED'] = False\r",
                                                        "props['DEPLOYED'] = False\r",
                                                        "props['POST_DEPLOY'] = False\r",
                                                        "props['IN_TRAINING'] = False\r",
                                                        "props['ATTENDING_TRNG'] = False\r",
                                                        "props['RELEASED'] = False\r",
                                                        "\r",
                                                        "\r",
                                                        "#add the new person to the list of people in the occupation\r",
                                                        "link.hub.data.InOccupation[props['ID']] = props\r",
                                                        "\r",
                                                        "\r",
                                                        "link.Enter(props)"
                                                    ]
                                                },
                                                "key": 1396,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "Enter",
                                                    "outgoing_links": {
                                                        "Enter": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1435,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1403,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": -4.926934187113974,
                                                        "y": -6.81547619047619
                                                    },
                                                    "size": {
                                                        "height": 4.7023809523809526,
                                                        "scale_3d": 1.0,
                                                        "width": 7.3809523809523805
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "props",
                                                    "roles_and_prioritizing": {},
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "del link.hub.data.InOccupation[props['ID']]\r",
                                                        "\r",
                                                        "#if CT release, send to other component.\r",
                                                        "if 'CT' in props:\r",
                                                        "    #send to other component\r",
                                                        "    \r",
                                                        "    #log.warning(\"Member %s CT from ResF\" % props['ID'])\r",
                                                        "    \r",
                                                        "    link.CTout(props)\r",
                                                        ""
                                                    ]
                                                },
                                                "key": 1397,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "Release",
                                                    "outgoing_links": {
                                                        "CTout": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1412,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1403,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 48.50059493053199,
                                                        "y": -14.796614547747048
                                                    },
                                                    "size": {
                                                        "height": 5.1,
                                                        "scale_3d": 1.0,
                                                        "width": 10.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "durationDays, resReq = None",
                                                    "roles_and_prioritizing": {},
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "#request resources for deployment\r",
                                                        "#ResReq is a dict where the keys are the ranks\r",
                                                        "#and the values are the number of resources requested\r",
                                                        "\r",
                                                        "\r",
                                                        "ableToDeploy = []\r",
                                                        "\r",
                                                        "#create list of all that are able to deploy given number requested at each rank\r",
                                                        "for rank in resReq:\r",
                                                        "    number = resReq[rank]\r",
                                                        "    ableToDeploy.extend(link.hub.library.get_able_to_deploy(rank, number))\r",
                                                        "\r",
                                                        "#determine limit on the number of reservists that currently can deploy based on the task duration \r",
                                                        "deployLimit = link.hub.library.get_deploy_limit(durationDays/365.2422)\r",
                                                        "\r",
                                                        "#if the set of personnel able to deploy is greater than the deployment limit\r",
                                                        "if deployLimit < len(ableToDeploy):\r",
                                                        "    \r",
                                                        "    #randomly sample a subset within the able to deploy list with size equal to the deployment limit\r",
                                                        "    ableToDeploy = random.sample(ableToDeploy, deployLimit)\r",
                                                        "\r",
                                                        "\r",
                                                        "#return a dict of reservists who can deploy for this task\r",
                                                        "\r",
                                                        "resList = {}\r",
                                                        "for id in ableToDeploy:\r",
                                                        "    resList[id] = link.hub.data.InOccupation[id]\r",
                                                        "    \r",
                                                        "return resList\r",
                                                        "    \r",
                                                        "\r",
                                                        "    \r",
                                                        "    "
                                                    ]
                                                },
                                                "key": 1398,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "RequestResources",
                                                    "outgoing_links": {
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1403,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": -0.6766591814778572,
                                                        "y": -18.766014632985886
                                                    },
                                                    "size": {
                                                        "height": 7.738095238095238,
                                                        "scale_3d": 1.0,
                                                        "width": 14.583333333333332
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "ResList",
                                                    "roles_and_prioritizing": {},
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "#deploys the resources\r",
                                                        "\r",
                                                        "for props in ResList.values():\r",
                                                        "    props['RESERVED'] = False\r",
                                                        "    props['DEPLOYED'] = True"
                                                    ]
                                                },
                                                "key": 1399,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "DeployResources",
                                                    "outgoing_links": {
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1403,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": -0.7389364992813356,
                                                        "y": -31.200915375977395
                                                    },
                                                    "size": {
                                                        "height": 6.369047619047619,
                                                        "scale_3d": 1.0,
                                                        "width": 14.910714285714285
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "ResList",
                                                    "roles_and_prioritizing": {},
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "#returns the resources post-deployment\r",
                                                        "#these resources cannot be used on another deployment\r",
                                                        "#until they are released\r",
                                                        "\r",
                                                        "for props in ResList.values():\r",
                                                        "    props['DEPLOYED'] = False\r",
                                                        "    props['POST_DEPLOY'] = True\r",
                                                        "    \r",
                                                        "    link.hub.data.Deployed.remove(props['ID'])\r",
                                                        "    \r",
                                                        "\r",
                                                        ""
                                                    ]
                                                },
                                                "key": 1400,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "ReturnResources",
                                                    "outgoing_links": {
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1403,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": -0.6080188327633725,
                                                        "y": -37.13255070614585
                                                    },
                                                    "size": {
                                                        "height": 6.845238095238095,
                                                        "scale_3d": 1.0,
                                                        "width": 14.970238095238095
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "ResList",
                                                    "roles_and_prioritizing": {},
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "#releases the resources so that they can be deployed again\r",
                                                        "#(i.e., the end of the waiver period)\r",
                                                        "\r",
                                                        "for props in ResList.values():\r",
                                                        "    props['POST_DEPLOY'] = False"
                                                    ]
                                                },
                                                "key": 1401,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "ReleaseResources",
                                                    "outgoing_links": {
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1403,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": -0.4624420298046495,
                                                        "y": -42.88175928253953
                                                    },
                                                    "size": {
                                                        "height": 7.529761904761904,
                                                        "scale_3d": 1.0,
                                                        "width": 14.970238095238095
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "durationDays, resList",
                                                    "roles_and_prioritizing": {},
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "#reserves a list of resources for a deployment, preventing\r",
                                                        "#them from attending training or being used in another deployment\r",
                                                        "\r",
                                                        "for props in resList.values():\r",
                                                        "    \r",
                                                        "    props['RESERVED'] = True\r",
                                                        "    \r",
                                                        "link.hub.data.Deployed.extend(resList.keys())\r",
                                                        "\r",
                                                        "\r",
                                                        "pys = len(resList)*durationDays/365.2422\r",
                                                        "\r",
                                                        "link.hub.data.DeployedPYs += pys\r",
                                                        "\r",
                                                        "signal(link.ResetDeployedPYs, pys, time=delay(days = 365.2422))\r",
                                                        ""
                                                    ]
                                                },
                                                "key": 1402,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "ReserveResources",
                                                    "outgoing_links": {
                                                        "ResetDeployedPYs": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1407,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1403,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": -0.8012282321925087,
                                                        "y": -25.19458343902605
                                                    },
                                                    "size": {
                                                        "height": 7.946428571428571,
                                                        "scale_3d": 1.0,
                                                        "width": 14.94047619047619
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {},
                                                "key": 1403,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "hub",
                                                    "outgoing_links": {
                                                        "data": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1395,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "library": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1404,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 13.210007511458816,
                                                        "y": 10.608924159978631
                                                    },
                                                    "size": {
                                                        "height": 1.5,
                                                        "scale_3d": 1.0,
                                                        "width": 1.5
                                                    },
                                                    "visible": true
                                                },
                                                "type": "hub"
                                            },
                                            {
                                                "content": {
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "def get_able_to_deploy(rank, number):\r",
                                                        "    \r",
                                                        "    inOcc = link.hub.data.InOccupation\r",
                                                        "    \r",
                                                        "    #find deployable people\r",
                                                        "    able = [id for id in inOcc.keys()\r",
                                                        "        if inOcc[id]['RANK'] == rank\r",
                                                        "        and not inOcc[id]['ATTENDING_TRNG']\r",
                                                        "        and not inOcc[id]['RESERVED']\r",
                                                        "        and not inOcc[id]['DEPLOYED'] \r",
                                                        "        and not inOcc[id]['POST_DEPLOY']]\r",
                                                        "    \r",
                                                        "    #if need fewer than are able, randomly sample the number required from the able set\r",
                                                        "    if number < len(able):\r",
                                                        "        able = random.sample(able, number)\r",
                                                        "        \r",
                                                        "    return able\r",
                                                        "\r",
                                                        "\r",
                                                        "def get_deploy_limit(duration):\r",
                                                        "    \r",
                                                        "    data = link.hub.data\r",
                                                        "    \r",
                                                        "    #get max PYs that can deploy based on current occupation pop\r",
                                                        "    maxPYs = len(data.InOccupation) * data.DeployRatio\r",
                                                        "    \r",
                                                        "    #determine available PY room\r",
                                                        "    availPYs = maxPYs - data.DeployedPYs\r",
                                                        "    \r",
                                                        "    #determine number of deployable personnel based on available PY room\r",
                                                        "    availPers_PY = availPYs/duration\r",
                                                        "    \r",
                                                        "    #determine absolute max deployable personel\r",
                                                        "    maxDeployed = len(data.InOccupation) * data.MaxDeployRatio\r",
                                                        "    \r",
                                                        "    #determine number of deployable personnel based on max deployable\r",
                                                        "    availPers_Max = maxDeployed - len(data.Deployed)\r",
                                                        "    \r",
                                                        "    #the number of personnel that can deploy is the lesser of the\r",
                                                        "    #deployable personnel based on PYs or max deployable\r",
                                                        "    return max(0, int(min(availPers_PY, availPers_Max)))\r",
                                                        "    \r",
                                                        "\r",
                                                        "    "
                                                    ]
                                                },
                                                "key": 1404,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "library",
                                                    "outgoing_links": {
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1403,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 18.965057542710596,
                                                        "y": 13.991443438892098
                                                    },
                                                    "size": {
                                                        "height": 5.1,
                                                        "scale_3d": 1.0,
                                                        "width": 10.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "library"
                                            },
                                            {
                                                "content": {},
                                                "key": 1405,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 1,
                                                    "name": "DeployHub",
                                                    "outgoing_links": {
                                                        "Deploy": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1406,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": -12.92446735528416,
                                                        "y": -33.069246027404944
                                                    },
                                                    "size": {
                                                        "height": 0.5,
                                                        "scale_3d": 1.0,
                                                        "width": 0.5
                                                    },
                                                    "visible": true
                                                },
                                                "type": "node"
                                            },
                                            {
                                                "content": {},
                                                "key": 1406,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "Deploy",
                                                    "outgoing_links": {
                                                        "DeployResources": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1399,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "ReleaseResources": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1401,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "RequestResources": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1398,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "ReserveResources": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1402,
                                                            "visible": true,
                                                            "waypoints": []
                                                        },
                                                        "ReturnResources": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1400,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": -7.635307008131811,
                                                        "y": -32.253441185791566
                                                    },
                                                    "size": {
                                                        "height": 1.5,
                                                        "scale_3d": 1.0,
                                                        "width": 1.5
                                                    },
                                                    "visible": true
                                                },
                                                "type": "hub"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "pys",
                                                    "roles_and_prioritizing": {},
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "link.hub.data.DeployedPYs -= pys"
                                                    ]
                                                },
                                                "key": 1407,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "ResetDeployedPYs",
                                                    "outgoing_links": {
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1403,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 7.916293194761721,
                                                        "y": -25.283586862916298
                                                    },
                                                    "size": {
                                                        "height": 5.1,
                                                        "scale_3d": 1.0,
                                                        "width": 10.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "",
                                                    "roles_and_prioritizing": {
                                                        "reset": 0
                                                    },
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "link.hub.data.InOccupation = {}\r",
                                                        "link.hub.data.Deployed = []\r",
                                                        "#link.hub.data.DeployRatio = 1.0/7.0\r",
                                                        "#link.hub.data.MaxDeployRatio = 0.5\r",
                                                        "link.hub.data.DeployedPYs = 0.0"
                                                    ]
                                                },
                                                "key": 1408,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "Reset",
                                                    "outgoing_links": {
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1403,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 19.321638703964354,
                                                        "y": 8.788145132529312
                                                    },
                                                    "size": {
                                                        "height": 5.1,
                                                        "scale_3d": 1.0,
                                                        "width": 10.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "",
                                                    "roles_and_prioritizing": {},
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "print('CPL-PTE', len(link.library.get_able_to_deploy('CPL-PTE', 100)))\r",
                                                        "print('MCPL', len(link.library.get_able_to_deploy('MCPL', 100)))\r",
                                                        "print('SGT', len(link.library.get_able_to_deploy('SGT', 100)))"
                                                    ]
                                                },
                                                "key": 1409,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "function",
                                                    "outgoing_links": {
                                                        "library": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1404,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 29.4586062592452,
                                                        "y": 15.335856119219542
                                                    },
                                                    "size": {
                                                        "height": 5.089285714285714,
                                                        "scale_3d": 1.0,
                                                        "width": 13.511904761904761
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "",
                                                    "roles_and_prioritizing": {},
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "print(link.library.get_deploy_limit(0.5))\r",
                                                        "\r",
                                                        ""
                                                    ]
                                                },
                                                "key": 1410,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "function",
                                                    "outgoing_links": {
                                                        "library": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1404,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 32.47035098970373,
                                                        "y": 9.57911374703742
                                                    },
                                                    "size": {
                                                        "height": 5.1,
                                                        "scale_3d": 1.0,
                                                        "width": 10.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "deployRatio, maxDeployRatio",
                                                    "roles_and_prioritizing": {
                                                        "setup": 0
                                                    },
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "link.hub.data.DeployRatio = deployRatio\r",
                                                        "link.hub.data.MaxDeployRatio = maxDeployRatio"
                                                    ]
                                                },
                                                "key": 1411,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "Setup",
                                                    "outgoing_links": {
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1403,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 5.009630424268722,
                                                        "y": 14.79659735278029
                                                    },
                                                    "size": {
                                                        "height": 5.1,
                                                        "scale_3d": 1.0,
                                                        "width": 10.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {},
                                                "key": 1412,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 1,
                                                    "name": "CTout",
                                                    "outgoing_links": {
                                                        "CTin": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1215,
                                                            "visible": true,
                                                            "waypoints": [
                                                                {
                                                                    "waypoint_pos": {
                                                                        "x": 28.617361359378737,
                                                                        "y": -13.928238728722608
                                                                    }
                                                                },
                                                                {
                                                                    "waypoint_pos": {
                                                                        "x": 28.528262933342205,
                                                                        "y": -8.139189735854051
                                                                    }
                                                                }
                                                            ]
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 56.865941300696065,
                                                        "y": -16.836441835251403
                                                    },
                                                    "size": {
                                                        "height": 0.5,
                                                        "scale_3d": 1.0,
                                                        "width": 0.5
                                                    },
                                                    "visible": true
                                                },
                                                "type": "node"
                                            },
                                            {
                                                "content": {},
                                                "key": 1413,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 1,
                                                    "name": "CTin",
                                                    "outgoing_links": {
                                                        "CTin": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1414,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 56.71013403197822,
                                                        "y": -0.5214103838248743
                                                    },
                                                    "size": {
                                                        "height": 0.5,
                                                        "scale_3d": 1.0,
                                                        "width": 0.5
                                                    },
                                                    "visible": true
                                                },
                                                "type": "node"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "props",
                                                    "roles_and_prioritizing": {},
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "link.hub.data.InOccupation[props['ID']] = props\r",
                                                        "\r",
                                                        "props['INSERT'] = True\r",
                                                        "\r",
                                                        "if props['ID'] == 101046:\r",
                                                        "    log.warning(\"CT to ResF 101046************\")\r",
                                                        "\r",
                                                        "\r",
                                                        "#log.warning(\"Member %s CT to ResF\" % props['ID'])\r",
                                                        "\r",
                                                        "#drap the CT flag once they are in\r",
                                                        "del props['CT']\r",
                                                        "\r",
                                                        "link.Enter(props)\r",
                                                        "\r",
                                                        ""
                                                    ]
                                                },
                                                "key": 1414,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "CTin",
                                                    "outgoing_links": {
                                                        "Enter": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1435,
                                                            "visible": true,
                                                            "waypoints": [
                                                                {
                                                                    "waypoint_pos": {
                                                                        "x": 1.1709626874514316,
                                                                        "y": -0.13010696527238128
                                                                    }
                                                                },
                                                                {
                                                                    "waypoint_pos": {
                                                                        "x": 0.8240107800584148,
                                                                        "y": -4.813957715078107
                                                                    }
                                                                }
                                                            ]
                                                        },
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": true,
                                                            "target_path": 1403,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 48.83732176347636,
                                                        "y": 1.5784589604665178
                                                    },
                                                    "size": {
                                                        "height": 5.1,
                                                        "scale_3d": 1.0,
                                                        "width": 10.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {},
                                                "key": 1415,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 1,
                                                    "name": "Recruit",
                                                    "outgoing_links": {
                                                        "Enter": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1396,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": -13.74604767665869,
                                                        "y": -13.987206407828142
                                                    },
                                                    "size": {
                                                        "height": 0.5,
                                                        "scale_3d": 1.0,
                                                        "width": 0.5
                                                    },
                                                    "visible": true
                                                },
                                                "type": "node"
                                            },
                                            {
                                                "content": {
                                                    "parameters": "",
                                                    "roles_and_prioritizing": {},
                                                    "script_imports": {},
                                                    "script_lines": [
                                                        "import pickle\r",
                                                        "\r",
                                                        "p = str(sim.get_replication_folder().joinpath(\"ResF.pickle\"))\r",
                                                        "\r",
                                                        "\r",
                                                        "#file = open(\"RegF.pickle\",\"wb\")\r",
                                                        "file = open(p, \"wb\")\r",
                                                        "pickle.dump(link.hub.data.InOccupation, file)\r",
                                                        "file.close()\r",
                                                        "\r",
                                                        "\r",
                                                        ""
                                                    ]
                                                },
                                                "key": 1416,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "minimal",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "save",
                                                    "outgoing_links": {
                                                        "hub": {
                                                            "bold": false,
                                                            "declutter": false,
                                                            "target_path": 1403,
                                                            "visible": true,
                                                            "waypoints": []
                                                        }
                                                    },
                                                    "position": {
                                                        "x": 4.936034511940091,
                                                        "y": 8.843437119695666
                                                    },
                                                    "size": {
                                                        "height": 5.1,
                                                        "scale_3d": 1.0,
                                                        "width": 10.0
                                                    },
                                                    "visible": true
                                                },
                                                "type": "function"
                                            },
                                            {
                                                "content": {
                                                    "children": [
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#if part of initial pop, send to initial pop function\r",
                                                                    "if 'INSERT' in props:\r",
                                                                    "        link.Insert(props)\r",
                                                                    "        return\r",
                                                                    "\r",
                                                                    "#get id\r",
                                                                    "ID = props['ID']\r",
                                                                    "\r",
                                                                    "#update props\r",
                                                                    "props['RANK'] = link.hub.RankID.Name\r",
                                                                    "props['OCC'] = link.hub.RankID.Occupation\r",
                                                                    "props['CADRE'] = link.hub.RankID.Cadre\r",
                                                                    "props['DOP'] = link.hub.datetime.date_time\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "#add to in-rank\r",
                                                                    "link.hub.data.InRank[ID] = props\r",
                                                                    "link.hub.data.InRankCount += 1\r",
                                                                    "\r",
                                                                    "#delay before start training (if needed)\r",
                                                                    "dbt = link.hub.RankInfo.DelayBeforeTraining\r",
                                                                    "if dbt > 0:\r",
                                                                    "    signal(link.StartTraining, props, delay(days = dbt))\r",
                                                                    "else:\r",
                                                                    "    link.StartTraining(props)\r",
                                                                    "\r",
                                                                    "#setup attrition\r",
                                                                    "link.SetupAttrition(props)\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1418,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "EnterRank",
                                                                "outgoing_links": {
                                                                    "Insert": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1439,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "SetupAttrition": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1438,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "StartTraining": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1425,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1424,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -30.012218907185066,
                                                                    "y": -39.795841039640734
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "dict": [
                                                                    [
                                                                        "Positions",
                                                                        80
                                                                    ],
                                                                    [
                                                                        "MinTIR",
                                                                        4
                                                                    ],
                                                                    [
                                                                        "MaxTIR",
                                                                        1000
                                                                    ],
                                                                    [
                                                                        "DelayBeforeTraining",
                                                                        0
                                                                    ],
                                                                    [
                                                                        "ReleaseIfFail",
                                                                        true
                                                                    ],
                                                                    [
                                                                        "PushPromote",
                                                                        false
                                                                    ],
                                                                    [
                                                                        "AttrRate",
                                                                        0.18
                                                                    ],
                                                                    [
                                                                        "MaxAge",
                                                                        1000
                                                                    ],
                                                                    [
                                                                        "DeployRatio",
                                                                        0.143
                                                                    ],
                                                                    [
                                                                        "CTRate",
                                                                        0.02
                                                                    ]
                                                                ],
                                                                "display_order": "of_creation",
                                                                "pickled_keys": []
                                                            },
                                                            "key": 1419,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "RankInfo",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -24.690955916045823,
                                                                    "y": -0.8998517282035177
                                                                },
                                                                "size": {
                                                                    "height": 10.178571428571429,
                                                                    "scale_3d": 1.0,
                                                                    "width": 6.875
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "data"
                                                        },
                                                        {
                                                            "content": {
                                                                "dict": [
                                                                    [
                                                                        "InRank",
                                                                        {}
                                                                    ],
                                                                    [
                                                                        "InTraining",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "Promotable",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "Deployed",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "InRankCount",
                                                                        0
                                                                    ],
                                                                    [
                                                                        "InTrainingCount",
                                                                        0
                                                                    ],
                                                                    [
                                                                        "PromotableCount",
                                                                        0
                                                                    ],
                                                                    [
                                                                        "DeployedCount",
                                                                        0
                                                                    ]
                                                                ],
                                                                "display_order": "of_creation",
                                                                "pickled_keys": []
                                                            },
                                                            "key": 1420,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "data",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -15.753892763598326,
                                                                    "y": -2.1163262518204564
                                                                },
                                                                "size": {
                                                                    "height": 9.375,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "data"
                                                        },
                                                        {
                                                            "content": {
                                                                "dict": [
                                                                    [
                                                                        "Name",
                                                                        "Lt-Capt"
                                                                    ],
                                                                    [
                                                                        "Occupation",
                                                                        "NWO"
                                                                    ],
                                                                    [
                                                                        "Cadre",
                                                                        "ResF"
                                                                    ]
                                                                ],
                                                                "display_order": "of_creation",
                                                                "pickled_keys": []
                                                            },
                                                            "key": 1421,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "RankID",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -27.50527447254697,
                                                                    "y": -12.681312051278057
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "data"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {
                                                                    "reset": 0
                                                                },
                                                                "script_imports": {
                                                                    "datetime": [
                                                                        "datetime",
                                                                        "datetime"
                                                                    ]
                                                                },
                                                                "script_lines": [
                                                                    "\r",
                                                                    "link.hub.data.InRank = {}\r",
                                                                    "link.hub.data.InTraining = []\r",
                                                                    "link.hub.data.Promotable = []\r",
                                                                    "link.hub.data.Deployed = []\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "link.hub.data.InRankCount = 0\r",
                                                                    "link.hub.data.InTrainingCount = 0\r",
                                                                    "link.hub.data.PromotableCount = 0\r",
                                                                    "link.hub.data.DeployedCount = 0\r",
                                                                    "\r",
                                                                    "startDate = datetime(2019,6,1,9,0,0)\r",
                                                                    "link.hub.datetime.set_date_time(startDate)\r",
                                                                    "\r",
                                                                    "link.hub.record.InRank = [0]\r",
                                                                    "link.hub.record.InTraining = [0]\r",
                                                                    "link.hub.record.Promotable = [0]\r",
                                                                    "link.hub.record.Deployed = [0]\r",
                                                                    "link.hub.record.Time = [startDate]\r",
                                                                    "link.hub.record.Releases = []\r",
                                                                    "link.hub.record.CTouts = []\r",
                                                                    "link.hub.record.Promotions = []\r",
                                                                    "link.hub.record.Positions = [link.hub.RankInfo.Positions]\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1422,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Reset",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1424,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 3.3173287652768817,
                                                                    "y": -13.986227580374978
                                                                },
                                                                "size": {
                                                                    "height": 6.011904761904762,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "date_time": {
                                                                    "day": 1,
                                                                    "hour": 9,
                                                                    "minute": 0,
                                                                    "month": 6,
                                                                    "second": 0,
                                                                    "year": 2019
                                                                }
                                                            },
                                                            "key": 1423,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "datetime",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": 2.3615869633262303,
                                                                    "y": -9.033337372290976
                                                                },
                                                                "size": {
                                                                    "height": 3.988095238095238,
                                                                    "scale_3d": 1.0,
                                                                    "width": 6.19047619047619
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "datetime"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1424,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "hub",
                                                                "outgoing_links": {
                                                                    "RankID": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1421,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "RankInfo": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1419,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "data": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1420,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "datetime": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1423,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "library": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1468,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "rank": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1417,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "record": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1441,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -7.750112694994645,
                                                                    "y": -18.00391297376486
                                                                },
                                                                "size": {
                                                                    "height": 1.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 1.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "hub"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "if props['ID'] not in link.hub.data.InRank: return\r",
                                                                    "\r",
                                                                    "link.hub.data.InTraining.append(props['ID'])\r",
                                                                    "link.hub.data.InTrainingCount += 1\r",
                                                                    "\r",
                                                                    "link.TrainRequest(props)"
                                                                ]
                                                            },
                                                            "key": 1425,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "StartTraining",
                                                                "outgoing_links": {
                                                                    "TrainRequest": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1452,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1424,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -20.026080654978394,
                                                                    "y": -39.697656269064375
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props, result",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "if props['ID'] not in link.hub.data.InRank: return\r",
                                                                    "\r",
                                                                    "link.hub.data.InTraining.remove(props['ID'])\r",
                                                                    "link.hub.data.InTrainingCount -= 1\r",
                                                                    "\r",
                                                                    "#if fail\r",
                                                                    "if result == 'F':\r",
                                                                    "    \r",
                                                                    "    #immediate release\r",
                                                                    "    if link.hub.RankInfo.ReleaseIfFail:\r",
                                                                    "        link.RemoveMember(props, 'failed')\r",
                                                                    "        \r",
                                                                    "    #or stay in rank until release\r",
                                                                    "\r",
                                                                    "#else pass\r",
                                                                    "else:\r",
                                                                    "    link.MinTIRDelay(props)\r",
                                                                    "        \r",
                                                                    "        \r",
                                                                    "        \r",
                                                                    "    \r",
                                                                    "    \r",
                                                                    "    \r",
                                                                    "    \r",
                                                                    "\r",
                                                                    "    "
                                                                ]
                                                            },
                                                            "key": 1426,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "FinishTraining",
                                                                "outgoing_links": {
                                                                    "MinTIRDelay": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1440,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "RemoveMember": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1437,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1424,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 5.515274902002796,
                                                                    "y": -39.49022853059453
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "if props['ID'] not in link.hub.data.InRank: return\r",
                                                                    "\r",
                                                                    "#if there is no next rank, do nothing\r",
                                                                    "if link.SndReq is None: return\r",
                                                                    "\r",
                                                                    "#add to promo list if not already there (might already be there in obscure cases)\r",
                                                                    "if props['ID'] not in link.hub.data.Promotable:\r",
                                                                    "    link.hub.data.Promotable.append(props['ID'])\r",
                                                                    "    link.hub.data.PromotableCount += 1\r",
                                                                    "\r",
                                                                    "#if push promote\r",
                                                                    "if link.hub.RankInfo.PushPromote:\r",
                                                                    "    link.Promote(props)\r",
                                                                    "\r",
                                                                    "#else request promotion\r",
                                                                    "else:\r",
                                                                    "    link.SndReq()\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1427,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "MetMinTIR",
                                                                "outgoing_links": {
                                                                    "Promote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1428,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "SndReq": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1434,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1424,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 21.676515289907346,
                                                                    "y": -39.3404021116089
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#promote to next rank\r",
                                                                    "link.PromoteOut(props)\r",
                                                                    "\r",
                                                                    "#remove from current rank\r",
                                                                    "link.RemoveMember(props, 'promoted')\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1428,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Promote",
                                                                "outgoing_links": {
                                                                    "PromoteOut": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1431,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "RemoveMember": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1437,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1424,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 30.26797020714654,
                                                                    "y": -39.30186888370791
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "nextRankPositions, nextRankCount",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "data = link.hub.data\r",
                                                                    "info = link.hub.RankInfo\r",
                                                                    "\r",
                                                                    "#maximum possible promotions\r",
                                                                    "maxPromos = min(data.PromotableCount, nextRankPositions - nextRankCount)\r",
                                                                    "\r",
                                                                    "#promotions to balance strength\r",
                                                                    "s0 = data.InRankCount\r",
                                                                    "s1 = nextRankCount\r",
                                                                    "p0 = info.Positions\r",
                                                                    "p1 = nextRankPositions\r",
                                                                    "balancePromos = (s0*p1 - s1*p0)/(p0 + p1)\r",
                                                                    "\r",
                                                                    "#adjust number of promos stochastically\r",
                                                                    "balancePromos_ = math.floor(balancePromos)\r",
                                                                    "frac = balancePromos - balancePromos_\r",
                                                                    "if random.random() > frac:\r",
                                                                    "    balancePromos = balancePromos_\r",
                                                                    "else:\r",
                                                                    "    balancePromos = balancePromos_ + 1\r",
                                                                    "\r",
                                                                    "#determine final number of promos\r",
                                                                    "numPromos = min(maxPromos, balancePromos)\r",
                                                                    "\r",
                                                                    "if numPromos <= 0: return\r",
                                                                    "\r",
                                                                    "promoteIDs = random.sample(link.hub.data.Promotable, numPromos)\r",
                                                                    "\r",
                                                                    "for ID in promoteIDs:\r",
                                                                    "    link.Promote(link.hub.data.InRank[ID])\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1429,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "PromoteInvite",
                                                                "outgoing_links": {
                                                                    "Promote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1428,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1424,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 30.236943946864095,
                                                                    "y": -54.94925517566933
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#if nothing below this rank, don't invite a promotion\r",
                                                                    "if link.InvitePromote is None: return\r",
                                                                    "\r",
                                                                    "# if there is room in the rank\r",
                                                                    "if link.hub.data.InRankCount < link.hub.RankInfo.Positions:\r",
                                                                    "\r",
                                                                    "    #send the number of positions and current in-rank count\r",
                                                                    "    link.InvitePromote(link.hub.RankInfo.Positions, link.hub.data.InRankCount)"
                                                                ]
                                                            },
                                                            "key": 1430,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "InvitePromote",
                                                                "outgoing_links": {
                                                                    "InvitePromote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1432,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1424,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -30.008885903158987,
                                                                    "y": -54.932325409304234
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1431,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "SndPromo",
                                                                "outgoing_links": {
                                                                    "Enter": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1489,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 40.81257151160083,
                                                                    "y": -41.4195199794459
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1432,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "SndInvite",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -37.22325753644102,
                                                                    "y": -57.04376020783337
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1433,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "Invite",
                                                                "outgoing_links": {
                                                                    "PromoteInvite": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1429,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 41.1022611870765,
                                                                    "y": -57.271274325502496
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1434,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "SndReq",
                                                                "outgoing_links": {
                                                                    "Request": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1490,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 40.58019488696916,
                                                                    "y": -49.98849280979479
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1435,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "Enter",
                                                                "outgoing_links": {
                                                                    "EnterRank": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1418,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -37.04218246881857,
                                                                    "y": -42.01569816569041
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1436,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "Request",
                                                                "outgoing_links": {
                                                                    "InvitePromote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1430,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -36.98495220560267,
                                                                    "y": -49.363009874348336
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props, lossType",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "ID = props['ID']\r",
                                                                    "\r",
                                                                    "#remove from all member lists\r",
                                                                    "if ID in link.hub.data.InTraining:\r",
                                                                    "    link.hub.data.InTraining.remove(ID)\r",
                                                                    "    link.hub.data.InTrainingCount -= 1\r",
                                                                    "    \r",
                                                                    "\r",
                                                                    "if ID in link.hub.data.Promotable:\r",
                                                                    "    link.hub.data.Promotable.remove(ID)\r",
                                                                    "    link.hub.data.PromotableCount -= 1\r",
                                                                    "\r",
                                                                    "if ID in link.hub.data.InRank:\r",
                                                                    "    del link.hub.data.InRank[ID]\r",
                                                                    "    link.hub.data.InRankCount -= 1\r",
                                                                    "    \r",
                                                                    "    #record release\r",
                                                                    "    if lossType == 'released':\r",
                                                                    "        props['RELEASED'] = True\r",
                                                                    "        link.hub.record.Releases[-1] += 1\r",
                                                                    "        link.Release(props)\r",
                                                                    "        link.StopTraining(ID)\r",
                                                                    "    \r",
                                                                    "    #record CT\r",
                                                                    "    elif lossType == 'CT':\r",
                                                                    "        props['CT'] = True\r",
                                                                    "        props['DOP'] = link.hub.datetime.date_time  #override promotion time\r",
                                                                    "        link.hub.record.CTouts[-1] += 1\r",
                                                                    "        link.Release(props)\r",
                                                                    "        link.StopTraining(ID)\r",
                                                                    "        \r",
                                                                    "    \r",
                                                                    "    #record promotion\r",
                                                                    "    elif lossType == 'promoted':\r",
                                                                    "        link.hub.record.Promotions[-1] += 1\r",
                                                                    "    \r",
                                                                    "    #invite promotion\r",
                                                                    "    link.InvitePromote()\r",
                                                                    "    \r",
                                                                    "\r",
                                                                    "    \r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1437,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "RemoveMember",
                                                                "outgoing_links": {
                                                                    "InvitePromote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1430,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "Release": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1445,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": 32.34392154184954,
                                                                                    "y": -63.223816325109745
                                                                                }
                                                                            }
                                                                        ]
                                                                    },
                                                                    "StopTraining": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1465,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": -11.890454134805578,
                                                                                    "y": -46.83253535228758
                                                                                }
                                                                            },
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": -11.858746257112767,
                                                                                    "y": -43.72516333839172
                                                                                }
                                                                            }
                                                                        ]
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1424,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 5.817043142888761,
                                                                    "y": -54.71431714204966
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#MaxAge\r",
                                                                    "ageDays = (link.hub.datetime.date_time - props['DOB']).days\r",
                                                                    "maxAgeDaysLeft = link.hub.RankInfo.MaxAge*365 - ageDays\r",
                                                                    "\r",
                                                                    "#Max TIR\r",
                                                                    "TIRDays = (link.hub.datetime.date_time - props['DOP']).days\r",
                                                                    "maxTIRDaysLeft = link.hub.RankInfo.MaxTIR*365 - TIRDays\r",
                                                                    "\r",
                                                                    "#voluntary release (based on attrition rate)\r",
                                                                    "alpha = -math.log(1.0 - link.hub.RankInfo.AttrRate)\r",
                                                                    "volDaysLeft = random.expovariate(alpha)*365\r",
                                                                    "\r",
                                                                    "#CT release (based on CT rate)\r",
                                                                    "alpha = -math.log(1.0 - link.hub.RankInfo.CTRate)\r",
                                                                    "ctDaysLeft = random.expovariate(alpha)*365\r",
                                                                    "\r",
                                                                    "#note, need to label CT releases\r",
                                                                    "\r",
                                                                    "#schedule release\r",
                                                                    "days = min(maxAgeDaysLeft, maxTIRDaysLeft, volDaysLeft, ctDaysLeft)\r",
                                                                    "\r",
                                                                    "#label the loss type\r",
                                                                    "lossType = 'released'\r",
                                                                    "if days == ctDaysLeft:\r",
                                                                    "    lossType = 'CT'\r",
                                                                    "\r",
                                                                    "signal(link.RemoveMember, (props, lossType), delay(days = days))"
                                                                ]
                                                            },
                                                            "key": 1438,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "SetupAttrition",
                                                                "outgoing_links": {
                                                                    "RemoveMember": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1437,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1424,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -20.00560338611418,
                                                                    "y": -46.629645698637454
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#insert member into model (used for initial pop and CTs)\r",
                                                                    "\r",
                                                                    "#if member not in this rank, send to next rank (if next rank exists)\r",
                                                                    "if props['RANK'] != link.hub.RankID.Name:\r",
                                                                    "    if link.SndPromo is not None:\r",
                                                                    "        #log.warning(\"Rank: %s, Member rank: %s, Member ID: %s\" % (link.hub.RankID.Name, props['RANK'], props['ID']))\r",
                                                                    "        link.SndPromo(props)\r",
                                                                    "    else:\r",
                                                                    "        log.warning(\"Input member's rank not found in model.\")\r",
                                                                    "    return\r",
                                                                    "\r",
                                                                    "#log.warning(\"member %s enter %s\" % (props['ID'], link.hub.RankID.Name))\r",
                                                                    "\r",
                                                                    "#cancel insert flag\r",
                                                                    "if 'INSERT' in props:\r",
                                                                    "    del props['INSERT']\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "#get id\r",
                                                                    "ID = props['ID']\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "#update props (not all usual props are updated for initial pop)\r",
                                                                    "props['OCC'] = link.hub.RankID.Occupation\r",
                                                                    "props['CADRE'] = link.hub.RankID.Cadre\r",
                                                                    "\r",
                                                                    "#add to in-rank\r",
                                                                    "link.hub.data.InRank[ID] = props\r",
                                                                    "link.hub.data.InRankCount += 1\r",
                                                                    "\r",
                                                                    "#insert at Min-TIR delay step\r",
                                                                    "link.MinTIRDelay(props)\r",
                                                                    "\r",
                                                                    "#setup attrition\r",
                                                                    "link.SetupAttrition(props)\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1439,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Insert",
                                                                "outgoing_links": {
                                                                    "MinTIRDelay": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1440,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": 13.558717964465075,
                                                                                    "y": -31.554183083148093
                                                                                }
                                                                            }
                                                                        ]
                                                                    },
                                                                    "SetupAttrition": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1438,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "SndPromo": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1431,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": 31.94937653742584,
                                                                                    "y": -28.477348338185028
                                                                                }
                                                                            }
                                                                        ]
                                                                    },
                                                                    "StartTraining": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1425,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1424,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -29.989434128890377,
                                                                    "y": -29.305548588756988
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#if member entered this rank as initial pop, cancel the flag here\r",
                                                                    "#(no more treatment as initial_pop once processed through initial rank)\r",
                                                                    "if 'INSERT' in props:\r",
                                                                    "    del props['INSERT']\r",
                                                                    "\r",
                                                                    "#delay to Min TIR (if required)\r",
                                                                    "TIRdays = (link.hub.datetime.date_time - props['DOP']).days\r",
                                                                    "daysLeft = link.hub.RankInfo.MinTIR*365.25 - TIRdays\r",
                                                                    "\r",
                                                                    "if daysLeft > 0.0:\r",
                                                                    "    signal(link.MetMinTIR, props, delay(days = daysLeft))\r",
                                                                    "else:\r",
                                                                    "    link.MetMinTIR(props)\r",
                                                                    "        "
                                                                ]
                                                            },
                                                            "key": 1440,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "MinTIRDelay",
                                                                "outgoing_links": {
                                                                    "MetMinTIR": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1427,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1424,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 13.542800192312592,
                                                                    "y": -39.313536257975215
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "dict": [
                                                                    [
                                                                        "InRank",
                                                                        [
                                                                            0
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "InTraining",
                                                                        [
                                                                            0
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "Promotable",
                                                                        [
                                                                            0
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "Time",
                                                                        "gANdcQBjZGF0ZXRpbWUKZGF0ZXRpbWUKcQFDCgfjBgEJAAAAAABxAoVxA1JxBGEu"
                                                                    ],
                                                                    [
                                                                        "Releases",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "Promotions",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "Deployed",
                                                                        [
                                                                            0
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "Positions",
                                                                        [
                                                                            80
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "CTouts",
                                                                        []
                                                                    ]
                                                                ],
                                                                "display_order": "of_creation",
                                                                "pickled_keys": [
                                                                    "Time"
                                                                ]
                                                            },
                                                            "key": 1441,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "record",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -2.318244754210149,
                                                                    "y": -2.2214258111749743
                                                                },
                                                                "size": {
                                                                    "height": 5.803571428571428,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "data"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {
                                                                    "startup": 0
                                                                },
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "link.hub.record.InRank.append(link.hub.data.InRankCount)\r",
                                                                    "link.hub.record.InTraining.append(link.hub.data.InTrainingCount)\r",
                                                                    "link.hub.record.Promotable.append(link.hub.data.PromotableCount)\r",
                                                                    "link.hub.record.Deployed.append(link.hub.library.count_deployed())\r",
                                                                    "link.hub.record.Time.append(link.hub.datetime.date_time)\r",
                                                                    "link.hub.record.Positions.append(link.hub.RankInfo.Positions)\r",
                                                                    "\r",
                                                                    "link.hub.record.Releases.append(0)\r",
                                                                    "link.hub.record.CTouts.append(0)\r",
                                                                    "link.hub.record.Promotions.append(0)\r",
                                                                    "\r",
                                                                    "signal(self, (), delay(days = 30.44))"
                                                                ]
                                                            },
                                                            "key": 1442,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Record",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1424,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 9.0110398583115,
                                                                    "y": -14.067710898295612
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "script_lines": [
                                                                    "def configure():",
                                                                    "    axes = setup_axes(1, 1)",
                                                                    "\r",
                                                                    "    axes.set_xlabel('Time')",
                                                                    "    axes.set_ylabel('Population')",
                                                                    "",
                                                                    "    ",
                                                                    "",
                                                                    "def plot():\r",
                                                                    "    \r",
                                                                    "    lastTime = link.record.Time[-1]\r",
                                                                    "    ",
                                                                    "    axes.fill(link.record.Time + [lastTime], link.record.InRank + [0], 'grey', alpha = 0.5, label = 'In Rank')\r",
                                                                    "    axes.fill(link.record.Time + [lastTime], link.record.InTraining + [0], 'r', alpha = 0.3, label = 'In Training')\r",
                                                                    "    axes.fill(link.record.Time + [lastTime], link.record.Promotable + [0], 'b', alpha = 0.3, label = 'Promotable')\r",
                                                                    "    axes.fill(link.record.Time + [lastTime], link.record.Deployed + [0], 'black', alpha = 0.6, label = 'Deployed')",
                                                                    "    axes.plot(link.record.Time, link.record.Positions, 'k', linestyle = 'dashed', label = 'Positions', linewidth = 3)\r",
                                                                    "\r",
                                                                    "    handles, labels = axes.get_legend_handles_labels()\r",
                                                                    "    axes.legend(handles, labels, loc = 9, ncol = 3, bbox_to_anchor = (0.5, 1.12))",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1443,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "plot",
                                                                "outgoing_links": {
                                                                    "record": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1441,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 16.366223339152167,
                                                                    "y": 2.484834311425601
                                                                },
                                                                "size": {
                                                                    "height": 21.07142857142857,
                                                                    "scale_3d": 1.0,
                                                                    "width": 19.910714285714285
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "plot"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "positions, attrRate, minTIR, pushPromo, ctRate",
                                                                "roles_and_prioritizing": {
                                                                    "setup": 3
                                                                },
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "link.hub.RankInfo.Positions = positions\r",
                                                                    "link.hub.RankInfo.AttrRate = attrRate\r",
                                                                    "link.hub.RankInfo.MinTIR = minTIR\r",
                                                                    "link.hub.RankInfo.PushPromote = pushPromo\r",
                                                                    "link.hub.RankInfo.CTRate = ctRate\r",
                                                                    "\r",
                                                                    "link.hub.RankID.Name = link.hub._rank_.get_name()"
                                                                ]
                                                            },
                                                            "key": 1444,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Setup",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1424,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 3.2430370494555407,
                                                                    "y": -19.466952743026894
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1445,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "Release",
                                                                "outgoing_links": {
                                                                    "Release": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1397,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": 14.788825052627338,
                                                                                    "y": -15.786311786382262
                                                                                }
                                                                            }
                                                                        ]
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 41.33403873965582,
                                                                    "y": -63.389691111668604
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {
                                                                "children": [
                                                                    {
                                                                        "content": {
                                                                            "parameters": "props",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "ID = props['ID']\r",
                                                                                "props['IN_TRAINING'] = True\r",
                                                                                "\r",
                                                                                "#add to training list\r",
                                                                                "link.hub.Data.InTraining[ID] = props\r",
                                                                                "\r",
                                                                                "#go on waitlist\r",
                                                                                "link.hub.Data.Waitlist.append(ID)\r",
                                                                                "\r",
                                                                                "\r",
                                                                                "\r",
                                                                                "\r",
                                                                                "    \r",
                                                                                "    "
                                                                            ]
                                                                        },
                                                                        "key": 1447,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Arrive",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1450,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -16.694797152199428,
                                                                                "y": -34.31994988357029
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "dict": [
                                                                                [
                                                                                    "DurationDays",
                                                                                    60
                                                                                ],
                                                                                [
                                                                                    "MinSessionSize",
                                                                                    1
                                                                                ],
                                                                                [
                                                                                    "MaxSessionSize",
                                                                                    20
                                                                                ],
                                                                                [
                                                                                    "SuccessRate",
                                                                                    1
                                                                                ],
                                                                                [
                                                                                    "SessionSchedule",
                                                                                    "gANdcQAoSwZLAYZxAUsISwGGcQJlLg=="
                                                                                ]
                                                                            ],
                                                                            "display_order": "of_creation",
                                                                            "pickled_keys": [
                                                                                "SessionSchedule"
                                                                            ]
                                                                        },
                                                                        "key": 1448,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Input",
                                                                            "outgoing_links": {},
                                                                            "position": {
                                                                                "x": -14.664036274121262,
                                                                                "y": -0.76648840428639
                                                                            },
                                                                            "size": {
                                                                                "height": 6.5476190476190474,
                                                                                "scale_3d": 1.0,
                                                                                "width": 9.523809523809524
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "data"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "dict": [
                                                                                [
                                                                                    "InTraining",
                                                                                    {}
                                                                                ],
                                                                                [
                                                                                    "Waitlist",
                                                                                    []
                                                                                ],
                                                                                [
                                                                                    "Attendance",
                                                                                    []
                                                                                ],
                                                                                [
                                                                                    "StartDates",
                                                                                    []
                                                                                ],
                                                                                [
                                                                                    "SessionIdx",
                                                                                    0
                                                                                ]
                                                                            ],
                                                                            "display_order": "of_creation",
                                                                            "pickled_keys": []
                                                                        },
                                                                        "key": 1449,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Data",
                                                                            "outgoing_links": {},
                                                                            "position": {
                                                                                "x": -4.235163886363756,
                                                                                "y": -0.7590424824417763
                                                                            },
                                                                            "size": {
                                                                                "height": 6.607142857142857,
                                                                                "scale_3d": 1.0,
                                                                                "width": 8.660714285714285
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "data"
                                                                    },
                                                                    {
                                                                        "content": {},
                                                                        "key": 1450,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "hub",
                                                                            "outgoing_links": {
                                                                                "Data": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1449,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "Input": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1448,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "Record": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1456,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "datetime": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1454,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "library": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1459,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -1.135639561950389,
                                                                                "y": -13.488105952112994
                                                                            },
                                                                            "size": {
                                                                                "height": 1.5,
                                                                                "scale_3d": 1.0,
                                                                                "width": 1.5
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "hub"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {
                                                                                "reset": 0
                                                                            },
                                                                            "script_imports": {
                                                                                "datetime": [
                                                                                    "datetime",
                                                                                    "datetime"
                                                                                ]
                                                                            },
                                                                            "script_lines": [
                                                                                "link.hub.Data.InTraining = {}\r",
                                                                                "link.hub.Data.Waitlist = []\r",
                                                                                "link.hub.Data.Attendance = []\r",
                                                                                "link.hub.Data.StartDates = []\r",
                                                                                "link.hub.Data.SessionIdx = 0\r",
                                                                                "\r",
                                                                                "startDate = datetime(2019,6,1,9,0,0)\r",
                                                                                "link.hub.datetime.set_date_time(startDate)\r",
                                                                                "\r",
                                                                                "link.hub.Record.Waitlist = [0]\r",
                                                                                "link.hub.Record.Time = [startDate]\r",
                                                                                ""
                                                                            ]
                                                                        },
                                                                        "key": 1451,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Reset",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1450,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 9.448075269869122,
                                                                                "y": -13.073071682303503
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {},
                                                                        "key": 1452,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 1,
                                                                            "name": "TrainRequest",
                                                                            "outgoing_links": {
                                                                                "Arrive": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1447,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -20.800874878523683,
                                                                                "y": -36.48950085353416
                                                                            },
                                                                            "size": {
                                                                                "height": 0.5,
                                                                                "scale_3d": 1.0,
                                                                                "width": 0.5
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "node"
                                                                    },
                                                                    {
                                                                        "content": {},
                                                                        "key": 1453,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 1,
                                                                            "name": "SndTrainFinish",
                                                                            "outgoing_links": {
                                                                                "FinishTraining": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1426,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 27.97851400511773,
                                                                                "y": -36.629572966635514
                                                                            },
                                                                            "size": {
                                                                                "height": 0.5,
                                                                                "scale_3d": 1.0,
                                                                                "width": 0.5
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "node"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "date_time": {
                                                                                "day": 1,
                                                                                "hour": 9,
                                                                                "minute": 0,
                                                                                "month": 6,
                                                                                "second": 0,
                                                                                "year": 2019
                                                                            }
                                                                        },
                                                                        "key": 1454,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "datetime",
                                                                            "outgoing_links": {},
                                                                            "position": {
                                                                                "x": -11.68177009004484,
                                                                                "y": -11.093761528465397
                                                                            },
                                                                            "size": {
                                                                                "height": 3.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 6.2
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "datetime"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "script_lines": [
                                                                                "def configure():\r",
                                                                                "    axes = setup_axes(1, 1)",
                                                                                "\r",
                                                                                "    \r",
                                                                                "",
                                                                                "",
                                                                                "def plot():\r",
                                                                                "    \r",
                                                                                "    axes = setup_axes(1, 1)\r",
                                                                                "    axes.set_xlabel('Time (years)')\r",
                                                                                "    axes.set_ylabel('Number of people')\r",
                                                                                "    \r",
                                                                                "    #don't plot if data is empty\r",
                                                                                "    if len(link.hub.Record.Waitlist) <= 1:\r",
                                                                                "        return\r",
                                                                                "\r",
                                                                                "    #plot the waitlist\r",
                                                                                "    lastTime = link.hub.Record.Time[-1]\r",
                                                                                "    axes.fill(link.hub.Record.Time + [lastTime], link.hub.Record.Waitlist + [0], 'b', alpha = 0.3, label = 'Waitlist')",
                                                                                "    axes.figure.autofmt_xdate()\r",
                                                                                "    \r",
                                                                                "    \r",
                                                                                "    #plot the session attendance\r",
                                                                                "    height = link.hub.Data.Attendance\r",
                                                                                "    width = [link.hub.Input.DurationDays]*len(height)\r",
                                                                                "    left = link.hub.Data.StartDates\r",
                                                                                "    y_pos = [0]*len(height)\r",
                                                                                "    axes.barh(y_pos, width, height = height, left = left, color = 'green', alpha = 0.6, label = 'Session Attendance')\r",
                                                                                "    \r",
                                                                                "    #legend\r",
                                                                                "    handles, labels = axes.get_legend_handles_labels()\r",
                                                                                "    axes.legend(handles, labels, loc = 9, ncol = 3, bbox_to_anchor = (0.5, 1.12))"
                                                                            ]
                                                                        },
                                                                        "key": 1455,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Attendance",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1450,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 18.05520745979187,
                                                                                "y": -1.1322048215124676
                                                                            },
                                                                            "size": {
                                                                                "height": 16.2,
                                                                                "scale_3d": 1.0,
                                                                                "width": 15.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "plot"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "dict": [
                                                                                [
                                                                                    "Waitlist",
                                                                                    [
                                                                                        0
                                                                                    ]
                                                                                ],
                                                                                [
                                                                                    "Time",
                                                                                    "gANdcQBjZGF0ZXRpbWUKZGF0ZXRpbWUKcQFDCgfjBgEJAAAAAABxAoVxA1JxBGEu"
                                                                                ]
                                                                            ],
                                                                            "display_order": "of_creation",
                                                                            "pickled_keys": [
                                                                                "Time"
                                                                            ]
                                                                        },
                                                                        "key": 1456,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Record",
                                                                            "outgoing_links": {},
                                                                            "position": {
                                                                                "x": 5.519563999613053,
                                                                                "y": -0.7859267560572475
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "data"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {
                                                                                "startup": 0
                                                                            },
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "link.hub.Record.Waitlist.append(len(link.hub.Data.Waitlist))\r",
                                                                                "link.hub.Record.Time.append(link.hub.datetime.date_time)\r",
                                                                                "\r",
                                                                                "signal(self, (), delay(days = 7))"
                                                                            ]
                                                                        },
                                                                        "key": 1457,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Record",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1450,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 9.55578961375507,
                                                                                "y": -7.625327065521719
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "duration, minSessionSize, maxSessionSize, successRate, sessionSchedule",
                                                                            "roles_and_prioritizing": {
                                                                                "setup": 3
                                                                            },
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "link.hub.Input.DurationDays = duration\r",
                                                                                "link.hub.Input.MinSessionSize = minSessionSize\r",
                                                                                "link.hub.Input.MaxSessionSize = maxSessionSize\r",
                                                                                "link.hub.Input.SuccessRate = successRate\r",
                                                                                "link.hub.Input.SessionSchedule = sessionSchedule"
                                                                            ]
                                                                        },
                                                                        "key": 1458,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Setup",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1450,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 9.417960966070991,
                                                                                "y": -18.46107648244264
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "script_imports": {
                                                                                "datetime": [
                                                                                    "datetime",
                                                                                    "datetime"
                                                                                ]
                                                                            },
                                                                            "script_lines": [
                                                                                "def get_waitlist():\r",
                                                                                "    inTrng = link.hub.Data.InTraining\r",
                                                                                "    return [id for id in link.hub.Data.Waitlist\r",
                                                                                "        if inTrng[id]['RELEASED']]\r",
                                                                                "        \r",
                                                                                "\r",
                                                                                "\r",
                                                                                "def get_trainable_on_waitlist():\r",
                                                                                "    inTrng = link.hub.Data.InTraining\r",
                                                                                "    return [id for id in link.hub.Data.Waitlist\r",
                                                                                "        if not inTrng[id]['RESERVED']\r",
                                                                                "        and not inTrng[id]['DEPLOYED']\r",
                                                                                "        and not inTrng[id]['RELEASED']]\r",
                                                                                "    \r",
                                                                                "def count_trainable_on_waitlist():\r",
                                                                                "    return len(get_trainable_on_waitlist())\r",
                                                                                "    \r",
                                                                                "    \r",
                                                                                "def get_start_session_idx():\r",
                                                                                "    #assumes session schedule is in order\r",
                                                                                "    #returns the index of the first session based on the current datetime\r",
                                                                                "    \r",
                                                                                "    year = link.hub.datetime.year\r",
                                                                                "    \r",
                                                                                "    startDates = [datetime(year, m, d, 8, 0, 0) for m,d in link.hub.Input.SessionSchedule]\r",
                                                                                "    \r",
                                                                                "    delays = [(t - link.hub.datetime.get_date_time()).total_seconds() for t in startDates]\r",
                                                                                "    \r",
                                                                                "    #return the smallest positive delay\r",
                                                                                "    for i in range(len(delays)):\r",
                                                                                "        if delays[i] > 0:\r",
                                                                                "            return i\r",
                                                                                "   \r",
                                                                                "    #if no more sessions this year, return first session for next year\r",
                                                                                "    return 0\r",
                                                                                "    "
                                                                            ]
                                                                        },
                                                                        "key": 1459,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "library",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1450,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -11.156992490107825,
                                                                                "y": -15.437735791363107
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "library"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {
                                                                                "startup": 0
                                                                            },
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "link.hub.Data.SessionIdx = link.hub.library.get_start_session_idx()\r",
                                                                                "\r",
                                                                                "link.DelayToSessionStart()\r",
                                                                                "\r",
                                                                                "\r",
                                                                                ""
                                                                            ]
                                                                        },
                                                                        "key": 1460,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "GetFirstSession",
                                                                            "outgoing_links": {
                                                                                "DelayToSessionStart": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1461,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1450,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -6.831928977706746,
                                                                                "y": -34.44116769677284
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "nextYr = False",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {
                                                                                "datetime": [
                                                                                    "datetime",
                                                                                    "datetime"
                                                                                ]
                                                                            },
                                                                            "script_lines": [
                                                                                "session = link.hub.Input.SessionSchedule[link.hub.Data.SessionIdx]\r",
                                                                                "\r",
                                                                                "year = link.hub.datetime.year\r",
                                                                                "month = session[0]\r",
                                                                                "day = session[1]\r",
                                                                                "\r",
                                                                                "delayDays = (datetime(year, month, day, 8, 0, 0) - link.hub.datetime.date_time).total_seconds()/86400.0\r",
                                                                                "\r",
                                                                                "if delayDays < 0.0 or nextYr:\r",
                                                                                "    delayDays = (datetime(year + 1, month, day, 8, 0, 0) - link.hub.datetime.date_time).total_seconds()/86400.0\r",
                                                                                "\r",
                                                                                "signal(link.StartSession, (), delay(days = delayDays))\r",
                                                                                ""
                                                                            ]
                                                                        },
                                                                        "key": 1461,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "DelayToSessionStart",
                                                                            "outgoing_links": {
                                                                                "StartSession": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1462,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1450,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 1.5855408583978676,
                                                                                "y": -34.353601749967424
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "input = link.hub.Input\r",
                                                                                "data = link.hub.Data\r",
                                                                                "\r",
                                                                                "#get the list of potential session starts, up to max session size\r",
                                                                                "sessionList = link.hub.library.get_trainable_on_waitlist()[:input.MaxSessionSize]\r",
                                                                                "\r",
                                                                                "#if at least have the min session size\r",
                                                                                "if len(sessionList) >= input.MinSessionSize:\r",
                                                                                "    \r",
                                                                                "    #remove ids from waitlist and set status to attending training\r",
                                                                                "    for id in sessionList:\r",
                                                                                "        data.Waitlist.remove(id)\r",
                                                                                "        data.InTraining[id]['ATTENDING_TRNG'] = True\r",
                                                                                "    \r",
                                                                                "    #track attendance and start date\r",
                                                                                "    data.Attendance.append(len(sessionList))\r",
                                                                                "    data.StartDates.append(link.hub.datetime.date_time)\r",
                                                                                "    \r",
                                                                                "    #signal to finish the course after course duration\r",
                                                                                "    signal(link.Finish, sessionList, delay(days = input.DurationDays))\r",
                                                                                "\r",
                                                                                "#else record zero-loaded session\r",
                                                                                "else:\r",
                                                                                "    data.Attendance.append(0)\r",
                                                                                "    data.StartDates.append(link.hub.datetime.date_time)\r",
                                                                                "    \r",
                                                                                "#setup next session\r",
                                                                                "link.NextSession()"
                                                                            ]
                                                                        },
                                                                        "key": 1462,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "StartSession",
                                                                            "outgoing_links": {
                                                                                "Finish": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1463,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "NextSession": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1464,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1450,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 10.16430095764344,
                                                                                "y": -34.388760602833166
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "sessionList",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "input = link.hub.Input\r",
                                                                                "data = link.hub.Data\r",
                                                                                "#for each session attendee\r",
                                                                                "for ID in sessionList:\r",
                                                                                "    \r",
                                                                                "    if ID in data.InTraining:\r",
                                                                                "    \r",
                                                                                "        #update properties\r",
                                                                                "        props = data.InTraining[ID]\r",
                                                                                "        props['ATTENDING_TRNG'] = False\r",
                                                                                "        props['IN_TRAINING'] = False\r",
                                                                                "        props['TRAINING_COMPLETED'] = True\r",
                                                                                "\r",
                                                                                "        #if pass\r",
                                                                                "        if random.random() < input.SuccessRate:\r",
                                                                                "            result = 'P'\r",
                                                                                "        #else fail\r",
                                                                                "        else:\r",
                                                                                "            result = 'F'\r",
                                                                                "            props['TRAINING_FAILED'] = True\r",
                                                                                "                 \r",
                                                                                "        #remove\r",
                                                                                "        del data.InTraining[ID]\r",
                                                                                "\r",
                                                                                "        link.SndTrainFinish(props, result)"
                                                                            ]
                                                                        },
                                                                        "key": 1463,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Finish",
                                                                            "outgoing_links": {
                                                                                "SndTrainFinish": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1453,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1450,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 18.44440284604379,
                                                                                "y": -34.377498855660235
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "#go to next session\r",
                                                                                "link.hub.Data.SessionIdx += 1\r",
                                                                                "\r",
                                                                                "if link.hub.Data.SessionIdx < len(link.hub.Input.SessionSchedule):\r",
                                                                                "    link.DelayToSessionStart(nextYr = False)\r",
                                                                                "    \r",
                                                                                "else:\r",
                                                                                "    link.hub.Data.SessionIdx = 0\r",
                                                                                "    link.DelayToSessionStart(nextYr = True)"
                                                                            ]
                                                                        },
                                                                        "key": 1464,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "NextSession",
                                                                            "outgoing_links": {
                                                                                "DelayToSessionStart": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1461,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1450,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 5.983814681569553,
                                                                                "y": -42.51810526522001
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {},
                                                                        "key": 1465,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 1,
                                                                            "name": "StopTraining",
                                                                            "outgoing_links": {
                                                                                "Release": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1466,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -21.034880837044263,
                                                                                "y": -46.91947031151817
                                                                            },
                                                                            "size": {
                                                                                "height": 0.5,
                                                                                "scale_3d": 1.0,
                                                                                "width": 0.5
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "node"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "ID",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "if ID in link.hub.Data.InTraining:\r",
                                                                                "    del link.hub.Data.InTraining[ID]\r",
                                                                                "    \r",
                                                                                "if ID in link.hub.Data.Waitlist:\r",
                                                                                "    link.hub.Data.Waitlist.remove(ID)"
                                                                            ]
                                                                        },
                                                                        "key": 1466,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "StopTraining",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1450,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -16.869280390907246,
                                                                                "y": -44.82919111941537
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "print(link.library.get_waitlist())"
                                                                            ]
                                                                        },
                                                                        "key": 1467,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "function",
                                                                            "outgoing_links": {
                                                                                "library": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1459,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -9.936127294350463,
                                                                                "y": -23.705182031625434
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    }
                                                                ],
                                                                "ifx_ports_left": [
                                                                    1452,
                                                                    1465
                                                                ],
                                                                "ifx_ports_right": [
                                                                    1453
                                                                ],
                                                                "image_id": null,
                                                                "proxy_position": {
                                                                    "x": -0.6806719555009858,
                                                                    "y": 1.7989187395383204
                                                                },
                                                                "rotation_2d": 0.0,
                                                                "rotation_3d": {
                                                                    "pitch": 0.0,
                                                                    "roll": 0.0,
                                                                    "yaw": 0.0
                                                                }
                                                            },
                                                            "key": 1446,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Training",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -8.874374904552498,
                                                                    "y": -39.957315946695566
                                                                },
                                                                "size": {
                                                                    "height": 3.392857142857143,
                                                                    "scale_3d": 1.0,
                                                                    "width": 6.398809523809524
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "actor"
                                                        },
                                                        {
                                                            "content": {
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "def count_deployed():\r",
                                                                    "    \r",
                                                                    "    inRank = link.hub.data.InRank\r",
                                                                    "\r",
                                                                    "    return len([id for id in inRank if inRank[id]['DEPLOYED']])\r",
                                                                    "    \r",
                                                                    "    "
                                                                ]
                                                            },
                                                            "key": 1468,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "library",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1424,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 3.2885695338145924,
                                                                    "y": -24.435898619316763
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "library"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "num = 1200\r",
                                                                    "print('In rank', sum(link.record.InRank[-num:])/num)\r",
                                                                    "print('Promotable', sum(link.record.Promotable[-num:])/num)\r",
                                                                    "print('Promos per yr', sum(link.record.Promotions[-num:])/len(link.record.Promotions[-num:])*12)\r",
                                                                    "print('Releases per yr', sum(link.record.Releases[-num:])/len(link.record.Releases[-num:])*12)\r",
                                                                    "print('CTs out per yr', sum(link.record.CTouts[-num:])/len(link.record.CTouts[-num:])*12)\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1469,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "PrintSummary",
                                                                "outgoing_links": {
                                                                    "record": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1441,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 4.876750797335997,
                                                                    "y": 8.519222745922649
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {
                                                                    "finish": 0
                                                                },
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "rank = ''.join(filter(str.isalnum, link.hub.RankID.Name))\r",
                                                                    "cadre = link.hub.RankID.Cadre\r",
                                                                    "key = cadre + '_' + rank\r",
                                                                    "\r",
                                                                    "save = {}\r",
                                                                    "save[key + '_InRank'] = link.hub.record.InRank\r",
                                                                    "save[key + '_InTraining'] = link.hub.record.InTraining\r",
                                                                    "save[key + '_Deployed'] = link.hub.record.Deployed\r",
                                                                    "save[key + '_Promotable'] = link.hub.record.Promotable\r",
                                                                    "\r",
                                                                    "batch.set_replication_data(**save)"
                                                                ]
                                                            },
                                                            "key": 1470,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Finish",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1424,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -13.625566091516657,
                                                                    "y": -24.46185479022005
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        }
                                                    ],
                                                    "ifx_ports_left": [
                                                        1435,
                                                        1436,
                                                        1432
                                                    ],
                                                    "ifx_ports_right": [
                                                        1431,
                                                        1434,
                                                        1433,
                                                        1445
                                                    ],
                                                    "image_id": null,
                                                    "proxy_position": {
                                                        "x": -4.762093403985616,
                                                        "y": 3.5569417058638875
                                                    },
                                                    "rotation_2d": 0.0,
                                                    "rotation_3d": {
                                                        "pitch": 0.0,
                                                        "roll": 0.0,
                                                        "yaw": 0.0
                                                    }
                                                },
                                                "key": 1417,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "Lt-Capt",
                                                    "outgoing_links": {},
                                                    "position": {
                                                        "x": 3.5402171336533503,
                                                        "y": -7.266534004215897
                                                    },
                                                    "size": {
                                                        "height": 5.595238095238095,
                                                        "scale_3d": 1.0,
                                                        "width": 6.19047619047619
                                                    },
                                                    "visible": true
                                                },
                                                "type": "actor"
                                            },
                                            {
                                                "content": {
                                                    "children": [
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#if part of initial pop, send to initial pop function\r",
                                                                    "if 'INSERT' in props:\r",
                                                                    "        link.Insert(props)\r",
                                                                    "        return\r",
                                                                    "\r",
                                                                    "#get id\r",
                                                                    "ID = props['ID']\r",
                                                                    "\r",
                                                                    "#update props\r",
                                                                    "props['RANK'] = link.hub.RankID.Name\r",
                                                                    "props['OCC'] = link.hub.RankID.Occupation\r",
                                                                    "props['CADRE'] = link.hub.RankID.Cadre\r",
                                                                    "props['DOP'] = link.hub.datetime.date_time\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "#add to in-rank\r",
                                                                    "link.hub.data.InRank[ID] = props\r",
                                                                    "link.hub.data.InRankCount += 1\r",
                                                                    "\r",
                                                                    "#delay before start training (if needed)\r",
                                                                    "dbt = link.hub.RankInfo.DelayBeforeTraining\r",
                                                                    "if dbt > 0:\r",
                                                                    "    signal(link.StartTraining, props, delay(days = dbt))\r",
                                                                    "else:\r",
                                                                    "    link.StartTraining(props)\r",
                                                                    "\r",
                                                                    "#setup attrition\r",
                                                                    "link.SetupAttrition(props)\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1472,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "EnterRank",
                                                                "outgoing_links": {
                                                                    "Insert": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1493,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "SetupAttrition": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1492,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "StartTraining": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1479,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1478,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -30.012218907185066,
                                                                    "y": -39.795841039640734
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "dict": [
                                                                    [
                                                                        "Positions",
                                                                        45
                                                                    ],
                                                                    [
                                                                        "MinTIR",
                                                                        4
                                                                    ],
                                                                    [
                                                                        "MaxTIR",
                                                                        1000
                                                                    ],
                                                                    [
                                                                        "DelayBeforeTraining",
                                                                        0
                                                                    ],
                                                                    [
                                                                        "ReleaseIfFail",
                                                                        true
                                                                    ],
                                                                    [
                                                                        "PushPromote",
                                                                        false
                                                                    ],
                                                                    [
                                                                        "AttrRate",
                                                                        0.13
                                                                    ],
                                                                    [
                                                                        "MaxAge",
                                                                        1000
                                                                    ],
                                                                    [
                                                                        "DeployRatio",
                                                                        0.143
                                                                    ],
                                                                    [
                                                                        "CTRate",
                                                                        0.02
                                                                    ]
                                                                ],
                                                                "display_order": "of_creation",
                                                                "pickled_keys": []
                                                            },
                                                            "key": 1473,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "RankInfo",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -24.690955916045823,
                                                                    "y": -0.8998517282035177
                                                                },
                                                                "size": {
                                                                    "height": 10.178571428571429,
                                                                    "scale_3d": 1.0,
                                                                    "width": 6.875
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "data"
                                                        },
                                                        {
                                                            "content": {
                                                                "dict": [
                                                                    [
                                                                        "InRank",
                                                                        {}
                                                                    ],
                                                                    [
                                                                        "InTraining",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "Promotable",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "Deployed",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "InRankCount",
                                                                        0
                                                                    ],
                                                                    [
                                                                        "InTrainingCount",
                                                                        0
                                                                    ],
                                                                    [
                                                                        "PromotableCount",
                                                                        0
                                                                    ],
                                                                    [
                                                                        "DeployedCount",
                                                                        0
                                                                    ]
                                                                ],
                                                                "display_order": "of_creation",
                                                                "pickled_keys": []
                                                            },
                                                            "key": 1474,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "data",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -15.753892763598326,
                                                                    "y": -2.1163262518204564
                                                                },
                                                                "size": {
                                                                    "height": 9.375,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "data"
                                                        },
                                                        {
                                                            "content": {
                                                                "dict": [
                                                                    [
                                                                        "Name",
                                                                        "Maj"
                                                                    ],
                                                                    [
                                                                        "Occupation",
                                                                        "NWO"
                                                                    ],
                                                                    [
                                                                        "Cadre",
                                                                        "ResF"
                                                                    ]
                                                                ],
                                                                "display_order": "of_creation",
                                                                "pickled_keys": []
                                                            },
                                                            "key": 1475,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "RankID",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -27.50527447254697,
                                                                    "y": -12.681312051278057
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "data"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {
                                                                    "reset": 0
                                                                },
                                                                "script_imports": {
                                                                    "datetime": [
                                                                        "datetime",
                                                                        "datetime"
                                                                    ]
                                                                },
                                                                "script_lines": [
                                                                    "\r",
                                                                    "link.hub.data.InRank = {}\r",
                                                                    "link.hub.data.InTraining = []\r",
                                                                    "link.hub.data.Promotable = []\r",
                                                                    "link.hub.data.Deployed = []\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "link.hub.data.InRankCount = 0\r",
                                                                    "link.hub.data.InTrainingCount = 0\r",
                                                                    "link.hub.data.PromotableCount = 0\r",
                                                                    "link.hub.data.DeployedCount = 0\r",
                                                                    "\r",
                                                                    "startDate = datetime(2019,6,1,9,0,0)\r",
                                                                    "link.hub.datetime.set_date_time(startDate)\r",
                                                                    "\r",
                                                                    "link.hub.record.InRank = [0]\r",
                                                                    "link.hub.record.InTraining = [0]\r",
                                                                    "link.hub.record.Promotable = [0]\r",
                                                                    "link.hub.record.Deployed = [0]\r",
                                                                    "link.hub.record.Time = [startDate]\r",
                                                                    "link.hub.record.Releases = []\r",
                                                                    "link.hub.record.CTouts = []\r",
                                                                    "link.hub.record.Promotions = []\r",
                                                                    "link.hub.record.Positions = [link.hub.RankInfo.Positions]\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1476,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Reset",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1478,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 3.3173287652768817,
                                                                    "y": -13.986227580374978
                                                                },
                                                                "size": {
                                                                    "height": 6.011904761904762,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "date_time": {
                                                                    "day": 1,
                                                                    "hour": 9,
                                                                    "minute": 0,
                                                                    "month": 6,
                                                                    "second": 0,
                                                                    "year": 2019
                                                                }
                                                            },
                                                            "key": 1477,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "datetime",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": 2.3615869633262303,
                                                                    "y": -9.033337372290976
                                                                },
                                                                "size": {
                                                                    "height": 3.988095238095238,
                                                                    "scale_3d": 1.0,
                                                                    "width": 6.19047619047619
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "datetime"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1478,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "hub",
                                                                "outgoing_links": {
                                                                    "RankID": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1475,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "RankInfo": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1473,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "data": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1474,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "datetime": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1477,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "library": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1522,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "rank": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1471,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "record": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1495,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -7.750112694994645,
                                                                    "y": -18.00391297376486
                                                                },
                                                                "size": {
                                                                    "height": 1.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 1.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "hub"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "if props['ID'] not in link.hub.data.InRank: return\r",
                                                                    "\r",
                                                                    "link.hub.data.InTraining.append(props['ID'])\r",
                                                                    "link.hub.data.InTrainingCount += 1\r",
                                                                    "\r",
                                                                    "link.TrainRequest(props)"
                                                                ]
                                                            },
                                                            "key": 1479,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "StartTraining",
                                                                "outgoing_links": {
                                                                    "TrainRequest": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1506,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1478,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -20.026080654978394,
                                                                    "y": -39.697656269064375
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props, result",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "if props['ID'] not in link.hub.data.InRank: return\r",
                                                                    "\r",
                                                                    "link.hub.data.InTraining.remove(props['ID'])\r",
                                                                    "link.hub.data.InTrainingCount -= 1\r",
                                                                    "\r",
                                                                    "#if fail\r",
                                                                    "if result == 'F':\r",
                                                                    "    \r",
                                                                    "    #immediate release\r",
                                                                    "    if link.hub.RankInfo.ReleaseIfFail:\r",
                                                                    "        link.RemoveMember(props, 'failed')\r",
                                                                    "        \r",
                                                                    "    #or stay in rank until release\r",
                                                                    "\r",
                                                                    "#else pass\r",
                                                                    "else:\r",
                                                                    "    link.MinTIRDelay(props)\r",
                                                                    "        \r",
                                                                    "        \r",
                                                                    "        \r",
                                                                    "    \r",
                                                                    "    \r",
                                                                    "    \r",
                                                                    "    \r",
                                                                    "\r",
                                                                    "    "
                                                                ]
                                                            },
                                                            "key": 1480,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "FinishTraining",
                                                                "outgoing_links": {
                                                                    "MinTIRDelay": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1494,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "RemoveMember": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1491,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1478,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 5.515274902002796,
                                                                    "y": -39.49022853059453
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "if props['ID'] not in link.hub.data.InRank: return\r",
                                                                    "\r",
                                                                    "#if there is no next rank, do nothing\r",
                                                                    "if link.SndReq is None: return\r",
                                                                    "\r",
                                                                    "#add to promo list if not already there (might already be there in obscure cases)\r",
                                                                    "if props['ID'] not in link.hub.data.Promotable:\r",
                                                                    "    link.hub.data.Promotable.append(props['ID'])\r",
                                                                    "    link.hub.data.PromotableCount += 1\r",
                                                                    "\r",
                                                                    "#if push promote\r",
                                                                    "if link.hub.RankInfo.PushPromote:\r",
                                                                    "    link.Promote(props)\r",
                                                                    "\r",
                                                                    "#else request promotion\r",
                                                                    "else:\r",
                                                                    "    link.SndReq()\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1481,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "MetMinTIR",
                                                                "outgoing_links": {
                                                                    "Promote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1482,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "SndReq": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1488,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1478,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 21.676515289907346,
                                                                    "y": -39.3404021116089
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#promote to next rank\r",
                                                                    "link.PromoteOut(props)\r",
                                                                    "\r",
                                                                    "#remove from current rank\r",
                                                                    "link.RemoveMember(props, 'promoted')\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1482,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Promote",
                                                                "outgoing_links": {
                                                                    "PromoteOut": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1485,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "RemoveMember": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1491,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1478,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 30.26797020714654,
                                                                    "y": -39.30186888370791
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "nextRankPositions, nextRankCount",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "data = link.hub.data\r",
                                                                    "info = link.hub.RankInfo\r",
                                                                    "\r",
                                                                    "#maximum possible promotions\r",
                                                                    "maxPromos = min(data.PromotableCount, nextRankPositions - nextRankCount)\r",
                                                                    "\r",
                                                                    "#promotions to balance strength\r",
                                                                    "s0 = data.InRankCount\r",
                                                                    "s1 = nextRankCount\r",
                                                                    "p0 = info.Positions\r",
                                                                    "p1 = nextRankPositions\r",
                                                                    "balancePromos = (s0*p1 - s1*p0)/(p0 + p1)\r",
                                                                    "\r",
                                                                    "#adjust number of promos stochastically\r",
                                                                    "balancePromos_ = math.floor(balancePromos)\r",
                                                                    "frac = balancePromos - balancePromos_\r",
                                                                    "if random.random() > frac:\r",
                                                                    "    balancePromos = balancePromos_\r",
                                                                    "else:\r",
                                                                    "    balancePromos = balancePromos_ + 1\r",
                                                                    "\r",
                                                                    "#determine final number of promos\r",
                                                                    "numPromos = min(maxPromos, balancePromos)\r",
                                                                    "\r",
                                                                    "if numPromos <= 0: return\r",
                                                                    "\r",
                                                                    "promoteIDs = random.sample(link.hub.data.Promotable, numPromos)\r",
                                                                    "\r",
                                                                    "for ID in promoteIDs:\r",
                                                                    "    link.Promote(link.hub.data.InRank[ID])\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1483,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "PromoteInvite",
                                                                "outgoing_links": {
                                                                    "Promote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1482,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1478,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 30.236943946864095,
                                                                    "y": -54.94925517566933
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#if nothing below this rank, don't invite a promotion\r",
                                                                    "if link.InvitePromote is None: return\r",
                                                                    "\r",
                                                                    "# if there is room in the rank\r",
                                                                    "if link.hub.data.InRankCount < link.hub.RankInfo.Positions:\r",
                                                                    "\r",
                                                                    "    #send the number of positions and current in-rank count\r",
                                                                    "    link.InvitePromote(link.hub.RankInfo.Positions, link.hub.data.InRankCount)"
                                                                ]
                                                            },
                                                            "key": 1484,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "InvitePromote",
                                                                "outgoing_links": {
                                                                    "InvitePromote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1486,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1478,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -30.008885903158987,
                                                                    "y": -54.932325409304234
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1485,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "SndPromo",
                                                                "outgoing_links": {
                                                                    "Enter": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1543,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 40.81257151160083,
                                                                    "y": -41.4195199794459
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1486,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "SndInvite",
                                                                "outgoing_links": {
                                                                    "Invite": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1433,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -37.22325753644102,
                                                                    "y": -57.04376020783337
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1487,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "Invite",
                                                                "outgoing_links": {
                                                                    "PromoteInvite": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1483,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 41.1022611870765,
                                                                    "y": -57.271274325502496
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1488,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "SndReq",
                                                                "outgoing_links": {
                                                                    "Request": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1544,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 40.58019488696916,
                                                                    "y": -49.98849280979479
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1489,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "Enter",
                                                                "outgoing_links": {
                                                                    "EnterRank": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1472,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -37.04218246881857,
                                                                    "y": -42.01569816569041
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1490,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "Request",
                                                                "outgoing_links": {
                                                                    "InvitePromote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1484,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -36.98495220560267,
                                                                    "y": -49.363009874348336
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props, lossType",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "ID = props['ID']\r",
                                                                    "\r",
                                                                    "#remove from all member lists\r",
                                                                    "if ID in link.hub.data.InTraining:\r",
                                                                    "    link.hub.data.InTraining.remove(ID)\r",
                                                                    "    link.hub.data.InTrainingCount -= 1\r",
                                                                    "    \r",
                                                                    "\r",
                                                                    "if ID in link.hub.data.Promotable:\r",
                                                                    "    link.hub.data.Promotable.remove(ID)\r",
                                                                    "    link.hub.data.PromotableCount -= 1\r",
                                                                    "\r",
                                                                    "if ID in link.hub.data.InRank:\r",
                                                                    "    del link.hub.data.InRank[ID]\r",
                                                                    "    link.hub.data.InRankCount -= 1\r",
                                                                    "    \r",
                                                                    "    #record release\r",
                                                                    "    if lossType == 'released':\r",
                                                                    "        props['RELEASED'] = True\r",
                                                                    "        link.hub.record.Releases[-1] += 1\r",
                                                                    "        link.Release(props)\r",
                                                                    "        link.StopTraining(ID)\r",
                                                                    "    \r",
                                                                    "    #record CT\r",
                                                                    "    elif lossType == 'CT':\r",
                                                                    "        props['CT'] = True\r",
                                                                    "        props['DOP'] = link.hub.datetime.date_time  #override promotion time\r",
                                                                    "        link.hub.record.CTouts[-1] += 1\r",
                                                                    "        link.Release(props)\r",
                                                                    "        link.StopTraining(ID)\r",
                                                                    "        \r",
                                                                    "    \r",
                                                                    "    #record promotion\r",
                                                                    "    elif lossType == 'promoted':\r",
                                                                    "        link.hub.record.Promotions[-1] += 1\r",
                                                                    "    \r",
                                                                    "    #invite promotion\r",
                                                                    "    link.InvitePromote()\r",
                                                                    "    \r",
                                                                    "\r",
                                                                    "    \r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1491,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "RemoveMember",
                                                                "outgoing_links": {
                                                                    "InvitePromote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1484,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "Release": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1499,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": 32.34392154184954,
                                                                                    "y": -63.223816325109745
                                                                                }
                                                                            }
                                                                        ]
                                                                    },
                                                                    "StopTraining": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1519,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": -11.890454134805578,
                                                                                    "y": -46.83253535228758
                                                                                }
                                                                            },
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": -11.858746257112767,
                                                                                    "y": -43.72516333839172
                                                                                }
                                                                            }
                                                                        ]
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1478,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 5.817043142888761,
                                                                    "y": -54.71431714204966
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#MaxAge\r",
                                                                    "ageDays = (link.hub.datetime.date_time - props['DOB']).days\r",
                                                                    "maxAgeDaysLeft = link.hub.RankInfo.MaxAge*365 - ageDays\r",
                                                                    "\r",
                                                                    "#Max TIR\r",
                                                                    "TIRDays = (link.hub.datetime.date_time - props['DOP']).days\r",
                                                                    "maxTIRDaysLeft = link.hub.RankInfo.MaxTIR*365 - TIRDays\r",
                                                                    "\r",
                                                                    "#voluntary release (based on attrition rate)\r",
                                                                    "alpha = -math.log(1.0 - link.hub.RankInfo.AttrRate)\r",
                                                                    "volDaysLeft = random.expovariate(alpha)*365\r",
                                                                    "\r",
                                                                    "#CT release (based on CT rate)\r",
                                                                    "alpha = -math.log(1.0 - link.hub.RankInfo.CTRate)\r",
                                                                    "ctDaysLeft = random.expovariate(alpha)*365\r",
                                                                    "\r",
                                                                    "#note, need to label CT releases\r",
                                                                    "\r",
                                                                    "#schedule release\r",
                                                                    "days = min(maxAgeDaysLeft, maxTIRDaysLeft, volDaysLeft, ctDaysLeft)\r",
                                                                    "\r",
                                                                    "#label the loss type\r",
                                                                    "lossType = 'released'\r",
                                                                    "if days == ctDaysLeft:\r",
                                                                    "    lossType = 'CT'\r",
                                                                    "\r",
                                                                    "signal(link.RemoveMember, (props, lossType), delay(days = days))"
                                                                ]
                                                            },
                                                            "key": 1492,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "SetupAttrition",
                                                                "outgoing_links": {
                                                                    "RemoveMember": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1491,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1478,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -20.00560338611418,
                                                                    "y": -46.629645698637454
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#insert member into model (used for initial pop and CTs)\r",
                                                                    "\r",
                                                                    "#if member not in this rank, send to next rank (if next rank exists)\r",
                                                                    "if props['RANK'] != link.hub.RankID.Name:\r",
                                                                    "    if link.SndPromo is not None:\r",
                                                                    "        #log.warning(\"Rank: %s, Member rank: %s, Member ID: %s\" % (link.hub.RankID.Name, props['RANK'], props['ID']))\r",
                                                                    "        link.SndPromo(props)\r",
                                                                    "    else:\r",
                                                                    "        log.warning(\"Input member's rank not found in model.\")\r",
                                                                    "    return\r",
                                                                    "\r",
                                                                    "#log.warning(\"member %s enter %s\" % (props['ID'], link.hub.RankID.Name))\r",
                                                                    "\r",
                                                                    "#cancel insert flag\r",
                                                                    "if 'INSERT' in props:\r",
                                                                    "    del props['INSERT']\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "#get id\r",
                                                                    "ID = props['ID']\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "#update props (not all usual props are updated for initial pop)\r",
                                                                    "props['OCC'] = link.hub.RankID.Occupation\r",
                                                                    "props['CADRE'] = link.hub.RankID.Cadre\r",
                                                                    "\r",
                                                                    "#add to in-rank\r",
                                                                    "link.hub.data.InRank[ID] = props\r",
                                                                    "link.hub.data.InRankCount += 1\r",
                                                                    "\r",
                                                                    "#insert at Min-TIR delay step\r",
                                                                    "link.MinTIRDelay(props)\r",
                                                                    "\r",
                                                                    "#setup attrition\r",
                                                                    "link.SetupAttrition(props)\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1493,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Insert",
                                                                "outgoing_links": {
                                                                    "MinTIRDelay": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1494,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": 13.558717964465075,
                                                                                    "y": -31.554183083148093
                                                                                }
                                                                            }
                                                                        ]
                                                                    },
                                                                    "SetupAttrition": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1492,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "SndPromo": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1485,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": 31.94937653742584,
                                                                                    "y": -28.477348338185028
                                                                                }
                                                                            }
                                                                        ]
                                                                    },
                                                                    "StartTraining": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1479,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1478,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -29.989434128890377,
                                                                    "y": -29.305548588756988
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#if member entered this rank as initial pop, cancel the flag here\r",
                                                                    "#(no more treatment as initial_pop once processed through initial rank)\r",
                                                                    "if 'INSERT' in props:\r",
                                                                    "    del props['INSERT']\r",
                                                                    "\r",
                                                                    "#delay to Min TIR (if required)\r",
                                                                    "TIRdays = (link.hub.datetime.date_time - props['DOP']).days\r",
                                                                    "daysLeft = link.hub.RankInfo.MinTIR*365.25 - TIRdays\r",
                                                                    "\r",
                                                                    "if daysLeft > 0.0:\r",
                                                                    "    signal(link.MetMinTIR, props, delay(days = daysLeft))\r",
                                                                    "else:\r",
                                                                    "    link.MetMinTIR(props)\r",
                                                                    "        "
                                                                ]
                                                            },
                                                            "key": 1494,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "MinTIRDelay",
                                                                "outgoing_links": {
                                                                    "MetMinTIR": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1481,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1478,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 13.542800192312592,
                                                                    "y": -39.313536257975215
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "dict": [
                                                                    [
                                                                        "InRank",
                                                                        [
                                                                            0
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "InTraining",
                                                                        [
                                                                            0
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "Promotable",
                                                                        [
                                                                            0
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "Time",
                                                                        "gANdcQBjZGF0ZXRpbWUKZGF0ZXRpbWUKcQFDCgfjBgEJAAAAAABxAoVxA1JxBGEu"
                                                                    ],
                                                                    [
                                                                        "Releases",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "Promotions",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "Deployed",
                                                                        [
                                                                            0
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "Positions",
                                                                        [
                                                                            45
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "CTouts",
                                                                        []
                                                                    ]
                                                                ],
                                                                "display_order": "of_creation",
                                                                "pickled_keys": [
                                                                    "Time"
                                                                ]
                                                            },
                                                            "key": 1495,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "record",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -2.318244754210149,
                                                                    "y": -2.2214258111749743
                                                                },
                                                                "size": {
                                                                    "height": 5.803571428571428,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "data"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {
                                                                    "startup": 0
                                                                },
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "link.hub.record.InRank.append(link.hub.data.InRankCount)\r",
                                                                    "link.hub.record.InTraining.append(link.hub.data.InTrainingCount)\r",
                                                                    "link.hub.record.Promotable.append(link.hub.data.PromotableCount)\r",
                                                                    "link.hub.record.Deployed.append(link.hub.library.count_deployed())\r",
                                                                    "link.hub.record.Time.append(link.hub.datetime.date_time)\r",
                                                                    "link.hub.record.Positions.append(link.hub.RankInfo.Positions)\r",
                                                                    "\r",
                                                                    "link.hub.record.Releases.append(0)\r",
                                                                    "link.hub.record.CTouts.append(0)\r",
                                                                    "link.hub.record.Promotions.append(0)\r",
                                                                    "\r",
                                                                    "signal(self, (), delay(days = 30.44))"
                                                                ]
                                                            },
                                                            "key": 1496,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Record",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1478,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 9.0110398583115,
                                                                    "y": -14.067710898295612
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "script_lines": [
                                                                    "def configure():",
                                                                    "    axes = setup_axes(1, 1)",
                                                                    "\r",
                                                                    "    axes.set_xlabel('Time')",
                                                                    "    axes.set_ylabel('Population')",
                                                                    "",
                                                                    "    ",
                                                                    "",
                                                                    "def plot():\r",
                                                                    "    \r",
                                                                    "    lastTime = link.record.Time[-1]\r",
                                                                    "    ",
                                                                    "    axes.fill(link.record.Time + [lastTime], link.record.InRank + [0], 'grey', alpha = 0.5, label = 'In Rank')\r",
                                                                    "    axes.fill(link.record.Time + [lastTime], link.record.InTraining + [0], 'r', alpha = 0.3, label = 'In Training')\r",
                                                                    "    axes.fill(link.record.Time + [lastTime], link.record.Promotable + [0], 'b', alpha = 0.3, label = 'Promotable')\r",
                                                                    "    axes.fill(link.record.Time + [lastTime], link.record.Deployed + [0], 'black', alpha = 0.6, label = 'Deployed')",
                                                                    "    axes.plot(link.record.Time, link.record.Positions, 'k', linestyle = 'dashed', label = 'Positions', linewidth = 3)\r",
                                                                    "\r",
                                                                    "    handles, labels = axes.get_legend_handles_labels()\r",
                                                                    "    axes.legend(handles, labels, loc = 9, ncol = 3, bbox_to_anchor = (0.5, 1.12))",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1497,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "plot",
                                                                "outgoing_links": {
                                                                    "record": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1495,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 16.366223339152167,
                                                                    "y": 2.484834311425601
                                                                },
                                                                "size": {
                                                                    "height": 21.07142857142857,
                                                                    "scale_3d": 1.0,
                                                                    "width": 19.910714285714285
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "plot"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "positions, attrRate, minTIR, pushPromo, ctRate",
                                                                "roles_and_prioritizing": {
                                                                    "setup": 3
                                                                },
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "link.hub.RankInfo.Positions = positions\r",
                                                                    "link.hub.RankInfo.AttrRate = attrRate\r",
                                                                    "link.hub.RankInfo.MinTIR = minTIR\r",
                                                                    "link.hub.RankInfo.PushPromote = pushPromo\r",
                                                                    "link.hub.RankInfo.CTRate = ctRate\r",
                                                                    "\r",
                                                                    "link.hub.RankID.Name = link.hub._rank_.get_name()"
                                                                ]
                                                            },
                                                            "key": 1498,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Setup",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1478,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 3.2430370494555407,
                                                                    "y": -19.466952743026894
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1499,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "Release",
                                                                "outgoing_links": {
                                                                    "Release": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1397,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": 22.76871892266672,
                                                                                    "y": -14.875563029475593
                                                                                }
                                                                            }
                                                                        ]
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 41.33403873965582,
                                                                    "y": -63.389691111668604
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {
                                                                "children": [
                                                                    {
                                                                        "content": {
                                                                            "parameters": "props",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "ID = props['ID']\r",
                                                                                "props['IN_TRAINING'] = True\r",
                                                                                "\r",
                                                                                "#add to training list\r",
                                                                                "link.hub.Data.InTraining[ID] = props\r",
                                                                                "\r",
                                                                                "#go on waitlist\r",
                                                                                "link.hub.Data.Waitlist.append(ID)\r",
                                                                                "\r",
                                                                                "\r",
                                                                                "\r",
                                                                                "\r",
                                                                                "    \r",
                                                                                "    "
                                                                            ]
                                                                        },
                                                                        "key": 1501,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Arrive",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1504,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -16.694797152199428,
                                                                                "y": -34.31994988357029
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "dict": [
                                                                                [
                                                                                    "DurationDays",
                                                                                    30
                                                                                ],
                                                                                [
                                                                                    "MinSessionSize",
                                                                                    1
                                                                                ],
                                                                                [
                                                                                    "MaxSessionSize",
                                                                                    10
                                                                                ],
                                                                                [
                                                                                    "SuccessRate",
                                                                                    1
                                                                                ],
                                                                                [
                                                                                    "SessionSchedule",
                                                                                    "gANdcQBLB0sPhnEBYS4="
                                                                                ]
                                                                            ],
                                                                            "display_order": "of_creation",
                                                                            "pickled_keys": [
                                                                                "SessionSchedule"
                                                                            ]
                                                                        },
                                                                        "key": 1502,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Input",
                                                                            "outgoing_links": {},
                                                                            "position": {
                                                                                "x": -14.664036274121262,
                                                                                "y": -0.76648840428639
                                                                            },
                                                                            "size": {
                                                                                "height": 6.5476190476190474,
                                                                                "scale_3d": 1.0,
                                                                                "width": 9.523809523809524
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "data"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "dict": [
                                                                                [
                                                                                    "InTraining",
                                                                                    {}
                                                                                ],
                                                                                [
                                                                                    "Waitlist",
                                                                                    []
                                                                                ],
                                                                                [
                                                                                    "Attendance",
                                                                                    []
                                                                                ],
                                                                                [
                                                                                    "StartDates",
                                                                                    []
                                                                                ],
                                                                                [
                                                                                    "SessionIdx",
                                                                                    0
                                                                                ]
                                                                            ],
                                                                            "display_order": "of_creation",
                                                                            "pickled_keys": []
                                                                        },
                                                                        "key": 1503,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Data",
                                                                            "outgoing_links": {},
                                                                            "position": {
                                                                                "x": -4.235163886363756,
                                                                                "y": -0.7590424824417763
                                                                            },
                                                                            "size": {
                                                                                "height": 6.607142857142857,
                                                                                "scale_3d": 1.0,
                                                                                "width": 8.660714285714285
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "data"
                                                                    },
                                                                    {
                                                                        "content": {},
                                                                        "key": 1504,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "hub",
                                                                            "outgoing_links": {
                                                                                "Data": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1503,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "Input": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1502,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "Record": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1510,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "datetime": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1508,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "library": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1513,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -1.135639561950389,
                                                                                "y": -13.488105952112994
                                                                            },
                                                                            "size": {
                                                                                "height": 1.5,
                                                                                "scale_3d": 1.0,
                                                                                "width": 1.5
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "hub"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {
                                                                                "reset": 0
                                                                            },
                                                                            "script_imports": {
                                                                                "datetime": [
                                                                                    "datetime",
                                                                                    "datetime"
                                                                                ]
                                                                            },
                                                                            "script_lines": [
                                                                                "link.hub.Data.InTraining = {}\r",
                                                                                "link.hub.Data.Waitlist = []\r",
                                                                                "link.hub.Data.Attendance = []\r",
                                                                                "link.hub.Data.StartDates = []\r",
                                                                                "link.hub.Data.SessionIdx = 0\r",
                                                                                "\r",
                                                                                "startDate = datetime(2019,6,1,9,0,0)\r",
                                                                                "link.hub.datetime.set_date_time(startDate)\r",
                                                                                "\r",
                                                                                "link.hub.Record.Waitlist = [0]\r",
                                                                                "link.hub.Record.Time = [startDate]\r",
                                                                                ""
                                                                            ]
                                                                        },
                                                                        "key": 1505,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Reset",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1504,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 9.448075269869122,
                                                                                "y": -13.073071682303503
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {},
                                                                        "key": 1506,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 1,
                                                                            "name": "TrainRequest",
                                                                            "outgoing_links": {
                                                                                "Arrive": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1501,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -20.800874878523683,
                                                                                "y": -36.48950085353416
                                                                            },
                                                                            "size": {
                                                                                "height": 0.5,
                                                                                "scale_3d": 1.0,
                                                                                "width": 0.5
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "node"
                                                                    },
                                                                    {
                                                                        "content": {},
                                                                        "key": 1507,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 1,
                                                                            "name": "SndTrainFinish",
                                                                            "outgoing_links": {
                                                                                "FinishTraining": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1480,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 27.97851400511773,
                                                                                "y": -36.629572966635514
                                                                            },
                                                                            "size": {
                                                                                "height": 0.5,
                                                                                "scale_3d": 1.0,
                                                                                "width": 0.5
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "node"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "date_time": {
                                                                                "day": 1,
                                                                                "hour": 9,
                                                                                "minute": 0,
                                                                                "month": 6,
                                                                                "second": 0,
                                                                                "year": 2019
                                                                            }
                                                                        },
                                                                        "key": 1508,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "datetime",
                                                                            "outgoing_links": {},
                                                                            "position": {
                                                                                "x": -11.68177009004484,
                                                                                "y": -11.093761528465397
                                                                            },
                                                                            "size": {
                                                                                "height": 3.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 6.2
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "datetime"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "script_lines": [
                                                                                "def configure():\r",
                                                                                "    axes = setup_axes(1, 1)",
                                                                                "\r",
                                                                                "    \r",
                                                                                "",
                                                                                "",
                                                                                "def plot():\r",
                                                                                "    \r",
                                                                                "    axes = setup_axes(1, 1)\r",
                                                                                "    axes.set_xlabel('Time (years)')\r",
                                                                                "    axes.set_ylabel('Number of people')\r",
                                                                                "    \r",
                                                                                "    #don't plot if data is empty\r",
                                                                                "    if len(link.hub.Record.Waitlist) <= 1:\r",
                                                                                "        return\r",
                                                                                "\r",
                                                                                "    #plot the waitlist\r",
                                                                                "    lastTime = link.hub.Record.Time[-1]\r",
                                                                                "    axes.fill(link.hub.Record.Time + [lastTime], link.hub.Record.Waitlist + [0], 'b', alpha = 0.3, label = 'Waitlist')",
                                                                                "    axes.figure.autofmt_xdate()\r",
                                                                                "    \r",
                                                                                "    \r",
                                                                                "    #plot the session attendance\r",
                                                                                "    height = link.hub.Data.Attendance\r",
                                                                                "    width = [link.hub.Input.DurationDays]*len(height)\r",
                                                                                "    left = link.hub.Data.StartDates\r",
                                                                                "    y_pos = [0]*len(height)\r",
                                                                                "    axes.barh(y_pos, width, height = height, left = left, color = 'green', alpha = 0.6, label = 'Session Attendance')\r",
                                                                                "    \r",
                                                                                "    #legend\r",
                                                                                "    handles, labels = axes.get_legend_handles_labels()\r",
                                                                                "    axes.legend(handles, labels, loc = 9, ncol = 3, bbox_to_anchor = (0.5, 1.12))"
                                                                            ]
                                                                        },
                                                                        "key": 1509,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Attendance",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1504,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 18.05520745979187,
                                                                                "y": -1.1322048215124676
                                                                            },
                                                                            "size": {
                                                                                "height": 16.2,
                                                                                "scale_3d": 1.0,
                                                                                "width": 15.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "plot"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "dict": [
                                                                                [
                                                                                    "Waitlist",
                                                                                    [
                                                                                        0
                                                                                    ]
                                                                                ],
                                                                                [
                                                                                    "Time",
                                                                                    "gANdcQBjZGF0ZXRpbWUKZGF0ZXRpbWUKcQFDCgfjBgEJAAAAAABxAoVxA1JxBGEu"
                                                                                ]
                                                                            ],
                                                                            "display_order": "of_creation",
                                                                            "pickled_keys": [
                                                                                "Time"
                                                                            ]
                                                                        },
                                                                        "key": 1510,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Record",
                                                                            "outgoing_links": {},
                                                                            "position": {
                                                                                "x": 5.519563999613053,
                                                                                "y": -0.7859267560572475
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "data"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {
                                                                                "startup": 0
                                                                            },
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "link.hub.Record.Waitlist.append(len(link.hub.Data.Waitlist))\r",
                                                                                "link.hub.Record.Time.append(link.hub.datetime.date_time)\r",
                                                                                "\r",
                                                                                "signal(self, (), delay(days = 7))"
                                                                            ]
                                                                        },
                                                                        "key": 1511,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Record",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1504,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 9.55578961375507,
                                                                                "y": -7.625327065521719
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "duration, minSessionSize, maxSessionSize, successRate, sessionSchedule",
                                                                            "roles_and_prioritizing": {
                                                                                "setup": 3
                                                                            },
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "link.hub.Input.DurationDays = duration\r",
                                                                                "link.hub.Input.MinSessionSize = minSessionSize\r",
                                                                                "link.hub.Input.MaxSessionSize = maxSessionSize\r",
                                                                                "link.hub.Input.SuccessRate = successRate\r",
                                                                                "link.hub.Input.SessionSchedule = sessionSchedule"
                                                                            ]
                                                                        },
                                                                        "key": 1512,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Setup",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1504,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 9.417960966070991,
                                                                                "y": -18.46107648244264
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "script_imports": {
                                                                                "datetime": [
                                                                                    "datetime",
                                                                                    "datetime"
                                                                                ]
                                                                            },
                                                                            "script_lines": [
                                                                                "def get_waitlist():\r",
                                                                                "    inTrng = link.hub.Data.InTraining\r",
                                                                                "    return [id for id in link.hub.Data.Waitlist\r",
                                                                                "        if inTrng[id]['RELEASED']]\r",
                                                                                "        \r",
                                                                                "\r",
                                                                                "\r",
                                                                                "def get_trainable_on_waitlist():\r",
                                                                                "    inTrng = link.hub.Data.InTraining\r",
                                                                                "    return [id for id in link.hub.Data.Waitlist\r",
                                                                                "        if not inTrng[id]['RESERVED']\r",
                                                                                "        and not inTrng[id]['DEPLOYED']\r",
                                                                                "        and not inTrng[id]['RELEASED']]\r",
                                                                                "    \r",
                                                                                "def count_trainable_on_waitlist():\r",
                                                                                "    return len(get_trainable_on_waitlist())\r",
                                                                                "    \r",
                                                                                "    \r",
                                                                                "def get_start_session_idx():\r",
                                                                                "    #assumes session schedule is in order\r",
                                                                                "    #returns the index of the first session based on the current datetime\r",
                                                                                "    \r",
                                                                                "    year = link.hub.datetime.year\r",
                                                                                "    \r",
                                                                                "    startDates = [datetime(year, m, d, 8, 0, 0) for m,d in link.hub.Input.SessionSchedule]\r",
                                                                                "    \r",
                                                                                "    delays = [(t - link.hub.datetime.get_date_time()).total_seconds() for t in startDates]\r",
                                                                                "    \r",
                                                                                "    #return the smallest positive delay\r",
                                                                                "    for i in range(len(delays)):\r",
                                                                                "        if delays[i] > 0:\r",
                                                                                "            return i\r",
                                                                                "   \r",
                                                                                "    #if no more sessions this year, return first session for next year\r",
                                                                                "    return 0\r",
                                                                                "    "
                                                                            ]
                                                                        },
                                                                        "key": 1513,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "library",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1504,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -11.156992490107825,
                                                                                "y": -15.437735791363107
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "library"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {
                                                                                "startup": 0
                                                                            },
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "link.hub.Data.SessionIdx = link.hub.library.get_start_session_idx()\r",
                                                                                "\r",
                                                                                "link.DelayToSessionStart()\r",
                                                                                "\r",
                                                                                "\r",
                                                                                ""
                                                                            ]
                                                                        },
                                                                        "key": 1514,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "GetFirstSession",
                                                                            "outgoing_links": {
                                                                                "DelayToSessionStart": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1515,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1504,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -6.831928977706746,
                                                                                "y": -34.44116769677284
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "nextYr = False",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {
                                                                                "datetime": [
                                                                                    "datetime",
                                                                                    "datetime"
                                                                                ]
                                                                            },
                                                                            "script_lines": [
                                                                                "session = link.hub.Input.SessionSchedule[link.hub.Data.SessionIdx]\r",
                                                                                "\r",
                                                                                "year = link.hub.datetime.year\r",
                                                                                "month = session[0]\r",
                                                                                "day = session[1]\r",
                                                                                "\r",
                                                                                "delayDays = (datetime(year, month, day, 8, 0, 0) - link.hub.datetime.date_time).total_seconds()/86400.0\r",
                                                                                "\r",
                                                                                "if delayDays < 0.0 or nextYr:\r",
                                                                                "    delayDays = (datetime(year + 1, month, day, 8, 0, 0) - link.hub.datetime.date_time).total_seconds()/86400.0\r",
                                                                                "\r",
                                                                                "signal(link.StartSession, (), delay(days = delayDays))\r",
                                                                                ""
                                                                            ]
                                                                        },
                                                                        "key": 1515,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "DelayToSessionStart",
                                                                            "outgoing_links": {
                                                                                "StartSession": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1516,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1504,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 1.5855408583978676,
                                                                                "y": -34.353601749967424
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "input = link.hub.Input\r",
                                                                                "data = link.hub.Data\r",
                                                                                "\r",
                                                                                "#get the list of potential session starts, up to max session size\r",
                                                                                "sessionList = link.hub.library.get_trainable_on_waitlist()[:input.MaxSessionSize]\r",
                                                                                "\r",
                                                                                "#if at least have the min session size\r",
                                                                                "if len(sessionList) >= input.MinSessionSize:\r",
                                                                                "    \r",
                                                                                "    #remove ids from waitlist and set status to attending training\r",
                                                                                "    for id in sessionList:\r",
                                                                                "        data.Waitlist.remove(id)\r",
                                                                                "        data.InTraining[id]['ATTENDING_TRNG'] = True\r",
                                                                                "    \r",
                                                                                "    #track attendance and start date\r",
                                                                                "    data.Attendance.append(len(sessionList))\r",
                                                                                "    data.StartDates.append(link.hub.datetime.date_time)\r",
                                                                                "    \r",
                                                                                "    #signal to finish the course after course duration\r",
                                                                                "    signal(link.Finish, sessionList, delay(days = input.DurationDays))\r",
                                                                                "\r",
                                                                                "#else record zero-loaded session\r",
                                                                                "else:\r",
                                                                                "    data.Attendance.append(0)\r",
                                                                                "    data.StartDates.append(link.hub.datetime.date_time)\r",
                                                                                "    \r",
                                                                                "#setup next session\r",
                                                                                "link.NextSession()"
                                                                            ]
                                                                        },
                                                                        "key": 1516,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "StartSession",
                                                                            "outgoing_links": {
                                                                                "Finish": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1517,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "NextSession": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1518,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1504,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 10.16430095764344,
                                                                                "y": -34.388760602833166
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "sessionList",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "input = link.hub.Input\r",
                                                                                "data = link.hub.Data\r",
                                                                                "#for each session attendee\r",
                                                                                "for ID in sessionList:\r",
                                                                                "    \r",
                                                                                "    if ID in data.InTraining:\r",
                                                                                "    \r",
                                                                                "        #update properties\r",
                                                                                "        props = data.InTraining[ID]\r",
                                                                                "        props['ATTENDING_TRNG'] = False\r",
                                                                                "        props['IN_TRAINING'] = False\r",
                                                                                "        props['TRAINING_COMPLETED'] = True\r",
                                                                                "\r",
                                                                                "        #if pass\r",
                                                                                "        if random.random() < input.SuccessRate:\r",
                                                                                "            result = 'P'\r",
                                                                                "        #else fail\r",
                                                                                "        else:\r",
                                                                                "            result = 'F'\r",
                                                                                "            props['TRAINING_FAILED'] = True\r",
                                                                                "                 \r",
                                                                                "        #remove\r",
                                                                                "        del data.InTraining[ID]\r",
                                                                                "\r",
                                                                                "        link.SndTrainFinish(props, result)"
                                                                            ]
                                                                        },
                                                                        "key": 1517,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Finish",
                                                                            "outgoing_links": {
                                                                                "SndTrainFinish": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1507,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1504,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 18.44440284604379,
                                                                                "y": -34.377498855660235
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "#go to next session\r",
                                                                                "link.hub.Data.SessionIdx += 1\r",
                                                                                "\r",
                                                                                "if link.hub.Data.SessionIdx < len(link.hub.Input.SessionSchedule):\r",
                                                                                "    link.DelayToSessionStart(nextYr = False)\r",
                                                                                "    \r",
                                                                                "else:\r",
                                                                                "    link.hub.Data.SessionIdx = 0\r",
                                                                                "    link.DelayToSessionStart(nextYr = True)"
                                                                            ]
                                                                        },
                                                                        "key": 1518,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "NextSession",
                                                                            "outgoing_links": {
                                                                                "DelayToSessionStart": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1515,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1504,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 5.983814681569553,
                                                                                "y": -42.51810526522001
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {},
                                                                        "key": 1519,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 1,
                                                                            "name": "StopTraining",
                                                                            "outgoing_links": {
                                                                                "Release": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1520,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -21.034880837044263,
                                                                                "y": -46.91947031151817
                                                                            },
                                                                            "size": {
                                                                                "height": 0.5,
                                                                                "scale_3d": 1.0,
                                                                                "width": 0.5
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "node"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "ID",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "if ID in link.hub.Data.InTraining:\r",
                                                                                "    del link.hub.Data.InTraining[ID]\r",
                                                                                "    \r",
                                                                                "if ID in link.hub.Data.Waitlist:\r",
                                                                                "    link.hub.Data.Waitlist.remove(ID)"
                                                                            ]
                                                                        },
                                                                        "key": 1520,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "StopTraining",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1504,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -16.869280390907246,
                                                                                "y": -44.82919111941537
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "print(link.library.get_waitlist())"
                                                                            ]
                                                                        },
                                                                        "key": 1521,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "function",
                                                                            "outgoing_links": {
                                                                                "library": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1513,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -9.936127294350463,
                                                                                "y": -23.705182031625434
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    }
                                                                ],
                                                                "ifx_ports_left": [
                                                                    1506,
                                                                    1519
                                                                ],
                                                                "ifx_ports_right": [
                                                                    1507
                                                                ],
                                                                "image_id": null,
                                                                "proxy_position": {
                                                                    "x": -0.6806719555009858,
                                                                    "y": 1.7989187395383204
                                                                },
                                                                "rotation_2d": 0.0,
                                                                "rotation_3d": {
                                                                    "pitch": 0.0,
                                                                    "roll": 0.0,
                                                                    "yaw": 0.0
                                                                }
                                                            },
                                                            "key": 1500,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Training",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -8.874374904552498,
                                                                    "y": -39.957315946695566
                                                                },
                                                                "size": {
                                                                    "height": 3.392857142857143,
                                                                    "scale_3d": 1.0,
                                                                    "width": 6.398809523809524
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "actor"
                                                        },
                                                        {
                                                            "content": {
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "def count_deployed():\r",
                                                                    "    \r",
                                                                    "    inRank = link.hub.data.InRank\r",
                                                                    "\r",
                                                                    "    return len([id for id in inRank if inRank[id]['DEPLOYED']])\r",
                                                                    "    \r",
                                                                    "    "
                                                                ]
                                                            },
                                                            "key": 1522,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "library",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1478,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 3.2885695338145924,
                                                                    "y": -24.435898619316763
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "library"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "num = 1200\r",
                                                                    "print('In rank', sum(link.record.InRank[-num:])/num)\r",
                                                                    "print('Promotable', sum(link.record.Promotable[-num:])/num)\r",
                                                                    "print('Promos per yr', sum(link.record.Promotions[-num:])/len(link.record.Promotions[-num:])*12)\r",
                                                                    "print('Releases per yr', sum(link.record.Releases[-num:])/len(link.record.Releases[-num:])*12)\r",
                                                                    "print('CTs out per yr', sum(link.record.CTouts[-num:])/len(link.record.CTouts[-num:])*12)\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1523,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "PrintSummary",
                                                                "outgoing_links": {
                                                                    "record": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1495,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 4.876750797335997,
                                                                    "y": 8.519222745922649
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {
                                                                    "finish": 0
                                                                },
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "rank = ''.join(filter(str.isalnum, link.hub.RankID.Name))\r",
                                                                    "cadre = link.hub.RankID.Cadre\r",
                                                                    "key = cadre + '_' + rank\r",
                                                                    "\r",
                                                                    "save = {}\r",
                                                                    "save[key + '_InRank'] = link.hub.record.InRank\r",
                                                                    "save[key + '_InTraining'] = link.hub.record.InTraining\r",
                                                                    "save[key + '_Deployed'] = link.hub.record.Deployed\r",
                                                                    "save[key + '_Promotable'] = link.hub.record.Promotable\r",
                                                                    "\r",
                                                                    "batch.set_replication_data(**save)"
                                                                ]
                                                            },
                                                            "key": 1524,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Finish",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1478,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 9.166083906495096,
                                                                    "y": -19.551756559137136
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        }
                                                    ],
                                                    "ifx_ports_left": [
                                                        1489,
                                                        1490,
                                                        1486
                                                    ],
                                                    "ifx_ports_right": [
                                                        1485,
                                                        1488,
                                                        1487,
                                                        1499
                                                    ],
                                                    "image_id": null,
                                                    "proxy_position": {
                                                        "x": -4.762093403985616,
                                                        "y": 3.5569417058638875
                                                    },
                                                    "rotation_2d": 0.0,
                                                    "rotation_3d": {
                                                        "pitch": 0.0,
                                                        "roll": 0.0,
                                                        "yaw": 0.0
                                                    }
                                                },
                                                "key": 1471,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "Maj",
                                                    "outgoing_links": {},
                                                    "position": {
                                                        "x": 14.165619297564481,
                                                        "y": -7.266534004215896
                                                    },
                                                    "size": {
                                                        "height": 5.595238095238095,
                                                        "scale_3d": 1.0,
                                                        "width": 6.19047619047619
                                                    },
                                                    "visible": true
                                                },
                                                "type": "actor"
                                            },
                                            {
                                                "content": {
                                                    "children": [
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#if part of initial pop, send to initial pop function\r",
                                                                    "if 'INSERT' in props:\r",
                                                                    "        link.Insert(props)\r",
                                                                    "        return\r",
                                                                    "\r",
                                                                    "#get id\r",
                                                                    "ID = props['ID']\r",
                                                                    "\r",
                                                                    "#update props\r",
                                                                    "props['RANK'] = link.hub.RankID.Name\r",
                                                                    "props['OCC'] = link.hub.RankID.Occupation\r",
                                                                    "props['CADRE'] = link.hub.RankID.Cadre\r",
                                                                    "props['DOP'] = link.hub.datetime.date_time\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "#add to in-rank\r",
                                                                    "link.hub.data.InRank[ID] = props\r",
                                                                    "link.hub.data.InRankCount += 1\r",
                                                                    "\r",
                                                                    "#delay before start training (if needed)\r",
                                                                    "dbt = link.hub.RankInfo.DelayBeforeTraining\r",
                                                                    "if dbt > 0:\r",
                                                                    "    signal(link.StartTraining, props, delay(days = dbt))\r",
                                                                    "else:\r",
                                                                    "    link.StartTraining(props)\r",
                                                                    "\r",
                                                                    "#setup attrition\r",
                                                                    "link.SetupAttrition(props)\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1526,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "EnterRank",
                                                                "outgoing_links": {
                                                                    "Insert": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1547,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "SetupAttrition": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1546,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "StartTraining": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1533,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1532,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -30.012218907185066,
                                                                    "y": -39.795841039640734
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "dict": [
                                                                    [
                                                                        "Positions",
                                                                        20
                                                                    ],
                                                                    [
                                                                        "MinTIR",
                                                                        3
                                                                    ],
                                                                    [
                                                                        "MaxTIR",
                                                                        1000
                                                                    ],
                                                                    [
                                                                        "DelayBeforeTraining",
                                                                        0
                                                                    ],
                                                                    [
                                                                        "ReleaseIfFail",
                                                                        true
                                                                    ],
                                                                    [
                                                                        "PushPromote",
                                                                        false
                                                                    ],
                                                                    [
                                                                        "AttrRate",
                                                                        0.09
                                                                    ],
                                                                    [
                                                                        "MaxAge",
                                                                        1000
                                                                    ],
                                                                    [
                                                                        "DeployRatio",
                                                                        0.143
                                                                    ],
                                                                    [
                                                                        "CTRate",
                                                                        0.02
                                                                    ]
                                                                ],
                                                                "display_order": "of_creation",
                                                                "pickled_keys": []
                                                            },
                                                            "key": 1527,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "RankInfo",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -24.690955916045823,
                                                                    "y": -0.8998517282035177
                                                                },
                                                                "size": {
                                                                    "height": 10.178571428571429,
                                                                    "scale_3d": 1.0,
                                                                    "width": 6.875
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "data"
                                                        },
                                                        {
                                                            "content": {
                                                                "dict": [
                                                                    [
                                                                        "InRank",
                                                                        {}
                                                                    ],
                                                                    [
                                                                        "InTraining",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "Promotable",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "Deployed",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "InRankCount",
                                                                        0
                                                                    ],
                                                                    [
                                                                        "InTrainingCount",
                                                                        0
                                                                    ],
                                                                    [
                                                                        "PromotableCount",
                                                                        0
                                                                    ],
                                                                    [
                                                                        "DeployedCount",
                                                                        0
                                                                    ]
                                                                ],
                                                                "display_order": "of_creation",
                                                                "pickled_keys": []
                                                            },
                                                            "key": 1528,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "data",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -15.753892763598326,
                                                                    "y": -2.1163262518204564
                                                                },
                                                                "size": {
                                                                    "height": 9.375,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "data"
                                                        },
                                                        {
                                                            "content": {
                                                                "dict": [
                                                                    [
                                                                        "Name",
                                                                        "LCol"
                                                                    ],
                                                                    [
                                                                        "Occupation",
                                                                        "NWO"
                                                                    ],
                                                                    [
                                                                        "Cadre",
                                                                        "ResF"
                                                                    ]
                                                                ],
                                                                "display_order": "of_creation",
                                                                "pickled_keys": []
                                                            },
                                                            "key": 1529,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "RankID",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -27.50527447254697,
                                                                    "y": -12.681312051278057
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "data"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {
                                                                    "reset": 0
                                                                },
                                                                "script_imports": {
                                                                    "datetime": [
                                                                        "datetime",
                                                                        "datetime"
                                                                    ]
                                                                },
                                                                "script_lines": [
                                                                    "\r",
                                                                    "link.hub.data.InRank = {}\r",
                                                                    "link.hub.data.InTraining = []\r",
                                                                    "link.hub.data.Promotable = []\r",
                                                                    "link.hub.data.Deployed = []\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "link.hub.data.InRankCount = 0\r",
                                                                    "link.hub.data.InTrainingCount = 0\r",
                                                                    "link.hub.data.PromotableCount = 0\r",
                                                                    "link.hub.data.DeployedCount = 0\r",
                                                                    "\r",
                                                                    "startDate = datetime(2019,6,1,9,0,0)\r",
                                                                    "link.hub.datetime.set_date_time(startDate)\r",
                                                                    "\r",
                                                                    "link.hub.record.InRank = [0]\r",
                                                                    "link.hub.record.InTraining = [0]\r",
                                                                    "link.hub.record.Promotable = [0]\r",
                                                                    "link.hub.record.Deployed = [0]\r",
                                                                    "link.hub.record.Time = [startDate]\r",
                                                                    "link.hub.record.Releases = []\r",
                                                                    "link.hub.record.CTouts = []\r",
                                                                    "link.hub.record.Promotions = []\r",
                                                                    "link.hub.record.Positions = [link.hub.RankInfo.Positions]\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1530,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Reset",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1532,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 3.3173287652768817,
                                                                    "y": -13.986227580374978
                                                                },
                                                                "size": {
                                                                    "height": 6.011904761904762,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "date_time": {
                                                                    "day": 1,
                                                                    "hour": 9,
                                                                    "minute": 0,
                                                                    "month": 6,
                                                                    "second": 0,
                                                                    "year": 2019
                                                                }
                                                            },
                                                            "key": 1531,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "datetime",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": 2.3615869633262303,
                                                                    "y": -9.033337372290976
                                                                },
                                                                "size": {
                                                                    "height": 3.988095238095238,
                                                                    "scale_3d": 1.0,
                                                                    "width": 6.19047619047619
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "datetime"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1532,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "hub",
                                                                "outgoing_links": {
                                                                    "RankID": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1529,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "RankInfo": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1527,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "data": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1528,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "datetime": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1531,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "library": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1576,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "rank": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1525,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "record": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1549,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -7.750112694994645,
                                                                    "y": -18.00391297376486
                                                                },
                                                                "size": {
                                                                    "height": 1.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 1.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "hub"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "if props['ID'] not in link.hub.data.InRank: return\r",
                                                                    "\r",
                                                                    "link.hub.data.InTraining.append(props['ID'])\r",
                                                                    "link.hub.data.InTrainingCount += 1\r",
                                                                    "\r",
                                                                    "link.TrainRequest(props)"
                                                                ]
                                                            },
                                                            "key": 1533,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "StartTraining",
                                                                "outgoing_links": {
                                                                    "TrainRequest": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1560,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1532,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -20.026080654978394,
                                                                    "y": -39.697656269064375
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props, result",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "if props['ID'] not in link.hub.data.InRank: return\r",
                                                                    "\r",
                                                                    "link.hub.data.InTraining.remove(props['ID'])\r",
                                                                    "link.hub.data.InTrainingCount -= 1\r",
                                                                    "\r",
                                                                    "#if fail\r",
                                                                    "if result == 'F':\r",
                                                                    "    \r",
                                                                    "    #immediate release\r",
                                                                    "    if link.hub.RankInfo.ReleaseIfFail:\r",
                                                                    "        link.RemoveMember(props, 'failed')\r",
                                                                    "        \r",
                                                                    "    #or stay in rank until release\r",
                                                                    "\r",
                                                                    "#else pass\r",
                                                                    "else:\r",
                                                                    "    link.MinTIRDelay(props)\r",
                                                                    "        \r",
                                                                    "        \r",
                                                                    "        \r",
                                                                    "    \r",
                                                                    "    \r",
                                                                    "    \r",
                                                                    "    \r",
                                                                    "\r",
                                                                    "    "
                                                                ]
                                                            },
                                                            "key": 1534,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "FinishTraining",
                                                                "outgoing_links": {
                                                                    "MinTIRDelay": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1548,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "RemoveMember": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1545,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1532,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 5.515274902002796,
                                                                    "y": -39.49022853059453
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "if props['ID'] not in link.hub.data.InRank: return\r",
                                                                    "\r",
                                                                    "#if there is no next rank, do nothing\r",
                                                                    "if link.SndReq is None: return\r",
                                                                    "\r",
                                                                    "#add to promo list if not already there (might already be there in obscure cases)\r",
                                                                    "if props['ID'] not in link.hub.data.Promotable:\r",
                                                                    "    link.hub.data.Promotable.append(props['ID'])\r",
                                                                    "    link.hub.data.PromotableCount += 1\r",
                                                                    "\r",
                                                                    "#if push promote\r",
                                                                    "if link.hub.RankInfo.PushPromote:\r",
                                                                    "    link.Promote(props)\r",
                                                                    "\r",
                                                                    "#else request promotion\r",
                                                                    "else:\r",
                                                                    "    link.SndReq()\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1535,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "MetMinTIR",
                                                                "outgoing_links": {
                                                                    "Promote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1536,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "SndReq": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1542,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1532,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 21.676515289907346,
                                                                    "y": -39.3404021116089
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#promote to next rank\r",
                                                                    "link.PromoteOut(props)\r",
                                                                    "\r",
                                                                    "#remove from current rank\r",
                                                                    "link.RemoveMember(props, 'promoted')\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1536,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Promote",
                                                                "outgoing_links": {
                                                                    "PromoteOut": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1539,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "RemoveMember": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1545,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1532,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 30.26797020714654,
                                                                    "y": -39.30186888370791
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "nextRankPositions, nextRankCount",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "data = link.hub.data\r",
                                                                    "info = link.hub.RankInfo\r",
                                                                    "\r",
                                                                    "#maximum possible promotions\r",
                                                                    "maxPromos = min(data.PromotableCount, nextRankPositions - nextRankCount)\r",
                                                                    "\r",
                                                                    "#promotions to balance strength\r",
                                                                    "s0 = data.InRankCount\r",
                                                                    "s1 = nextRankCount\r",
                                                                    "p0 = info.Positions\r",
                                                                    "p1 = nextRankPositions\r",
                                                                    "balancePromos = (s0*p1 - s1*p0)/(p0 + p1)\r",
                                                                    "\r",
                                                                    "#adjust number of promos stochastically\r",
                                                                    "balancePromos_ = math.floor(balancePromos)\r",
                                                                    "frac = balancePromos - balancePromos_\r",
                                                                    "if random.random() > frac:\r",
                                                                    "    balancePromos = balancePromos_\r",
                                                                    "else:\r",
                                                                    "    balancePromos = balancePromos_ + 1\r",
                                                                    "\r",
                                                                    "#determine final number of promos\r",
                                                                    "numPromos = min(maxPromos, balancePromos)\r",
                                                                    "\r",
                                                                    "if numPromos <= 0: return\r",
                                                                    "\r",
                                                                    "promoteIDs = random.sample(link.hub.data.Promotable, numPromos)\r",
                                                                    "\r",
                                                                    "for ID in promoteIDs:\r",
                                                                    "    link.Promote(link.hub.data.InRank[ID])\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1537,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "PromoteInvite",
                                                                "outgoing_links": {
                                                                    "Promote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1536,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1532,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 30.236943946864095,
                                                                    "y": -54.94925517566933
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#if nothing below this rank, don't invite a promotion\r",
                                                                    "if link.InvitePromote is None: return\r",
                                                                    "\r",
                                                                    "# if there is room in the rank\r",
                                                                    "if link.hub.data.InRankCount < link.hub.RankInfo.Positions:\r",
                                                                    "\r",
                                                                    "    #send the number of positions and current in-rank count\r",
                                                                    "    link.InvitePromote(link.hub.RankInfo.Positions, link.hub.data.InRankCount)"
                                                                ]
                                                            },
                                                            "key": 1538,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "InvitePromote",
                                                                "outgoing_links": {
                                                                    "InvitePromote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1540,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1532,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -30.008885903158987,
                                                                    "y": -54.932325409304234
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1539,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "SndPromo",
                                                                "outgoing_links": {
                                                                    "Enter": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1597,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 40.81257151160083,
                                                                    "y": -41.4195199794459
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1540,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "SndInvite",
                                                                "outgoing_links": {
                                                                    "Invite": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1487,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -37.22325753644102,
                                                                    "y": -57.04376020783337
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1541,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "Invite",
                                                                "outgoing_links": {
                                                                    "PromoteInvite": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1537,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 41.1022611870765,
                                                                    "y": -57.271274325502496
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1542,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "SndReq",
                                                                "outgoing_links": {
                                                                    "Request": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1598,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 40.58019488696916,
                                                                    "y": -49.98849280979479
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1543,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "Enter",
                                                                "outgoing_links": {
                                                                    "EnterRank": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1526,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -37.04218246881857,
                                                                    "y": -42.01569816569041
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1544,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "Request",
                                                                "outgoing_links": {
                                                                    "InvitePromote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1538,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -36.98495220560267,
                                                                    "y": -49.363009874348336
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props, lossType",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "ID = props['ID']\r",
                                                                    "\r",
                                                                    "#remove from all member lists\r",
                                                                    "if ID in link.hub.data.InTraining:\r",
                                                                    "    link.hub.data.InTraining.remove(ID)\r",
                                                                    "    link.hub.data.InTrainingCount -= 1\r",
                                                                    "    \r",
                                                                    "\r",
                                                                    "if ID in link.hub.data.Promotable:\r",
                                                                    "    link.hub.data.Promotable.remove(ID)\r",
                                                                    "    link.hub.data.PromotableCount -= 1\r",
                                                                    "\r",
                                                                    "if ID in link.hub.data.InRank:\r",
                                                                    "    del link.hub.data.InRank[ID]\r",
                                                                    "    link.hub.data.InRankCount -= 1\r",
                                                                    "    \r",
                                                                    "    #record release\r",
                                                                    "    if lossType == 'released':\r",
                                                                    "        props['RELEASED'] = True\r",
                                                                    "        link.hub.record.Releases[-1] += 1\r",
                                                                    "        link.Release(props)\r",
                                                                    "        link.StopTraining(ID)\r",
                                                                    "    \r",
                                                                    "    #record CT\r",
                                                                    "    elif lossType == 'CT':\r",
                                                                    "        props['CT'] = True\r",
                                                                    "        props['DOP'] = link.hub.datetime.date_time  #override promotion time\r",
                                                                    "        link.hub.record.CTouts[-1] += 1\r",
                                                                    "        link.Release(props)\r",
                                                                    "        link.StopTraining(ID)\r",
                                                                    "        \r",
                                                                    "    \r",
                                                                    "    #record promotion\r",
                                                                    "    elif lossType == 'promoted':\r",
                                                                    "        link.hub.record.Promotions[-1] += 1\r",
                                                                    "    \r",
                                                                    "    #invite promotion\r",
                                                                    "    link.InvitePromote()\r",
                                                                    "    \r",
                                                                    "\r",
                                                                    "    \r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1545,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "RemoveMember",
                                                                "outgoing_links": {
                                                                    "InvitePromote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1538,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "Release": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1553,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": 32.34392154184954,
                                                                                    "y": -63.223816325109745
                                                                                }
                                                                            }
                                                                        ]
                                                                    },
                                                                    "StopTraining": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1573,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": -11.890454134805578,
                                                                                    "y": -46.83253535228758
                                                                                }
                                                                            },
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": -11.858746257112767,
                                                                                    "y": -43.72516333839172
                                                                                }
                                                                            }
                                                                        ]
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1532,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 5.817043142888761,
                                                                    "y": -54.71431714204966
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#MaxAge\r",
                                                                    "ageDays = (link.hub.datetime.date_time - props['DOB']).days\r",
                                                                    "maxAgeDaysLeft = link.hub.RankInfo.MaxAge*365 - ageDays\r",
                                                                    "\r",
                                                                    "#Max TIR\r",
                                                                    "TIRDays = (link.hub.datetime.date_time - props['DOP']).days\r",
                                                                    "maxTIRDaysLeft = link.hub.RankInfo.MaxTIR*365 - TIRDays\r",
                                                                    "\r",
                                                                    "#voluntary release (based on attrition rate)\r",
                                                                    "alpha = -math.log(1.0 - link.hub.RankInfo.AttrRate)\r",
                                                                    "volDaysLeft = random.expovariate(alpha)*365\r",
                                                                    "\r",
                                                                    "#CT release (based on CT rate)\r",
                                                                    "alpha = -math.log(1.0 - link.hub.RankInfo.CTRate)\r",
                                                                    "ctDaysLeft = random.expovariate(alpha)*365\r",
                                                                    "\r",
                                                                    "#note, need to label CT releases\r",
                                                                    "\r",
                                                                    "#schedule release\r",
                                                                    "days = min(maxAgeDaysLeft, maxTIRDaysLeft, volDaysLeft, ctDaysLeft)\r",
                                                                    "\r",
                                                                    "#label the loss type\r",
                                                                    "lossType = 'released'\r",
                                                                    "if days == ctDaysLeft:\r",
                                                                    "    lossType = 'CT'\r",
                                                                    "\r",
                                                                    "signal(link.RemoveMember, (props, lossType), delay(days = days))"
                                                                ]
                                                            },
                                                            "key": 1546,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "SetupAttrition",
                                                                "outgoing_links": {
                                                                    "RemoveMember": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1545,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1532,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -20.00560338611418,
                                                                    "y": -46.629645698637454
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#insert member into model (used for initial pop and CTs)\r",
                                                                    "\r",
                                                                    "#if member not in this rank, send to next rank (if next rank exists)\r",
                                                                    "if props['RANK'] != link.hub.RankID.Name:\r",
                                                                    "    if link.SndPromo is not None:\r",
                                                                    "        #log.warning(\"Rank: %s, Member rank: %s, Member ID: %s\" % (link.hub.RankID.Name, props['RANK'], props['ID']))\r",
                                                                    "        link.SndPromo(props)\r",
                                                                    "    else:\r",
                                                                    "        log.warning(\"Input member's rank not found in model.\")\r",
                                                                    "    return\r",
                                                                    "\r",
                                                                    "#log.warning(\"member %s enter %s\" % (props['ID'], link.hub.RankID.Name))\r",
                                                                    "\r",
                                                                    "#cancel insert flag\r",
                                                                    "if 'INSERT' in props:\r",
                                                                    "    del props['INSERT']\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "#get id\r",
                                                                    "ID = props['ID']\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "#update props (not all usual props are updated for initial pop)\r",
                                                                    "props['OCC'] = link.hub.RankID.Occupation\r",
                                                                    "props['CADRE'] = link.hub.RankID.Cadre\r",
                                                                    "\r",
                                                                    "#add to in-rank\r",
                                                                    "link.hub.data.InRank[ID] = props\r",
                                                                    "link.hub.data.InRankCount += 1\r",
                                                                    "\r",
                                                                    "#insert at Min-TIR delay step\r",
                                                                    "link.MinTIRDelay(props)\r",
                                                                    "\r",
                                                                    "#setup attrition\r",
                                                                    "link.SetupAttrition(props)\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1547,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Insert",
                                                                "outgoing_links": {
                                                                    "MinTIRDelay": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1548,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": 13.558717964465075,
                                                                                    "y": -31.554183083148093
                                                                                }
                                                                            }
                                                                        ]
                                                                    },
                                                                    "SetupAttrition": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1546,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "SndPromo": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1539,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": 31.94937653742584,
                                                                                    "y": -28.477348338185028
                                                                                }
                                                                            }
                                                                        ]
                                                                    },
                                                                    "StartTraining": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1533,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1532,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -29.989434128890377,
                                                                    "y": -29.305548588756988
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#if member entered this rank as initial pop, cancel the flag here\r",
                                                                    "#(no more treatment as initial_pop once processed through initial rank)\r",
                                                                    "if 'INSERT' in props:\r",
                                                                    "    del props['INSERT']\r",
                                                                    "\r",
                                                                    "#delay to Min TIR (if required)\r",
                                                                    "TIRdays = (link.hub.datetime.date_time - props['DOP']).days\r",
                                                                    "daysLeft = link.hub.RankInfo.MinTIR*365.25 - TIRdays\r",
                                                                    "\r",
                                                                    "if daysLeft > 0.0:\r",
                                                                    "    signal(link.MetMinTIR, props, delay(days = daysLeft))\r",
                                                                    "else:\r",
                                                                    "    link.MetMinTIR(props)\r",
                                                                    "        "
                                                                ]
                                                            },
                                                            "key": 1548,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "MinTIRDelay",
                                                                "outgoing_links": {
                                                                    "MetMinTIR": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1535,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1532,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 13.542800192312592,
                                                                    "y": -39.313536257975215
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "dict": [
                                                                    [
                                                                        "InRank",
                                                                        [
                                                                            0
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "InTraining",
                                                                        [
                                                                            0
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "Promotable",
                                                                        [
                                                                            0
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "Time",
                                                                        "gANdcQBjZGF0ZXRpbWUKZGF0ZXRpbWUKcQFDCgfjBgEJAAAAAABxAoVxA1JxBGEu"
                                                                    ],
                                                                    [
                                                                        "Releases",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "Promotions",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "Deployed",
                                                                        [
                                                                            0
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "Positions",
                                                                        [
                                                                            20
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "CTouts",
                                                                        []
                                                                    ]
                                                                ],
                                                                "display_order": "of_creation",
                                                                "pickled_keys": [
                                                                    "Time"
                                                                ]
                                                            },
                                                            "key": 1549,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "record",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -2.318244754210149,
                                                                    "y": -2.2214258111749743
                                                                },
                                                                "size": {
                                                                    "height": 5.803571428571428,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "data"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {
                                                                    "startup": 0
                                                                },
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "link.hub.record.InRank.append(link.hub.data.InRankCount)\r",
                                                                    "link.hub.record.InTraining.append(link.hub.data.InTrainingCount)\r",
                                                                    "link.hub.record.Promotable.append(link.hub.data.PromotableCount)\r",
                                                                    "link.hub.record.Deployed.append(link.hub.library.count_deployed())\r",
                                                                    "link.hub.record.Time.append(link.hub.datetime.date_time)\r",
                                                                    "link.hub.record.Positions.append(link.hub.RankInfo.Positions)\r",
                                                                    "\r",
                                                                    "link.hub.record.Releases.append(0)\r",
                                                                    "link.hub.record.CTouts.append(0)\r",
                                                                    "link.hub.record.Promotions.append(0)\r",
                                                                    "\r",
                                                                    "signal(self, (), delay(days = 30.44))"
                                                                ]
                                                            },
                                                            "key": 1550,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Record",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1532,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 9.0110398583115,
                                                                    "y": -14.067710898295612
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "script_lines": [
                                                                    "def configure():",
                                                                    "    axes = setup_axes(1, 1)",
                                                                    "\r",
                                                                    "    axes.set_xlabel('Time')",
                                                                    "    axes.set_ylabel('Population')",
                                                                    "",
                                                                    "    ",
                                                                    "",
                                                                    "def plot():\r",
                                                                    "    \r",
                                                                    "    lastTime = link.record.Time[-1]\r",
                                                                    "    ",
                                                                    "    axes.fill(link.record.Time + [lastTime], link.record.InRank + [0], 'grey', alpha = 0.5, label = 'In Rank')\r",
                                                                    "    axes.fill(link.record.Time + [lastTime], link.record.InTraining + [0], 'r', alpha = 0.3, label = 'In Training')\r",
                                                                    "    axes.fill(link.record.Time + [lastTime], link.record.Promotable + [0], 'b', alpha = 0.3, label = 'Promotable')\r",
                                                                    "    axes.fill(link.record.Time + [lastTime], link.record.Deployed + [0], 'black', alpha = 0.6, label = 'Deployed')",
                                                                    "    axes.plot(link.record.Time, link.record.Positions, 'k', linestyle = 'dashed', label = 'Positions', linewidth = 3)\r",
                                                                    "\r",
                                                                    "    handles, labels = axes.get_legend_handles_labels()\r",
                                                                    "    axes.legend(handles, labels, loc = 9, ncol = 3, bbox_to_anchor = (0.5, 1.12))",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1551,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "plot",
                                                                "outgoing_links": {
                                                                    "record": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1549,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 16.366223339152167,
                                                                    "y": 2.484834311425601
                                                                },
                                                                "size": {
                                                                    "height": 21.07142857142857,
                                                                    "scale_3d": 1.0,
                                                                    "width": 19.910714285714285
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "plot"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "positions, attrRate, minTIR, pushPromo, ctRate",
                                                                "roles_and_prioritizing": {
                                                                    "setup": 3
                                                                },
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "link.hub.RankInfo.Positions = positions\r",
                                                                    "link.hub.RankInfo.AttrRate = attrRate\r",
                                                                    "link.hub.RankInfo.MinTIR = minTIR\r",
                                                                    "link.hub.RankInfo.PushPromote = pushPromo\r",
                                                                    "link.hub.RankInfo.CTRate = ctRate\r",
                                                                    "\r",
                                                                    "link.hub.RankID.Name = link.hub._rank_.get_name()"
                                                                ]
                                                            },
                                                            "key": 1552,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Setup",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1532,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 3.2430370494555407,
                                                                    "y": -19.466952743026894
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1553,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "Release",
                                                                "outgoing_links": {
                                                                    "Release": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1397,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": 32.44000334124706,
                                                                                    "y": -14.441873145234322
                                                                                }
                                                                            }
                                                                        ]
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 41.33403873965582,
                                                                    "y": -63.389691111668604
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {
                                                                "children": [
                                                                    {
                                                                        "content": {
                                                                            "parameters": "props",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "ID = props['ID']\r",
                                                                                "props['IN_TRAINING'] = True\r",
                                                                                "\r",
                                                                                "#add to training list\r",
                                                                                "link.hub.Data.InTraining[ID] = props\r",
                                                                                "\r",
                                                                                "#go on waitlist\r",
                                                                                "link.hub.Data.Waitlist.append(ID)\r",
                                                                                "\r",
                                                                                "\r",
                                                                                "\r",
                                                                                "\r",
                                                                                "    \r",
                                                                                "    "
                                                                            ]
                                                                        },
                                                                        "key": 1555,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Arrive",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1558,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -16.694797152199428,
                                                                                "y": -34.31994988357029
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "dict": [
                                                                                [
                                                                                    "DurationDays",
                                                                                    30
                                                                                ],
                                                                                [
                                                                                    "MinSessionSize",
                                                                                    1
                                                                                ],
                                                                                [
                                                                                    "MaxSessionSize",
                                                                                    5
                                                                                ],
                                                                                [
                                                                                    "SuccessRate",
                                                                                    1
                                                                                ],
                                                                                [
                                                                                    "SessionSchedule",
                                                                                    "gANdcQBLCEsPhnEBYS4="
                                                                                ]
                                                                            ],
                                                                            "display_order": "of_creation",
                                                                            "pickled_keys": [
                                                                                "SessionSchedule"
                                                                            ]
                                                                        },
                                                                        "key": 1556,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Input",
                                                                            "outgoing_links": {},
                                                                            "position": {
                                                                                "x": -14.664036274121262,
                                                                                "y": -0.76648840428639
                                                                            },
                                                                            "size": {
                                                                                "height": 6.5476190476190474,
                                                                                "scale_3d": 1.0,
                                                                                "width": 9.523809523809524
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "data"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "dict": [
                                                                                [
                                                                                    "InTraining",
                                                                                    {}
                                                                                ],
                                                                                [
                                                                                    "Waitlist",
                                                                                    []
                                                                                ],
                                                                                [
                                                                                    "Attendance",
                                                                                    []
                                                                                ],
                                                                                [
                                                                                    "StartDates",
                                                                                    []
                                                                                ],
                                                                                [
                                                                                    "SessionIdx",
                                                                                    0
                                                                                ]
                                                                            ],
                                                                            "display_order": "of_creation",
                                                                            "pickled_keys": []
                                                                        },
                                                                        "key": 1557,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Data",
                                                                            "outgoing_links": {},
                                                                            "position": {
                                                                                "x": -4.235163886363756,
                                                                                "y": -0.7590424824417763
                                                                            },
                                                                            "size": {
                                                                                "height": 6.607142857142857,
                                                                                "scale_3d": 1.0,
                                                                                "width": 8.660714285714285
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "data"
                                                                    },
                                                                    {
                                                                        "content": {},
                                                                        "key": 1558,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "hub",
                                                                            "outgoing_links": {
                                                                                "Data": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1557,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "Input": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1556,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "Record": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1564,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "datetime": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1562,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "library": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1567,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -1.135639561950389,
                                                                                "y": -13.488105952112994
                                                                            },
                                                                            "size": {
                                                                                "height": 1.5,
                                                                                "scale_3d": 1.0,
                                                                                "width": 1.5
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "hub"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {
                                                                                "reset": 0
                                                                            },
                                                                            "script_imports": {
                                                                                "datetime": [
                                                                                    "datetime",
                                                                                    "datetime"
                                                                                ]
                                                                            },
                                                                            "script_lines": [
                                                                                "link.hub.Data.InTraining = {}\r",
                                                                                "link.hub.Data.Waitlist = []\r",
                                                                                "link.hub.Data.Attendance = []\r",
                                                                                "link.hub.Data.StartDates = []\r",
                                                                                "link.hub.Data.SessionIdx = 0\r",
                                                                                "\r",
                                                                                "startDate = datetime(2019,6,1,9,0,0)\r",
                                                                                "link.hub.datetime.set_date_time(startDate)\r",
                                                                                "\r",
                                                                                "link.hub.Record.Waitlist = [0]\r",
                                                                                "link.hub.Record.Time = [startDate]\r",
                                                                                ""
                                                                            ]
                                                                        },
                                                                        "key": 1559,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Reset",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1558,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 9.448075269869122,
                                                                                "y": -13.073071682303503
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {},
                                                                        "key": 1560,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 1,
                                                                            "name": "TrainRequest",
                                                                            "outgoing_links": {
                                                                                "Arrive": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1555,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -20.800874878523683,
                                                                                "y": -36.48950085353416
                                                                            },
                                                                            "size": {
                                                                                "height": 0.5,
                                                                                "scale_3d": 1.0,
                                                                                "width": 0.5
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "node"
                                                                    },
                                                                    {
                                                                        "content": {},
                                                                        "key": 1561,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 1,
                                                                            "name": "SndTrainFinish",
                                                                            "outgoing_links": {
                                                                                "FinishTraining": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1534,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 27.97851400511773,
                                                                                "y": -36.629572966635514
                                                                            },
                                                                            "size": {
                                                                                "height": 0.5,
                                                                                "scale_3d": 1.0,
                                                                                "width": 0.5
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "node"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "date_time": {
                                                                                "day": 1,
                                                                                "hour": 9,
                                                                                "minute": 0,
                                                                                "month": 6,
                                                                                "second": 0,
                                                                                "year": 2019
                                                                            }
                                                                        },
                                                                        "key": 1562,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "datetime",
                                                                            "outgoing_links": {},
                                                                            "position": {
                                                                                "x": -11.68177009004484,
                                                                                "y": -11.093761528465397
                                                                            },
                                                                            "size": {
                                                                                "height": 3.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 6.2
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "datetime"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "script_lines": [
                                                                                "def configure():\r",
                                                                                "    axes = setup_axes(1, 1)",
                                                                                "\r",
                                                                                "    \r",
                                                                                "",
                                                                                "",
                                                                                "def plot():\r",
                                                                                "    \r",
                                                                                "    axes = setup_axes(1, 1)\r",
                                                                                "    axes.set_xlabel('Time (years)')\r",
                                                                                "    axes.set_ylabel('Number of people')\r",
                                                                                "    \r",
                                                                                "    #don't plot if data is empty\r",
                                                                                "    if len(link.hub.Record.Waitlist) <= 1:\r",
                                                                                "        return\r",
                                                                                "\r",
                                                                                "    #plot the waitlist\r",
                                                                                "    lastTime = link.hub.Record.Time[-1]\r",
                                                                                "    axes.fill(link.hub.Record.Time + [lastTime], link.hub.Record.Waitlist + [0], 'b', alpha = 0.3, label = 'Waitlist')",
                                                                                "    axes.figure.autofmt_xdate()\r",
                                                                                "    \r",
                                                                                "    \r",
                                                                                "    #plot the session attendance\r",
                                                                                "    height = link.hub.Data.Attendance\r",
                                                                                "    width = [link.hub.Input.DurationDays]*len(height)\r",
                                                                                "    left = link.hub.Data.StartDates\r",
                                                                                "    y_pos = [0]*len(height)\r",
                                                                                "    axes.barh(y_pos, width, height = height, left = left, color = 'green', alpha = 0.6, label = 'Session Attendance')\r",
                                                                                "    \r",
                                                                                "    #legend\r",
                                                                                "    handles, labels = axes.get_legend_handles_labels()\r",
                                                                                "    axes.legend(handles, labels, loc = 9, ncol = 3, bbox_to_anchor = (0.5, 1.12))"
                                                                            ]
                                                                        },
                                                                        "key": 1563,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Attendance",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1558,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 18.05520745979187,
                                                                                "y": -1.1322048215124676
                                                                            },
                                                                            "size": {
                                                                                "height": 16.2,
                                                                                "scale_3d": 1.0,
                                                                                "width": 15.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "plot"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "dict": [
                                                                                [
                                                                                    "Waitlist",
                                                                                    [
                                                                                        0
                                                                                    ]
                                                                                ],
                                                                                [
                                                                                    "Time",
                                                                                    "gANdcQBjZGF0ZXRpbWUKZGF0ZXRpbWUKcQFDCgfjBgEJAAAAAABxAoVxA1JxBGEu"
                                                                                ]
                                                                            ],
                                                                            "display_order": "of_creation",
                                                                            "pickled_keys": [
                                                                                "Time"
                                                                            ]
                                                                        },
                                                                        "key": 1564,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Record",
                                                                            "outgoing_links": {},
                                                                            "position": {
                                                                                "x": 5.519563999613053,
                                                                                "y": -0.7859267560572475
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "data"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {
                                                                                "startup": 0
                                                                            },
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "link.hub.Record.Waitlist.append(len(link.hub.Data.Waitlist))\r",
                                                                                "link.hub.Record.Time.append(link.hub.datetime.date_time)\r",
                                                                                "\r",
                                                                                "signal(self, (), delay(days = 7))"
                                                                            ]
                                                                        },
                                                                        "key": 1565,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Record",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1558,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 9.55578961375507,
                                                                                "y": -7.625327065521719
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "duration, minSessionSize, maxSessionSize, successRate, sessionSchedule",
                                                                            "roles_and_prioritizing": {
                                                                                "setup": 3
                                                                            },
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "link.hub.Input.DurationDays = duration\r",
                                                                                "link.hub.Input.MinSessionSize = minSessionSize\r",
                                                                                "link.hub.Input.MaxSessionSize = maxSessionSize\r",
                                                                                "link.hub.Input.SuccessRate = successRate\r",
                                                                                "link.hub.Input.SessionSchedule = sessionSchedule"
                                                                            ]
                                                                        },
                                                                        "key": 1566,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Setup",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1558,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 9.417960966070991,
                                                                                "y": -18.46107648244264
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "script_imports": {
                                                                                "datetime": [
                                                                                    "datetime",
                                                                                    "datetime"
                                                                                ]
                                                                            },
                                                                            "script_lines": [
                                                                                "def get_waitlist():\r",
                                                                                "    inTrng = link.hub.Data.InTraining\r",
                                                                                "    return [id for id in link.hub.Data.Waitlist\r",
                                                                                "        if inTrng[id]['RELEASED']]\r",
                                                                                "        \r",
                                                                                "\r",
                                                                                "\r",
                                                                                "def get_trainable_on_waitlist():\r",
                                                                                "    inTrng = link.hub.Data.InTraining\r",
                                                                                "    return [id for id in link.hub.Data.Waitlist\r",
                                                                                "        if not inTrng[id]['RESERVED']\r",
                                                                                "        and not inTrng[id]['DEPLOYED']\r",
                                                                                "        and not inTrng[id]['RELEASED']]\r",
                                                                                "    \r",
                                                                                "def count_trainable_on_waitlist():\r",
                                                                                "    return len(get_trainable_on_waitlist())\r",
                                                                                "    \r",
                                                                                "    \r",
                                                                                "def get_start_session_idx():\r",
                                                                                "    #assumes session schedule is in order\r",
                                                                                "    #returns the index of the first session based on the current datetime\r",
                                                                                "    \r",
                                                                                "    year = link.hub.datetime.year\r",
                                                                                "    \r",
                                                                                "    startDates = [datetime(year, m, d, 8, 0, 0) for m,d in link.hub.Input.SessionSchedule]\r",
                                                                                "    \r",
                                                                                "    delays = [(t - link.hub.datetime.get_date_time()).total_seconds() for t in startDates]\r",
                                                                                "    \r",
                                                                                "    #return the smallest positive delay\r",
                                                                                "    for i in range(len(delays)):\r",
                                                                                "        if delays[i] > 0:\r",
                                                                                "            return i\r",
                                                                                "   \r",
                                                                                "    #if no more sessions this year, return first session for next year\r",
                                                                                "    return 0\r",
                                                                                "    "
                                                                            ]
                                                                        },
                                                                        "key": 1567,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "library",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1558,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -11.156992490107825,
                                                                                "y": -15.437735791363107
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "library"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {
                                                                                "startup": 0
                                                                            },
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "link.hub.Data.SessionIdx = link.hub.library.get_start_session_idx()\r",
                                                                                "\r",
                                                                                "link.DelayToSessionStart()\r",
                                                                                "\r",
                                                                                "\r",
                                                                                ""
                                                                            ]
                                                                        },
                                                                        "key": 1568,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "GetFirstSession",
                                                                            "outgoing_links": {
                                                                                "DelayToSessionStart": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1569,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1558,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -6.831928977706746,
                                                                                "y": -34.44116769677284
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "nextYr = False",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {
                                                                                "datetime": [
                                                                                    "datetime",
                                                                                    "datetime"
                                                                                ]
                                                                            },
                                                                            "script_lines": [
                                                                                "session = link.hub.Input.SessionSchedule[link.hub.Data.SessionIdx]\r",
                                                                                "\r",
                                                                                "year = link.hub.datetime.year\r",
                                                                                "month = session[0]\r",
                                                                                "day = session[1]\r",
                                                                                "\r",
                                                                                "delayDays = (datetime(year, month, day, 8, 0, 0) - link.hub.datetime.date_time).total_seconds()/86400.0\r",
                                                                                "\r",
                                                                                "if delayDays < 0.0 or nextYr:\r",
                                                                                "    delayDays = (datetime(year + 1, month, day, 8, 0, 0) - link.hub.datetime.date_time).total_seconds()/86400.0\r",
                                                                                "\r",
                                                                                "signal(link.StartSession, (), delay(days = delayDays))\r",
                                                                                ""
                                                                            ]
                                                                        },
                                                                        "key": 1569,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "DelayToSessionStart",
                                                                            "outgoing_links": {
                                                                                "StartSession": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1570,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1558,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 1.5855408583978676,
                                                                                "y": -34.353601749967424
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "input = link.hub.Input\r",
                                                                                "data = link.hub.Data\r",
                                                                                "\r",
                                                                                "#get the list of potential session starts, up to max session size\r",
                                                                                "sessionList = link.hub.library.get_trainable_on_waitlist()[:input.MaxSessionSize]\r",
                                                                                "\r",
                                                                                "#if at least have the min session size\r",
                                                                                "if len(sessionList) >= input.MinSessionSize:\r",
                                                                                "    \r",
                                                                                "    #remove ids from waitlist and set status to attending training\r",
                                                                                "    for id in sessionList:\r",
                                                                                "        data.Waitlist.remove(id)\r",
                                                                                "        data.InTraining[id]['ATTENDING_TRNG'] = True\r",
                                                                                "    \r",
                                                                                "    #track attendance and start date\r",
                                                                                "    data.Attendance.append(len(sessionList))\r",
                                                                                "    data.StartDates.append(link.hub.datetime.date_time)\r",
                                                                                "    \r",
                                                                                "    #signal to finish the course after course duration\r",
                                                                                "    signal(link.Finish, sessionList, delay(days = input.DurationDays))\r",
                                                                                "\r",
                                                                                "#else record zero-loaded session\r",
                                                                                "else:\r",
                                                                                "    data.Attendance.append(0)\r",
                                                                                "    data.StartDates.append(link.hub.datetime.date_time)\r",
                                                                                "    \r",
                                                                                "#setup next session\r",
                                                                                "link.NextSession()"
                                                                            ]
                                                                        },
                                                                        "key": 1570,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "StartSession",
                                                                            "outgoing_links": {
                                                                                "Finish": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1571,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "NextSession": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1572,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1558,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 10.16430095764344,
                                                                                "y": -34.388760602833166
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "sessionList",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "input = link.hub.Input\r",
                                                                                "data = link.hub.Data\r",
                                                                                "#for each session attendee\r",
                                                                                "for ID in sessionList:\r",
                                                                                "    \r",
                                                                                "    if ID in data.InTraining:\r",
                                                                                "    \r",
                                                                                "        #update properties\r",
                                                                                "        props = data.InTraining[ID]\r",
                                                                                "        props['ATTENDING_TRNG'] = False\r",
                                                                                "        props['IN_TRAINING'] = False\r",
                                                                                "        props['TRAINING_COMPLETED'] = True\r",
                                                                                "\r",
                                                                                "        #if pass\r",
                                                                                "        if random.random() < input.SuccessRate:\r",
                                                                                "            result = 'P'\r",
                                                                                "        #else fail\r",
                                                                                "        else:\r",
                                                                                "            result = 'F'\r",
                                                                                "            props['TRAINING_FAILED'] = True\r",
                                                                                "                 \r",
                                                                                "        #remove\r",
                                                                                "        del data.InTraining[ID]\r",
                                                                                "\r",
                                                                                "        link.SndTrainFinish(props, result)"
                                                                            ]
                                                                        },
                                                                        "key": 1571,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Finish",
                                                                            "outgoing_links": {
                                                                                "SndTrainFinish": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1561,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1558,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 18.44440284604379,
                                                                                "y": -34.377498855660235
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "#go to next session\r",
                                                                                "link.hub.Data.SessionIdx += 1\r",
                                                                                "\r",
                                                                                "if link.hub.Data.SessionIdx < len(link.hub.Input.SessionSchedule):\r",
                                                                                "    link.DelayToSessionStart(nextYr = False)\r",
                                                                                "    \r",
                                                                                "else:\r",
                                                                                "    link.hub.Data.SessionIdx = 0\r",
                                                                                "    link.DelayToSessionStart(nextYr = True)"
                                                                            ]
                                                                        },
                                                                        "key": 1572,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "NextSession",
                                                                            "outgoing_links": {
                                                                                "DelayToSessionStart": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1569,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1558,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 5.983814681569553,
                                                                                "y": -42.51810526522001
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {},
                                                                        "key": 1573,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 1,
                                                                            "name": "StopTraining",
                                                                            "outgoing_links": {
                                                                                "Release": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1574,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -21.034880837044263,
                                                                                "y": -46.91947031151817
                                                                            },
                                                                            "size": {
                                                                                "height": 0.5,
                                                                                "scale_3d": 1.0,
                                                                                "width": 0.5
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "node"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "ID",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "if ID in link.hub.Data.InTraining:\r",
                                                                                "    del link.hub.Data.InTraining[ID]\r",
                                                                                "    \r",
                                                                                "if ID in link.hub.Data.Waitlist:\r",
                                                                                "    link.hub.Data.Waitlist.remove(ID)"
                                                                            ]
                                                                        },
                                                                        "key": 1574,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "StopTraining",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1558,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -16.869280390907246,
                                                                                "y": -44.82919111941537
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "print(link.library.get_waitlist())"
                                                                            ]
                                                                        },
                                                                        "key": 1575,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "function",
                                                                            "outgoing_links": {
                                                                                "library": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1567,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -9.936127294350463,
                                                                                "y": -23.705182031625434
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    }
                                                                ],
                                                                "ifx_ports_left": [
                                                                    1560,
                                                                    1573
                                                                ],
                                                                "ifx_ports_right": [
                                                                    1561
                                                                ],
                                                                "image_id": null,
                                                                "proxy_position": {
                                                                    "x": -0.6806719555009858,
                                                                    "y": 1.7989187395383204
                                                                },
                                                                "rotation_2d": 0.0,
                                                                "rotation_3d": {
                                                                    "pitch": 0.0,
                                                                    "roll": 0.0,
                                                                    "yaw": 0.0
                                                                }
                                                            },
                                                            "key": 1554,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Training",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -8.874374904552498,
                                                                    "y": -39.957315946695566
                                                                },
                                                                "size": {
                                                                    "height": 3.392857142857143,
                                                                    "scale_3d": 1.0,
                                                                    "width": 6.398809523809524
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "actor"
                                                        },
                                                        {
                                                            "content": {
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "def count_deployed():\r",
                                                                    "    \r",
                                                                    "    inRank = link.hub.data.InRank\r",
                                                                    "\r",
                                                                    "    return len([id for id in inRank if inRank[id]['DEPLOYED']])\r",
                                                                    "    \r",
                                                                    "    "
                                                                ]
                                                            },
                                                            "key": 1576,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "library",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1532,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 3.2885695338145924,
                                                                    "y": -24.435898619316763
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "library"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "num = 1200\r",
                                                                    "print('In rank', sum(link.record.InRank[-num:])/num)\r",
                                                                    "print('Promotable', sum(link.record.Promotable[-num:])/num)\r",
                                                                    "print('Promos per yr', sum(link.record.Promotions[-num:])/len(link.record.Promotions[-num:])*12)\r",
                                                                    "print('Releases per yr', sum(link.record.Releases[-num:])/len(link.record.Releases[-num:])*12)\r",
                                                                    "print('CTs out per yr', sum(link.record.CTouts[-num:])/len(link.record.CTouts[-num:])*12)\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1577,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "PrintSummary",
                                                                "outgoing_links": {
                                                                    "record": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1549,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 4.876750797335997,
                                                                    "y": 8.519222745922649
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {
                                                                    "finish": 0
                                                                },
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "rank = ''.join(filter(str.isalnum, link.hub.RankID.Name))\r",
                                                                    "cadre = link.hub.RankID.Cadre\r",
                                                                    "key = cadre + '_' + rank\r",
                                                                    "\r",
                                                                    "save = {}\r",
                                                                    "save[key + '_InRank'] = link.hub.record.InRank\r",
                                                                    "save[key + '_InTraining'] = link.hub.record.InTraining\r",
                                                                    "save[key + '_Deployed'] = link.hub.record.Deployed\r",
                                                                    "save[key + '_Promotable'] = link.hub.record.Promotable\r",
                                                                    "\r",
                                                                    "batch.set_replication_data(**save)"
                                                                ]
                                                            },
                                                            "key": 1578,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Finish",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1532,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 9.23936895472022,
                                                                    "y": -19.625041607362252
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        }
                                                    ],
                                                    "ifx_ports_left": [
                                                        1543,
                                                        1544,
                                                        1540
                                                    ],
                                                    "ifx_ports_right": [
                                                        1539,
                                                        1542,
                                                        1541,
                                                        1553
                                                    ],
                                                    "image_id": null,
                                                    "proxy_position": {
                                                        "x": -4.762093403985616,
                                                        "y": 3.5569417058638875
                                                    },
                                                    "rotation_2d": 0.0,
                                                    "rotation_3d": {
                                                        "pitch": 0.0,
                                                        "roll": 0.0,
                                                        "yaw": 0.0
                                                    }
                                                },
                                                "key": 1525,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "LCol",
                                                    "outgoing_links": {},
                                                    "position": {
                                                        "x": 24.74765247305151,
                                                        "y": -7.266534004215896
                                                    },
                                                    "size": {
                                                        "height": 5.595238095238095,
                                                        "scale_3d": 1.0,
                                                        "width": 6.19047619047619
                                                    },
                                                    "visible": true
                                                },
                                                "type": "actor"
                                            },
                                            {
                                                "content": {
                                                    "children": [
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#if part of initial pop, send to initial pop function\r",
                                                                    "if 'INSERT' in props:\r",
                                                                    "        link.Insert(props)\r",
                                                                    "        return\r",
                                                                    "\r",
                                                                    "#get id\r",
                                                                    "ID = props['ID']\r",
                                                                    "\r",
                                                                    "#update props\r",
                                                                    "props['RANK'] = link.hub.RankID.Name\r",
                                                                    "props['OCC'] = link.hub.RankID.Occupation\r",
                                                                    "props['CADRE'] = link.hub.RankID.Cadre\r",
                                                                    "props['DOP'] = link.hub.datetime.date_time\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "#add to in-rank\r",
                                                                    "link.hub.data.InRank[ID] = props\r",
                                                                    "link.hub.data.InRankCount += 1\r",
                                                                    "\r",
                                                                    "#delay before start training (if needed)\r",
                                                                    "dbt = link.hub.RankInfo.DelayBeforeTraining\r",
                                                                    "if dbt > 0:\r",
                                                                    "    signal(link.StartTraining, props, delay(days = dbt))\r",
                                                                    "else:\r",
                                                                    "    link.StartTraining(props)\r",
                                                                    "\r",
                                                                    "#setup attrition\r",
                                                                    "link.SetupAttrition(props)\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1580,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "EnterRank",
                                                                "outgoing_links": {
                                                                    "Insert": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1601,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "SetupAttrition": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1600,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "StartTraining": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1587,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1586,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -30.012218907185066,
                                                                    "y": -39.795841039640734
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "dict": [
                                                                    [
                                                                        "Positions",
                                                                        10
                                                                    ],
                                                                    [
                                                                        "MinTIR",
                                                                        100
                                                                    ],
                                                                    [
                                                                        "MaxTIR",
                                                                        1000
                                                                    ],
                                                                    [
                                                                        "DelayBeforeTraining",
                                                                        0
                                                                    ],
                                                                    [
                                                                        "ReleaseIfFail",
                                                                        true
                                                                    ],
                                                                    [
                                                                        "PushPromote",
                                                                        false
                                                                    ],
                                                                    [
                                                                        "AttrRate",
                                                                        0.09
                                                                    ],
                                                                    [
                                                                        "MaxAge",
                                                                        1000
                                                                    ],
                                                                    [
                                                                        "DeployRatio",
                                                                        0.143
                                                                    ],
                                                                    [
                                                                        "CTRate",
                                                                        0.02
                                                                    ]
                                                                ],
                                                                "display_order": "of_creation",
                                                                "pickled_keys": []
                                                            },
                                                            "key": 1581,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "RankInfo",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -24.690955916045823,
                                                                    "y": -0.8998517282035177
                                                                },
                                                                "size": {
                                                                    "height": 10.178571428571429,
                                                                    "scale_3d": 1.0,
                                                                    "width": 6.875
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "data"
                                                        },
                                                        {
                                                            "content": {
                                                                "dict": [
                                                                    [
                                                                        "InRank",
                                                                        {}
                                                                    ],
                                                                    [
                                                                        "InTraining",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "Promotable",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "Deployed",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "InRankCount",
                                                                        0
                                                                    ],
                                                                    [
                                                                        "InTrainingCount",
                                                                        0
                                                                    ],
                                                                    [
                                                                        "PromotableCount",
                                                                        0
                                                                    ],
                                                                    [
                                                                        "DeployedCount",
                                                                        0
                                                                    ]
                                                                ],
                                                                "display_order": "of_creation",
                                                                "pickled_keys": []
                                                            },
                                                            "key": 1582,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "data",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -15.753892763598326,
                                                                    "y": -2.1163262518204564
                                                                },
                                                                "size": {
                                                                    "height": 9.375,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "data"
                                                        },
                                                        {
                                                            "content": {
                                                                "dict": [
                                                                    [
                                                                        "Name",
                                                                        "Col"
                                                                    ],
                                                                    [
                                                                        "Occupation",
                                                                        "NWO"
                                                                    ],
                                                                    [
                                                                        "Cadre",
                                                                        "ResF"
                                                                    ]
                                                                ],
                                                                "display_order": "of_creation",
                                                                "pickled_keys": []
                                                            },
                                                            "key": 1583,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "RankID",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -27.50527447254697,
                                                                    "y": -12.681312051278057
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "data"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {
                                                                    "reset": 0
                                                                },
                                                                "script_imports": {
                                                                    "datetime": [
                                                                        "datetime",
                                                                        "datetime"
                                                                    ]
                                                                },
                                                                "script_lines": [
                                                                    "\r",
                                                                    "link.hub.data.InRank = {}\r",
                                                                    "link.hub.data.InTraining = []\r",
                                                                    "link.hub.data.Promotable = []\r",
                                                                    "link.hub.data.Deployed = []\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "link.hub.data.InRankCount = 0\r",
                                                                    "link.hub.data.InTrainingCount = 0\r",
                                                                    "link.hub.data.PromotableCount = 0\r",
                                                                    "link.hub.data.DeployedCount = 0\r",
                                                                    "\r",
                                                                    "startDate = datetime(2019,6,1,9,0,0)\r",
                                                                    "link.hub.datetime.set_date_time(startDate)\r",
                                                                    "\r",
                                                                    "link.hub.record.InRank = [0]\r",
                                                                    "link.hub.record.InTraining = [0]\r",
                                                                    "link.hub.record.Promotable = [0]\r",
                                                                    "link.hub.record.Deployed = [0]\r",
                                                                    "link.hub.record.Time = [startDate]\r",
                                                                    "link.hub.record.Releases = []\r",
                                                                    "link.hub.record.CTouts = []\r",
                                                                    "link.hub.record.Promotions = []\r",
                                                                    "link.hub.record.Positions = [link.hub.RankInfo.Positions]\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1584,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Reset",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1586,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 3.3173287652768817,
                                                                    "y": -13.986227580374978
                                                                },
                                                                "size": {
                                                                    "height": 6.011904761904762,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "date_time": {
                                                                    "day": 1,
                                                                    "hour": 9,
                                                                    "minute": 0,
                                                                    "month": 6,
                                                                    "second": 0,
                                                                    "year": 2019
                                                                }
                                                            },
                                                            "key": 1585,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "datetime",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": 2.3615869633262303,
                                                                    "y": -9.033337372290976
                                                                },
                                                                "size": {
                                                                    "height": 3.988095238095238,
                                                                    "scale_3d": 1.0,
                                                                    "width": 6.19047619047619
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "datetime"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1586,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "hub",
                                                                "outgoing_links": {
                                                                    "RankID": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1583,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "RankInfo": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1581,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "data": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1582,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "datetime": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1585,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "library": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1630,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "rank": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1579,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "record": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1603,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -7.750112694994645,
                                                                    "y": -18.00391297376486
                                                                },
                                                                "size": {
                                                                    "height": 1.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 1.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "hub"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "if props['ID'] not in link.hub.data.InRank: return\r",
                                                                    "\r",
                                                                    "link.hub.data.InTraining.append(props['ID'])\r",
                                                                    "link.hub.data.InTrainingCount += 1\r",
                                                                    "\r",
                                                                    "link.TrainRequest(props)"
                                                                ]
                                                            },
                                                            "key": 1587,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "StartTraining",
                                                                "outgoing_links": {
                                                                    "TrainRequest": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1614,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1586,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -20.026080654978394,
                                                                    "y": -39.697656269064375
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props, result",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "if props['ID'] not in link.hub.data.InRank: return\r",
                                                                    "\r",
                                                                    "link.hub.data.InTraining.remove(props['ID'])\r",
                                                                    "link.hub.data.InTrainingCount -= 1\r",
                                                                    "\r",
                                                                    "#if fail\r",
                                                                    "if result == 'F':\r",
                                                                    "    \r",
                                                                    "    #immediate release\r",
                                                                    "    if link.hub.RankInfo.ReleaseIfFail:\r",
                                                                    "        link.RemoveMember(props, 'failed')\r",
                                                                    "        \r",
                                                                    "    #or stay in rank until release\r",
                                                                    "\r",
                                                                    "#else pass\r",
                                                                    "else:\r",
                                                                    "    link.MinTIRDelay(props)\r",
                                                                    "        \r",
                                                                    "        \r",
                                                                    "        \r",
                                                                    "    \r",
                                                                    "    \r",
                                                                    "    \r",
                                                                    "    \r",
                                                                    "\r",
                                                                    "    "
                                                                ]
                                                            },
                                                            "key": 1588,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "FinishTraining",
                                                                "outgoing_links": {
                                                                    "MinTIRDelay": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1602,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "RemoveMember": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1599,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1586,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 5.515274902002796,
                                                                    "y": -39.49022853059453
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "if props['ID'] not in link.hub.data.InRank: return\r",
                                                                    "\r",
                                                                    "#if there is no next rank, do nothing\r",
                                                                    "if link.SndReq is None: return\r",
                                                                    "\r",
                                                                    "#add to promo list if not already there (might already be there in obscure cases)\r",
                                                                    "if props['ID'] not in link.hub.data.Promotable:\r",
                                                                    "    link.hub.data.Promotable.append(props['ID'])\r",
                                                                    "    link.hub.data.PromotableCount += 1\r",
                                                                    "\r",
                                                                    "#if push promote\r",
                                                                    "if link.hub.RankInfo.PushPromote:\r",
                                                                    "    link.Promote(props)\r",
                                                                    "\r",
                                                                    "#else request promotion\r",
                                                                    "else:\r",
                                                                    "    link.SndReq()\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1589,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "MetMinTIR",
                                                                "outgoing_links": {
                                                                    "Promote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1590,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "SndReq": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1596,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1586,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 21.676515289907346,
                                                                    "y": -39.3404021116089
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#promote to next rank\r",
                                                                    "link.PromoteOut(props)\r",
                                                                    "\r",
                                                                    "#remove from current rank\r",
                                                                    "link.RemoveMember(props, 'promoted')\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1590,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Promote",
                                                                "outgoing_links": {
                                                                    "PromoteOut": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1593,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "RemoveMember": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1599,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1586,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 30.26797020714654,
                                                                    "y": -39.30186888370791
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "nextRankPositions, nextRankCount",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "data = link.hub.data\r",
                                                                    "info = link.hub.RankInfo\r",
                                                                    "\r",
                                                                    "#maximum possible promotions\r",
                                                                    "maxPromos = min(data.PromotableCount, nextRankPositions - nextRankCount)\r",
                                                                    "\r",
                                                                    "#promotions to balance strength\r",
                                                                    "s0 = data.InRankCount\r",
                                                                    "s1 = nextRankCount\r",
                                                                    "p0 = info.Positions\r",
                                                                    "p1 = nextRankPositions\r",
                                                                    "balancePromos = (s0*p1 - s1*p0)/(p0 + p1)\r",
                                                                    "\r",
                                                                    "#adjust number of promos stochastically\r",
                                                                    "balancePromos_ = math.floor(balancePromos)\r",
                                                                    "frac = balancePromos - balancePromos_\r",
                                                                    "if random.random() > frac:\r",
                                                                    "    balancePromos = balancePromos_\r",
                                                                    "else:\r",
                                                                    "    balancePromos = balancePromos_ + 1\r",
                                                                    "\r",
                                                                    "#determine final number of promos\r",
                                                                    "numPromos = min(maxPromos, balancePromos)\r",
                                                                    "\r",
                                                                    "if numPromos <= 0: return\r",
                                                                    "\r",
                                                                    "promoteIDs = random.sample(link.hub.data.Promotable, numPromos)\r",
                                                                    "\r",
                                                                    "for ID in promoteIDs:\r",
                                                                    "    link.Promote(link.hub.data.InRank[ID])\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1591,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "PromoteInvite",
                                                                "outgoing_links": {
                                                                    "Promote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1590,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1586,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 30.236943946864095,
                                                                    "y": -54.94925517566933
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#if nothing below this rank, don't invite a promotion\r",
                                                                    "if link.InvitePromote is None: return\r",
                                                                    "\r",
                                                                    "# if there is room in the rank\r",
                                                                    "if link.hub.data.InRankCount < link.hub.RankInfo.Positions:\r",
                                                                    "\r",
                                                                    "    #send the number of positions and current in-rank count\r",
                                                                    "    link.InvitePromote(link.hub.RankInfo.Positions, link.hub.data.InRankCount)"
                                                                ]
                                                            },
                                                            "key": 1592,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "InvitePromote",
                                                                "outgoing_links": {
                                                                    "InvitePromote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1594,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1586,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -30.008885903158987,
                                                                    "y": -54.932325409304234
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1593,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "SndPromo",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": 40.81257151160083,
                                                                    "y": -41.4195199794459
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1594,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "SndInvite",
                                                                "outgoing_links": {
                                                                    "Invite": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1541,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -37.22325753644102,
                                                                    "y": -57.04376020783337
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1595,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "Invite",
                                                                "outgoing_links": {
                                                                    "PromoteInvite": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1591,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 41.1022611870765,
                                                                    "y": -57.271274325502496
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1596,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "SndReq",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": 40.58019488696916,
                                                                    "y": -49.98849280979479
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1597,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "Enter",
                                                                "outgoing_links": {
                                                                    "EnterRank": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1580,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -37.04218246881857,
                                                                    "y": -42.01569816569041
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1598,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "Request",
                                                                "outgoing_links": {
                                                                    "InvitePromote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1592,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -36.98495220560267,
                                                                    "y": -49.363009874348336
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props, lossType",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "ID = props['ID']\r",
                                                                    "\r",
                                                                    "#remove from all member lists\r",
                                                                    "if ID in link.hub.data.InTraining:\r",
                                                                    "    link.hub.data.InTraining.remove(ID)\r",
                                                                    "    link.hub.data.InTrainingCount -= 1\r",
                                                                    "    \r",
                                                                    "\r",
                                                                    "if ID in link.hub.data.Promotable:\r",
                                                                    "    link.hub.data.Promotable.remove(ID)\r",
                                                                    "    link.hub.data.PromotableCount -= 1\r",
                                                                    "\r",
                                                                    "if ID in link.hub.data.InRank:\r",
                                                                    "    del link.hub.data.InRank[ID]\r",
                                                                    "    link.hub.data.InRankCount -= 1\r",
                                                                    "    \r",
                                                                    "    #record release\r",
                                                                    "    if lossType == 'released':\r",
                                                                    "        props['RELEASED'] = True\r",
                                                                    "        link.hub.record.Releases[-1] += 1\r",
                                                                    "        link.Release(props)\r",
                                                                    "        link.StopTraining(ID)\r",
                                                                    "    \r",
                                                                    "    #record CT\r",
                                                                    "    elif lossType == 'CT':\r",
                                                                    "        props['CT'] = True\r",
                                                                    "        props['DOP'] = link.hub.datetime.date_time  #override promotion time\r",
                                                                    "        link.hub.record.CTouts[-1] += 1\r",
                                                                    "        link.Release(props)\r",
                                                                    "        link.StopTraining(ID)\r",
                                                                    "        \r",
                                                                    "    \r",
                                                                    "    #record promotion\r",
                                                                    "    elif lossType == 'promoted':\r",
                                                                    "        link.hub.record.Promotions[-1] += 1\r",
                                                                    "    \r",
                                                                    "    #invite promotion\r",
                                                                    "    link.InvitePromote()\r",
                                                                    "    \r",
                                                                    "\r",
                                                                    "    \r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1599,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "RemoveMember",
                                                                "outgoing_links": {
                                                                    "InvitePromote": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1592,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "Release": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1607,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": 32.34392154184954,
                                                                                    "y": -63.223816325109745
                                                                                }
                                                                            }
                                                                        ]
                                                                    },
                                                                    "StopTraining": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1627,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": -11.890454134805578,
                                                                                    "y": -46.83253535228758
                                                                                }
                                                                            },
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": -11.858746257112767,
                                                                                    "y": -43.72516333839172
                                                                                }
                                                                            }
                                                                        ]
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1586,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 5.817043142888761,
                                                                    "y": -54.71431714204966
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#MaxAge\r",
                                                                    "ageDays = (link.hub.datetime.date_time - props['DOB']).days\r",
                                                                    "maxAgeDaysLeft = link.hub.RankInfo.MaxAge*365 - ageDays\r",
                                                                    "\r",
                                                                    "#Max TIR\r",
                                                                    "TIRDays = (link.hub.datetime.date_time - props['DOP']).days\r",
                                                                    "maxTIRDaysLeft = link.hub.RankInfo.MaxTIR*365 - TIRDays\r",
                                                                    "\r",
                                                                    "#voluntary release (based on attrition rate)\r",
                                                                    "alpha = -math.log(1.0 - link.hub.RankInfo.AttrRate)\r",
                                                                    "volDaysLeft = random.expovariate(alpha)*365\r",
                                                                    "\r",
                                                                    "#CT release (based on CT rate)\r",
                                                                    "alpha = -math.log(1.0 - link.hub.RankInfo.CTRate)\r",
                                                                    "ctDaysLeft = random.expovariate(alpha)*365\r",
                                                                    "\r",
                                                                    "#note, need to label CT releases\r",
                                                                    "\r",
                                                                    "#schedule release\r",
                                                                    "days = min(maxAgeDaysLeft, maxTIRDaysLeft, volDaysLeft, ctDaysLeft)\r",
                                                                    "\r",
                                                                    "#label the loss type\r",
                                                                    "lossType = 'released'\r",
                                                                    "if days == ctDaysLeft:\r",
                                                                    "    lossType = 'CT'\r",
                                                                    "\r",
                                                                    "signal(link.RemoveMember, (props, lossType), delay(days = days))"
                                                                ]
                                                            },
                                                            "key": 1600,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "SetupAttrition",
                                                                "outgoing_links": {
                                                                    "RemoveMember": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1599,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1586,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -20.00560338611418,
                                                                    "y": -46.629645698637454
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#insert member into model (used for initial pop and CTs)\r",
                                                                    "\r",
                                                                    "#if member not in this rank, send to next rank (if next rank exists)\r",
                                                                    "if props['RANK'] != link.hub.RankID.Name:\r",
                                                                    "    if link.SndPromo is not None:\r",
                                                                    "        #log.warning(\"Rank: %s, Member rank: %s, Member ID: %s\" % (link.hub.RankID.Name, props['RANK'], props['ID']))\r",
                                                                    "        link.SndPromo(props)\r",
                                                                    "    else:\r",
                                                                    "        log.warning(\"Input member's rank not found in model.\")\r",
                                                                    "    return\r",
                                                                    "\r",
                                                                    "#log.warning(\"member %s enter %s\" % (props['ID'], link.hub.RankID.Name))\r",
                                                                    "\r",
                                                                    "#cancel insert flag\r",
                                                                    "if 'INSERT' in props:\r",
                                                                    "    del props['INSERT']\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "#get id\r",
                                                                    "ID = props['ID']\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "#update props (not all usual props are updated for initial pop)\r",
                                                                    "props['OCC'] = link.hub.RankID.Occupation\r",
                                                                    "props['CADRE'] = link.hub.RankID.Cadre\r",
                                                                    "\r",
                                                                    "#add to in-rank\r",
                                                                    "link.hub.data.InRank[ID] = props\r",
                                                                    "link.hub.data.InRankCount += 1\r",
                                                                    "\r",
                                                                    "#insert at Min-TIR delay step\r",
                                                                    "link.MinTIRDelay(props)\r",
                                                                    "\r",
                                                                    "#setup attrition\r",
                                                                    "link.SetupAttrition(props)\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1601,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Insert",
                                                                "outgoing_links": {
                                                                    "MinTIRDelay": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1602,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": 13.558717964465075,
                                                                                    "y": -31.554183083148093
                                                                                }
                                                                            }
                                                                        ]
                                                                    },
                                                                    "SetupAttrition": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1600,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "SndPromo": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1593,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": 31.94937653742584,
                                                                                    "y": -28.477348338185028
                                                                                }
                                                                            }
                                                                        ]
                                                                    },
                                                                    "StartTraining": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1587,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1586,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -29.989434128890377,
                                                                    "y": -29.305548588756988
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "props",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "#if member entered this rank as initial pop, cancel the flag here\r",
                                                                    "#(no more treatment as initial_pop once processed through initial rank)\r",
                                                                    "if 'INSERT' in props:\r",
                                                                    "    del props['INSERT']\r",
                                                                    "\r",
                                                                    "#delay to Min TIR (if required)\r",
                                                                    "TIRdays = (link.hub.datetime.date_time - props['DOP']).days\r",
                                                                    "daysLeft = link.hub.RankInfo.MinTIR*365.25 - TIRdays\r",
                                                                    "\r",
                                                                    "if daysLeft > 0.0:\r",
                                                                    "    signal(link.MetMinTIR, props, delay(days = daysLeft))\r",
                                                                    "else:\r",
                                                                    "    link.MetMinTIR(props)\r",
                                                                    "        "
                                                                ]
                                                            },
                                                            "key": 1602,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "MinTIRDelay",
                                                                "outgoing_links": {
                                                                    "MetMinTIR": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1589,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    },
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": true,
                                                                        "target_path": 1586,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 13.542800192312592,
                                                                    "y": -39.313536257975215
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "dict": [
                                                                    [
                                                                        "InRank",
                                                                        [
                                                                            0
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "InTraining",
                                                                        [
                                                                            0
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "Promotable",
                                                                        [
                                                                            0
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "Time",
                                                                        "gANdcQBjZGF0ZXRpbWUKZGF0ZXRpbWUKcQFDCgfjBgEJAAAAAABxAoVxA1JxBGEu"
                                                                    ],
                                                                    [
                                                                        "Releases",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "Promotions",
                                                                        []
                                                                    ],
                                                                    [
                                                                        "Deployed",
                                                                        [
                                                                            0
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "Positions",
                                                                        [
                                                                            10
                                                                        ]
                                                                    ],
                                                                    [
                                                                        "CTouts",
                                                                        []
                                                                    ]
                                                                ],
                                                                "display_order": "of_creation",
                                                                "pickled_keys": [
                                                                    "Time"
                                                                ]
                                                            },
                                                            "key": 1603,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "record",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -2.318244754210149,
                                                                    "y": -2.2214258111749743
                                                                },
                                                                "size": {
                                                                    "height": 5.803571428571428,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "data"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {
                                                                    "startup": 0
                                                                },
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "link.hub.record.InRank.append(link.hub.data.InRankCount)\r",
                                                                    "link.hub.record.InTraining.append(link.hub.data.InTrainingCount)\r",
                                                                    "link.hub.record.Promotable.append(link.hub.data.PromotableCount)\r",
                                                                    "link.hub.record.Deployed.append(link.hub.library.count_deployed())\r",
                                                                    "link.hub.record.Time.append(link.hub.datetime.date_time)\r",
                                                                    "link.hub.record.Positions.append(link.hub.RankInfo.Positions)\r",
                                                                    "\r",
                                                                    "link.hub.record.Releases.append(0)\r",
                                                                    "link.hub.record.CTouts.append(0)\r",
                                                                    "link.hub.record.Promotions.append(0)\r",
                                                                    "\r",
                                                                    "signal(self, (), delay(days = 30.44))"
                                                                ]
                                                            },
                                                            "key": 1604,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Record",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1586,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 9.0110398583115,
                                                                    "y": -14.067710898295612
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "script_lines": [
                                                                    "def configure():",
                                                                    "    axes = setup_axes(1, 1)",
                                                                    "\r",
                                                                    "    axes.set_xlabel('Time')",
                                                                    "    axes.set_ylabel('Population')",
                                                                    "",
                                                                    "    ",
                                                                    "",
                                                                    "def plot():\r",
                                                                    "    \r",
                                                                    "    lastTime = link.record.Time[-1]\r",
                                                                    "    ",
                                                                    "    axes.fill(link.record.Time + [lastTime], link.record.InRank + [0], 'grey', alpha = 0.5, label = 'In Rank')\r",
                                                                    "    axes.fill(link.record.Time + [lastTime], link.record.InTraining + [0], 'r', alpha = 0.3, label = 'In Training')\r",
                                                                    "    axes.fill(link.record.Time + [lastTime], link.record.Promotable + [0], 'b', alpha = 0.3, label = 'Promotable')\r",
                                                                    "    axes.fill(link.record.Time + [lastTime], link.record.Deployed + [0], 'black', alpha = 0.6, label = 'Deployed')",
                                                                    "    axes.plot(link.record.Time, link.record.Positions, 'k', linestyle = 'dashed', label = 'Positions', linewidth = 3)\r",
                                                                    "\r",
                                                                    "    handles, labels = axes.get_legend_handles_labels()\r",
                                                                    "    axes.legend(handles, labels, loc = 9, ncol = 3, bbox_to_anchor = (0.5, 1.12))",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1605,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "plot",
                                                                "outgoing_links": {
                                                                    "record": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1603,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 16.366223339152167,
                                                                    "y": 2.484834311425601
                                                                },
                                                                "size": {
                                                                    "height": 21.07142857142857,
                                                                    "scale_3d": 1.0,
                                                                    "width": 19.910714285714285
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "plot"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "positions, attrRate, minTIR, pushPromo, ctRate",
                                                                "roles_and_prioritizing": {
                                                                    "setup": 3
                                                                },
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "link.hub.RankInfo.Positions = positions\r",
                                                                    "link.hub.RankInfo.AttrRate = attrRate\r",
                                                                    "link.hub.RankInfo.MinTIR = minTIR\r",
                                                                    "link.hub.RankInfo.PushPromote = pushPromo\r",
                                                                    "link.hub.RankInfo.CTRate = ctRate\r",
                                                                    "\r",
                                                                    "link.hub.RankID.Name = link.hub._rank_.get_name()"
                                                                ]
                                                            },
                                                            "key": 1606,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Setup",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1586,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 3.2430370494555407,
                                                                    "y": -19.466952743026894
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {},
                                                            "key": 1607,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 1,
                                                                "name": "Release",
                                                                "outgoing_links": {
                                                                    "Release": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1397,
                                                                        "visible": true,
                                                                        "waypoints": [
                                                                            {
                                                                                "waypoint_pos": {
                                                                                    "x": 42.76182258618932,
                                                                                    "y": -14.702087075779085
                                                                                }
                                                                            }
                                                                        ]
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 41.33403873965582,
                                                                    "y": -63.389691111668604
                                                                },
                                                                "size": {
                                                                    "height": 0.5,
                                                                    "scale_3d": 1.0,
                                                                    "width": 0.5
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "node"
                                                        },
                                                        {
                                                            "content": {
                                                                "children": [
                                                                    {
                                                                        "content": {
                                                                            "parameters": "props",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "ID = props['ID']\r",
                                                                                "props['IN_TRAINING'] = True\r",
                                                                                "\r",
                                                                                "#add to training list\r",
                                                                                "link.hub.Data.InTraining[ID] = props\r",
                                                                                "\r",
                                                                                "#go on waitlist\r",
                                                                                "link.hub.Data.Waitlist.append(ID)\r",
                                                                                "\r",
                                                                                "\r",
                                                                                "\r",
                                                                                "\r",
                                                                                "    \r",
                                                                                "    "
                                                                            ]
                                                                        },
                                                                        "key": 1609,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Arrive",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1612,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -16.694797152199428,
                                                                                "y": -34.31994988357029
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "dict": [
                                                                                [
                                                                                    "DurationDays",
                                                                                    20
                                                                                ],
                                                                                [
                                                                                    "MinSessionSize",
                                                                                    1
                                                                                ],
                                                                                [
                                                                                    "MaxSessionSize",
                                                                                    5
                                                                                ],
                                                                                [
                                                                                    "SuccessRate",
                                                                                    1
                                                                                ],
                                                                                [
                                                                                    "SessionSchedule",
                                                                                    "gANdcQBLCUsBhnEBYS4="
                                                                                ]
                                                                            ],
                                                                            "display_order": "of_creation",
                                                                            "pickled_keys": [
                                                                                "SessionSchedule"
                                                                            ]
                                                                        },
                                                                        "key": 1610,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Input",
                                                                            "outgoing_links": {},
                                                                            "position": {
                                                                                "x": -14.664036274121262,
                                                                                "y": -0.76648840428639
                                                                            },
                                                                            "size": {
                                                                                "height": 6.5476190476190474,
                                                                                "scale_3d": 1.0,
                                                                                "width": 9.523809523809524
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "data"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "dict": [
                                                                                [
                                                                                    "InTraining",
                                                                                    {}
                                                                                ],
                                                                                [
                                                                                    "Waitlist",
                                                                                    []
                                                                                ],
                                                                                [
                                                                                    "Attendance",
                                                                                    []
                                                                                ],
                                                                                [
                                                                                    "StartDates",
                                                                                    []
                                                                                ],
                                                                                [
                                                                                    "SessionIdx",
                                                                                    0
                                                                                ]
                                                                            ],
                                                                            "display_order": "of_creation",
                                                                            "pickled_keys": []
                                                                        },
                                                                        "key": 1611,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Data",
                                                                            "outgoing_links": {},
                                                                            "position": {
                                                                                "x": -4.235163886363756,
                                                                                "y": -0.7590424824417763
                                                                            },
                                                                            "size": {
                                                                                "height": 6.607142857142857,
                                                                                "scale_3d": 1.0,
                                                                                "width": 8.660714285714285
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "data"
                                                                    },
                                                                    {
                                                                        "content": {},
                                                                        "key": 1612,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "hub",
                                                                            "outgoing_links": {
                                                                                "Data": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1611,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "Input": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1610,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "Record": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1618,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "datetime": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1616,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "library": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1621,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -1.135639561950389,
                                                                                "y": -13.488105952112994
                                                                            },
                                                                            "size": {
                                                                                "height": 1.5,
                                                                                "scale_3d": 1.0,
                                                                                "width": 1.5
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "hub"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {
                                                                                "reset": 0
                                                                            },
                                                                            "script_imports": {
                                                                                "datetime": [
                                                                                    "datetime",
                                                                                    "datetime"
                                                                                ]
                                                                            },
                                                                            "script_lines": [
                                                                                "link.hub.Data.InTraining = {}\r",
                                                                                "link.hub.Data.Waitlist = []\r",
                                                                                "link.hub.Data.Attendance = []\r",
                                                                                "link.hub.Data.StartDates = []\r",
                                                                                "link.hub.Data.SessionIdx = 0\r",
                                                                                "\r",
                                                                                "startDate = datetime(2019,6,1,9,0,0)\r",
                                                                                "link.hub.datetime.set_date_time(startDate)\r",
                                                                                "\r",
                                                                                "link.hub.Record.Waitlist = [0]\r",
                                                                                "link.hub.Record.Time = [startDate]\r",
                                                                                ""
                                                                            ]
                                                                        },
                                                                        "key": 1613,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Reset",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1612,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 9.448075269869122,
                                                                                "y": -13.073071682303503
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {},
                                                                        "key": 1614,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 1,
                                                                            "name": "TrainRequest",
                                                                            "outgoing_links": {
                                                                                "Arrive": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1609,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -20.800874878523683,
                                                                                "y": -36.48950085353416
                                                                            },
                                                                            "size": {
                                                                                "height": 0.5,
                                                                                "scale_3d": 1.0,
                                                                                "width": 0.5
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "node"
                                                                    },
                                                                    {
                                                                        "content": {},
                                                                        "key": 1615,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 1,
                                                                            "name": "SndTrainFinish",
                                                                            "outgoing_links": {
                                                                                "FinishTraining": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1588,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 27.97851400511773,
                                                                                "y": -36.629572966635514
                                                                            },
                                                                            "size": {
                                                                                "height": 0.5,
                                                                                "scale_3d": 1.0,
                                                                                "width": 0.5
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "node"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "date_time": {
                                                                                "day": 1,
                                                                                "hour": 9,
                                                                                "minute": 0,
                                                                                "month": 6,
                                                                                "second": 0,
                                                                                "year": 2019
                                                                            }
                                                                        },
                                                                        "key": 1616,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "datetime",
                                                                            "outgoing_links": {},
                                                                            "position": {
                                                                                "x": -11.68177009004484,
                                                                                "y": -11.093761528465397
                                                                            },
                                                                            "size": {
                                                                                "height": 3.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 6.2
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "datetime"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "script_lines": [
                                                                                "def configure():\r",
                                                                                "    axes = setup_axes(1, 1)",
                                                                                "\r",
                                                                                "    \r",
                                                                                "",
                                                                                "",
                                                                                "def plot():\r",
                                                                                "    \r",
                                                                                "    axes = setup_axes(1, 1)\r",
                                                                                "    axes.set_xlabel('Time (years)')\r",
                                                                                "    axes.set_ylabel('Number of people')\r",
                                                                                "    \r",
                                                                                "    #don't plot if data is empty\r",
                                                                                "    if len(link.hub.Record.Waitlist) <= 1:\r",
                                                                                "        return\r",
                                                                                "\r",
                                                                                "    #plot the waitlist\r",
                                                                                "    lastTime = link.hub.Record.Time[-1]\r",
                                                                                "    axes.fill(link.hub.Record.Time + [lastTime], link.hub.Record.Waitlist + [0], 'b', alpha = 0.3, label = 'Waitlist')",
                                                                                "    axes.figure.autofmt_xdate()\r",
                                                                                "    \r",
                                                                                "    \r",
                                                                                "    #plot the session attendance\r",
                                                                                "    height = link.hub.Data.Attendance\r",
                                                                                "    width = [link.hub.Input.DurationDays]*len(height)\r",
                                                                                "    left = link.hub.Data.StartDates\r",
                                                                                "    y_pos = [0]*len(height)\r",
                                                                                "    axes.barh(y_pos, width, height = height, left = left, color = 'green', alpha = 0.6, label = 'Session Attendance')\r",
                                                                                "    \r",
                                                                                "    #legend\r",
                                                                                "    handles, labels = axes.get_legend_handles_labels()\r",
                                                                                "    axes.legend(handles, labels, loc = 9, ncol = 3, bbox_to_anchor = (0.5, 1.12))"
                                                                            ]
                                                                        },
                                                                        "key": 1617,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Attendance",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1612,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 18.05520745979187,
                                                                                "y": -1.1322048215124676
                                                                            },
                                                                            "size": {
                                                                                "height": 16.2,
                                                                                "scale_3d": 1.0,
                                                                                "width": 15.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "plot"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "dict": [
                                                                                [
                                                                                    "Waitlist",
                                                                                    [
                                                                                        0
                                                                                    ]
                                                                                ],
                                                                                [
                                                                                    "Time",
                                                                                    "gANdcQBjZGF0ZXRpbWUKZGF0ZXRpbWUKcQFDCgfjBgEJAAAAAABxAoVxA1JxBGEu"
                                                                                ]
                                                                            ],
                                                                            "display_order": "of_creation",
                                                                            "pickled_keys": [
                                                                                "Time"
                                                                            ]
                                                                        },
                                                                        "key": 1618,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Record",
                                                                            "outgoing_links": {},
                                                                            "position": {
                                                                                "x": 5.519563999613053,
                                                                                "y": -0.7859267560572475
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "data"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {
                                                                                "startup": 0
                                                                            },
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "link.hub.Record.Waitlist.append(len(link.hub.Data.Waitlist))\r",
                                                                                "link.hub.Record.Time.append(link.hub.datetime.date_time)\r",
                                                                                "\r",
                                                                                "signal(self, (), delay(days = 7))"
                                                                            ]
                                                                        },
                                                                        "key": 1619,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Record",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1612,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 9.55578961375507,
                                                                                "y": -7.625327065521719
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "duration, minSessionSize, maxSessionSize, successRate, sessionSchedule",
                                                                            "roles_and_prioritizing": {
                                                                                "setup": 3
                                                                            },
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "link.hub.Input.DurationDays = duration\r",
                                                                                "link.hub.Input.MinSessionSize = minSessionSize\r",
                                                                                "link.hub.Input.MaxSessionSize = maxSessionSize\r",
                                                                                "link.hub.Input.SuccessRate = successRate\r",
                                                                                "link.hub.Input.SessionSchedule = sessionSchedule"
                                                                            ]
                                                                        },
                                                                        "key": 1620,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Setup",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1612,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 9.417960966070991,
                                                                                "y": -18.46107648244264
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "script_imports": {
                                                                                "datetime": [
                                                                                    "datetime",
                                                                                    "datetime"
                                                                                ]
                                                                            },
                                                                            "script_lines": [
                                                                                "def get_waitlist():\r",
                                                                                "    inTrng = link.hub.Data.InTraining\r",
                                                                                "    return [id for id in link.hub.Data.Waitlist\r",
                                                                                "        if inTrng[id]['RELEASED']]\r",
                                                                                "        \r",
                                                                                "\r",
                                                                                "\r",
                                                                                "def get_trainable_on_waitlist():\r",
                                                                                "    inTrng = link.hub.Data.InTraining\r",
                                                                                "    return [id for id in link.hub.Data.Waitlist\r",
                                                                                "        if not inTrng[id]['RESERVED']\r",
                                                                                "        and not inTrng[id]['DEPLOYED']\r",
                                                                                "        and not inTrng[id]['RELEASED']]\r",
                                                                                "    \r",
                                                                                "def count_trainable_on_waitlist():\r",
                                                                                "    return len(get_trainable_on_waitlist())\r",
                                                                                "    \r",
                                                                                "    \r",
                                                                                "def get_start_session_idx():\r",
                                                                                "    #assumes session schedule is in order\r",
                                                                                "    #returns the index of the first session based on the current datetime\r",
                                                                                "    \r",
                                                                                "    year = link.hub.datetime.year\r",
                                                                                "    \r",
                                                                                "    startDates = [datetime(year, m, d, 8, 0, 0) for m,d in link.hub.Input.SessionSchedule]\r",
                                                                                "    \r",
                                                                                "    delays = [(t - link.hub.datetime.get_date_time()).total_seconds() for t in startDates]\r",
                                                                                "    \r",
                                                                                "    #return the smallest positive delay\r",
                                                                                "    for i in range(len(delays)):\r",
                                                                                "        if delays[i] > 0:\r",
                                                                                "            return i\r",
                                                                                "   \r",
                                                                                "    #if no more sessions this year, return first session for next year\r",
                                                                                "    return 0\r",
                                                                                "    "
                                                                            ]
                                                                        },
                                                                        "key": 1621,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "library",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1612,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -11.156992490107825,
                                                                                "y": -15.437735791363107
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "library"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {
                                                                                "startup": 0
                                                                            },
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "link.hub.Data.SessionIdx = link.hub.library.get_start_session_idx()\r",
                                                                                "\r",
                                                                                "link.DelayToSessionStart()\r",
                                                                                "\r",
                                                                                "\r",
                                                                                ""
                                                                            ]
                                                                        },
                                                                        "key": 1622,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "GetFirstSession",
                                                                            "outgoing_links": {
                                                                                "DelayToSessionStart": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1623,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1612,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -6.831928977706746,
                                                                                "y": -34.44116769677284
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "nextYr = False",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {
                                                                                "datetime": [
                                                                                    "datetime",
                                                                                    "datetime"
                                                                                ]
                                                                            },
                                                                            "script_lines": [
                                                                                "session = link.hub.Input.SessionSchedule[link.hub.Data.SessionIdx]\r",
                                                                                "\r",
                                                                                "year = link.hub.datetime.year\r",
                                                                                "month = session[0]\r",
                                                                                "day = session[1]\r",
                                                                                "\r",
                                                                                "delayDays = (datetime(year, month, day, 8, 0, 0) - link.hub.datetime.date_time).total_seconds()/86400.0\r",
                                                                                "\r",
                                                                                "if delayDays < 0.0 or nextYr:\r",
                                                                                "    delayDays = (datetime(year + 1, month, day, 8, 0, 0) - link.hub.datetime.date_time).total_seconds()/86400.0\r",
                                                                                "\r",
                                                                                "signal(link.StartSession, (), delay(days = delayDays))\r",
                                                                                ""
                                                                            ]
                                                                        },
                                                                        "key": 1623,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "DelayToSessionStart",
                                                                            "outgoing_links": {
                                                                                "StartSession": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1624,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1612,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 1.5855408583978676,
                                                                                "y": -34.353601749967424
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "input = link.hub.Input\r",
                                                                                "data = link.hub.Data\r",
                                                                                "\r",
                                                                                "#get the list of potential session starts, up to max session size\r",
                                                                                "sessionList = link.hub.library.get_trainable_on_waitlist()[:input.MaxSessionSize]\r",
                                                                                "\r",
                                                                                "#if at least have the min session size\r",
                                                                                "if len(sessionList) >= input.MinSessionSize:\r",
                                                                                "    \r",
                                                                                "    #remove ids from waitlist and set status to attending training\r",
                                                                                "    for id in sessionList:\r",
                                                                                "        data.Waitlist.remove(id)\r",
                                                                                "        data.InTraining[id]['ATTENDING_TRNG'] = True\r",
                                                                                "    \r",
                                                                                "    #track attendance and start date\r",
                                                                                "    data.Attendance.append(len(sessionList))\r",
                                                                                "    data.StartDates.append(link.hub.datetime.date_time)\r",
                                                                                "    \r",
                                                                                "    #signal to finish the course after course duration\r",
                                                                                "    signal(link.Finish, sessionList, delay(days = input.DurationDays))\r",
                                                                                "\r",
                                                                                "#else record zero-loaded session\r",
                                                                                "else:\r",
                                                                                "    data.Attendance.append(0)\r",
                                                                                "    data.StartDates.append(link.hub.datetime.date_time)\r",
                                                                                "    \r",
                                                                                "#setup next session\r",
                                                                                "link.NextSession()"
                                                                            ]
                                                                        },
                                                                        "key": 1624,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "StartSession",
                                                                            "outgoing_links": {
                                                                                "Finish": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1625,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "NextSession": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1626,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1612,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 10.16430095764344,
                                                                                "y": -34.388760602833166
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "sessionList",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "input = link.hub.Input\r",
                                                                                "data = link.hub.Data\r",
                                                                                "#for each session attendee\r",
                                                                                "for ID in sessionList:\r",
                                                                                "    \r",
                                                                                "    if ID in data.InTraining:\r",
                                                                                "    \r",
                                                                                "        #update properties\r",
                                                                                "        props = data.InTraining[ID]\r",
                                                                                "        props['ATTENDING_TRNG'] = False\r",
                                                                                "        props['IN_TRAINING'] = False\r",
                                                                                "        props['TRAINING_COMPLETED'] = True\r",
                                                                                "\r",
                                                                                "        #if pass\r",
                                                                                "        if random.random() < input.SuccessRate:\r",
                                                                                "            result = 'P'\r",
                                                                                "        #else fail\r",
                                                                                "        else:\r",
                                                                                "            result = 'F'\r",
                                                                                "            props['TRAINING_FAILED'] = True\r",
                                                                                "                 \r",
                                                                                "        #remove\r",
                                                                                "        del data.InTraining[ID]\r",
                                                                                "\r",
                                                                                "        link.SndTrainFinish(props, result)"
                                                                            ]
                                                                        },
                                                                        "key": 1625,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "Finish",
                                                                            "outgoing_links": {
                                                                                "SndTrainFinish": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1615,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1612,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 18.44440284604379,
                                                                                "y": -34.377498855660235
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "#go to next session\r",
                                                                                "link.hub.Data.SessionIdx += 1\r",
                                                                                "\r",
                                                                                "if link.hub.Data.SessionIdx < len(link.hub.Input.SessionSchedule):\r",
                                                                                "    link.DelayToSessionStart(nextYr = False)\r",
                                                                                "    \r",
                                                                                "else:\r",
                                                                                "    link.hub.Data.SessionIdx = 0\r",
                                                                                "    link.DelayToSessionStart(nextYr = True)"
                                                                            ]
                                                                        },
                                                                        "key": 1626,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "NextSession",
                                                                            "outgoing_links": {
                                                                                "DelayToSessionStart": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1623,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                },
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1612,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": 5.983814681569553,
                                                                                "y": -42.51810526522001
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {},
                                                                        "key": 1627,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 1,
                                                                            "name": "StopTraining",
                                                                            "outgoing_links": {
                                                                                "Release": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1628,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -21.034880837044263,
                                                                                "y": -46.91947031151817
                                                                            },
                                                                            "size": {
                                                                                "height": 0.5,
                                                                                "scale_3d": 1.0,
                                                                                "width": 0.5
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "node"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "ID",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "if ID in link.hub.Data.InTraining:\r",
                                                                                "    del link.hub.Data.InTraining[ID]\r",
                                                                                "    \r",
                                                                                "if ID in link.hub.Data.Waitlist:\r",
                                                                                "    link.hub.Data.Waitlist.remove(ID)"
                                                                            ]
                                                                        },
                                                                        "key": 1628,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "minimal",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "StopTraining",
                                                                            "outgoing_links": {
                                                                                "hub": {
                                                                                    "bold": false,
                                                                                    "declutter": true,
                                                                                    "target_path": 1612,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -16.869280390907246,
                                                                                "y": -44.82919111941537
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    },
                                                                    {
                                                                        "content": {
                                                                            "parameters": "",
                                                                            "roles_and_prioritizing": {},
                                                                            "script_imports": {},
                                                                            "script_lines": [
                                                                                "print(link.library.get_waitlist())"
                                                                            ]
                                                                        },
                                                                        "key": 1629,
                                                                        "part_frame": {
                                                                            "comment": "",
                                                                            "detail_level": "full",
                                                                            "frame_style": "normal",
                                                                            "ifx_level": 0,
                                                                            "name": "function",
                                                                            "outgoing_links": {
                                                                                "library": {
                                                                                    "bold": false,
                                                                                    "declutter": false,
                                                                                    "target_path": 1621,
                                                                                    "visible": true,
                                                                                    "waypoints": []
                                                                                }
                                                                            },
                                                                            "position": {
                                                                                "x": -9.936127294350463,
                                                                                "y": -23.705182031625434
                                                                            },
                                                                            "size": {
                                                                                "height": 5.1,
                                                                                "scale_3d": 1.0,
                                                                                "width": 10.0
                                                                            },
                                                                            "visible": true
                                                                        },
                                                                        "type": "function"
                                                                    }
                                                                ],
                                                                "ifx_ports_left": [
                                                                    1614,
                                                                    1627
                                                                ],
                                                                "ifx_ports_right": [
                                                                    1615
                                                                ],
                                                                "image_id": null,
                                                                "proxy_position": {
                                                                    "x": -0.6806719555009858,
                                                                    "y": 1.7989187395383204
                                                                },
                                                                "rotation_2d": 0.0,
                                                                "rotation_3d": {
                                                                    "pitch": 0.0,
                                                                    "roll": 0.0,
                                                                    "yaw": 0.0
                                                                }
                                                            },
                                                            "key": 1608,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Training",
                                                                "outgoing_links": {},
                                                                "position": {
                                                                    "x": -8.874374904552498,
                                                                    "y": -39.957315946695566
                                                                },
                                                                "size": {
                                                                    "height": 3.392857142857143,
                                                                    "scale_3d": 1.0,
                                                                    "width": 6.398809523809524
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "actor"
                                                        },
                                                        {
                                                            "content": {
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "def count_deployed():\r",
                                                                    "    \r",
                                                                    "    inRank = link.hub.data.InRank\r",
                                                                    "\r",
                                                                    "    return len([id for id in inRank if inRank[id]['DEPLOYED']])\r",
                                                                    "    \r",
                                                                    "    "
                                                                ]
                                                            },
                                                            "key": 1630,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "library",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1586,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 3.2885695338145924,
                                                                    "y": -24.435898619316763
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "library"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {},
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "num = 1200\r",
                                                                    "print('In rank', sum(link.record.InRank[-num:])/num)\r",
                                                                    "print('Promotable', sum(link.record.Promotable[-num:])/num)\r",
                                                                    "print('Promos per yr', sum(link.record.Promotions[-num:])/len(link.record.Promotions[-num:])*12)\r",
                                                                    "print('Releases per yr', sum(link.record.Releases[-num:])/len(link.record.Releases[-num:])*12)\r",
                                                                    "print('CTs out per yr', sum(link.record.CTouts[-num:])/len(link.record.CTouts[-num:])*12)\r",
                                                                    "\r",
                                                                    "\r",
                                                                    "\r",
                                                                    ""
                                                                ]
                                                            },
                                                            "key": 1631,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "full",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "PrintSummary",
                                                                "outgoing_links": {
                                                                    "record": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1603,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": 4.876750797335997,
                                                                    "y": 8.519222745922649
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        },
                                                        {
                                                            "content": {
                                                                "parameters": "",
                                                                "roles_and_prioritizing": {
                                                                    "finish": 0
                                                                },
                                                                "script_imports": {},
                                                                "script_lines": [
                                                                    "rank = ''.join(filter(str.isalnum, link.hub.RankID.Name))\r",
                                                                    "cadre = link.hub.RankID.Cadre\r",
                                                                    "key = cadre + '_' + rank\r",
                                                                    "\r",
                                                                    "save = {}\r",
                                                                    "save[key + '_InRank'] = link.hub.record.InRank\r",
                                                                    "save[key + '_InTraining'] = link.hub.record.InTraining\r",
                                                                    "save[key + '_Deployed'] = link.hub.record.Deployed\r",
                                                                    "save[key + '_Promotable'] = link.hub.record.Promotable\r",
                                                                    "\r",
                                                                    "batch.set_replication_data(**save)"
                                                                ]
                                                            },
                                                            "key": 1632,
                                                            "part_frame": {
                                                                "comment": "",
                                                                "detail_level": "minimal",
                                                                "frame_style": "normal",
                                                                "ifx_level": 0,
                                                                "name": "Finish",
                                                                "outgoing_links": {
                                                                    "hub": {
                                                                        "bold": false,
                                                                        "declutter": false,
                                                                        "target_path": 1586,
                                                                        "visible": true,
                                                                        "waypoints": []
                                                                    }
                                                                },
                                                                "position": {
                                                                    "x": -16.99667830987209,
                                                                    "y": -24.241999645544695
                                                                },
                                                                "size": {
                                                                    "height": 5.1,
                                                                    "scale_3d": 1.0,
                                                                    "width": 10.0
                                                                },
                                                                "visible": true
                                                            },
                                                            "type": "function"
                                                        }
                                                    ],
                                                    "ifx_ports_left": [
                                                        1597,
                                                        1598,
                                                        1594
                                                    ],
                                                    "ifx_ports_right": [
                                                        1593,
                                                        1596,
                                                        1595,
                                                        1607
                                                    ],
                                                    "image_id": null,
                                                    "proxy_position": {
                                                        "x": -4.762093403985616,
                                                        "y": 3.5569417058638875
                                                    },
                                                    "rotation_2d": 0.0,
                                                    "rotation_3d": {
                                                        "pitch": 0.0,
                                                        "roll": 0.0,
                                                        "yaw": 0.0
                                                    }
                                                },
                                                "key": 1579,
                                                "part_frame": {
                                                    "comment": "",
                                                    "detail_level": "full",
                                                    "frame_style": "normal",
                                                    "ifx_level": 0,
                                                    "name": "Col",
                                                    "outgoing_links": {},
                                                    "position": {
                                                        "x": 35.4597926138109,
                                                        "y": -7.396640969488276
                                                    },
                                                    "size": {
                                                        "height": 5.595238095238095,
                                                        "scale_3d": 1.0,
                                                        "width": 6.19047619047619
                                                    },
                                                    "visible": true
                                                },
                                                "type": "actor"
                                            }
                                        ],
                                        "ifx_ports_left": [
                                            1415,
                                            1405
                                        ],
                                        "ifx_ports_right": [
                                            1413,
                                            1412
                                        ],
                                        "image_id": null,
                                        "proxy_position": {
                                            "x": 2.907396421569733,
                                            "y": 23.83177218446786
                                        },
                                        "rotation_2d": 0.0,
                                        "rotation_3d": {
                                            "pitch": 0.0,
                                            "roll": 0.0,
                                            "yaw": 0.0
                                        }
                                    },
                                    "key": 1388,
                                    "part_frame": {
                                        "comment": "",
                                        "detail_level": "full",
                                        "frame_style": "normal",
                                        "ifx_level": 0,
                                        "name": "ResForce",
                                        "outgoing_links": {},
                                        "position": {
                                            "x": 17.56581308174062,
                                            "y": -11.430729747442077
                                        },
                                        "size": {
                                            "height": 3.4226190476190474,
                                            "scale_3d": 1.0,
                                            "width": 7.113095238095238
                                        },
                                        "visible": true
                                    },
                                    "type": "actor"
                                },
                                {
                                    "content": {},
                                    "key": 1633,
                                    "part_frame": {
                                        "comment": "",
                                        "detail_level": "full",
                                        "frame_style": "normal",
                                        "ifx_level": 1,
                                        "name": "RegRecruit",
                                        "outgoing_links": {
                                            "Recruit": {
                                                "bold": false,
                                                "declutter": false,
                                                "target_path": 1217,
                                                "visible": true,
                                                "waypoints": []
                                            }
                                        },
                                        "position": {
                                            "x": 9.348753420392793,
                                            "y": 3.12402414761807
                                        },
                                        "size": {
                                            "height": 0.5,
                                            "scale_3d": 1.0,
                                            "width": 0.5
                                        },
                                        "visible": true
                                    },
                                    "type": "node"
                                },
                                {
                                    "content": {},
                                    "key": 1634,
                                    "part_frame": {
                                        "comment": "",
                                        "detail_level": "full",
                                        "frame_style": "normal",
                                        "ifx_level": 1,
                                        "name": "ResRecruit",
                                        "outgoing_links": {
                                            "Recruit": {
                                                "bold": false,
                                                "declutter": false,
                                                "target_path": 1415,
                                                "visible": true,
                                                "waypoints": []
                                            }
                                        },
                                        "position": {
                                            "x": 9.66027375790283,
                                            "y": -3.165636732931999
                                        },
                                        "size": {
                                            "height": 0.5,
                                            "scale_3d": 1.0,
                                            "width": 0.5
                                        },
                                        "visible": true
                                    },
                                    "type": "node"
                                }
                            ],
                            "ifx_ports_left": [
                                1633,
                                1634,
                                1381
                            ],
                            "ifx_ports_right": [],
                            "image_id": null,
                            "proxy_position": {
                                "x": -6.8675168746096515,
                                "y": 5.169299553082427
                            },
                            "rotation_2d": 0.0,
                            "rotation_3d": {
                                "pitch": 0.0,
                                "roll": 0.0,
                                "yaw": 0.0
                            }
                        },
                        "key": 1135,
                        "part_frame": {
                            "comment": "",
                            "detail_level": "full",
                            "frame_style": "normal",
                            "ifx_level": 0,
                            "name": "Establishment",
                            "outgoing_links": {},
                            "position": {
                                "x": 19.007730772481732,
                                "y": -7.420223449725384
                            },
                            "size": {
                                "height": 4.494047619047619,
                                "scale_3d": 1.0,
                                "width": 8.125
                            },
                            "visible": true
                        },
                        "type": "actor"
                    },
                    {
                        "content": {
                            "children": [
                                {
                                    "content": {
                                        "dict": [
                                            [
                                                "AgeMin",
                                                18
                                            ],
                                            [
                                                "AgeMode",
                                                21
                                            ],
                                            [
                                                "AgeMax",
                                                29
                                            ],
                                            [
                                                "IntakePlan",
                                                [
                                                    35
                                                ]
                                            ],
                                            [
                                                "PropFemale",
                                                [
                                                    0.15,
                                                    0.2,
                                                    0.25,
                                                    0.25
                                                ]
                                            ]
                                        ],
                                        "display_order": "of_creation",
                                        "pickled_keys": []
                                    },
                                    "key": 1636,
                                    "part_frame": {
                                        "comment": "",
                                        "detail_level": "full",
                                        "frame_style": "normal",
                                        "ifx_level": 0,
                                        "name": "RegIntakeInfo",
                                        "outgoing_links": {},
                                        "position": {
                                            "x": -10.051680464658771,
                                            "y": 9.952010385751203
                                        },
                                        "size": {
                                            "height": 6.994047619047619,
                                            "scale_3d": 1.0,
                                            "width": 8.273809523809524
                                        },
                                        "visible": true
                                    },
                                    "type": "data"
                                },
                                {
                                    "content": {
                                        "dict": [
                                            [
                                                "SimYear",
                                                0
                                            ],
                                            [
                                                "PersID",
                                                100000
                                            ]
                                        ],
                                        "display_order": "of_creation",
                                        "pickled_keys": []
                                    },
                                    "key": 1637,
                                    "part_frame": {
                                        "comment": "",
                                        "detail_level": "full",
                                        "frame_style": "normal",
                                        "ifx_level": 0,
                                        "name": "data",
                                        "outgoing_links": {},
                                        "position": {
                                            "x": 3.5840363776071356,
                                            "y": 10.361967137151511
                                        },
                                        "size": {
                                            "height": 6.071428571428571,
                                            "scale_3d": 1.0,
                                            "width": 5.982142857142857
                                        },
                                        "visible": true
                                    },
                                    "type": "data"
                                },
                                {
                                    "content": {
                                        "parameters": "",
                                        "roles_and_prioritizing": {
                                            "reset": 0
                                        },
                                        "script_imports": {},
                                        "script_lines": [
                                            "import datetime\r",
                                            "\r",
                                            "link.hub.data.SimYear = 0\r",
                                            "link.hub.data.PersID = 100000  #simulated recruits will start with this persID (make sure it doesn't conflict with input pop)\r",
                                            "\r",
                                            "link.hub.datetime.set_date_time(datetime.datetime(2017,10,25,9,0,0))"
                                        ]
                                    },
                                    "key": 1638,
                                    "part_frame": {
                                        "comment": "",
                                        "detail_level": "minimal",
                                        "frame_style": "normal",
                                        "ifx_level": 0,
                                        "name": "reset",
                                        "outgoing_links": {
                                            "hub": {
                                                "bold": false,
                                                "declutter": false,
                                                "target_path": 1643,
                                                "visible": true,
                                                "waypoints": []
                                            }
                                        },
                                        "position": {
                                            "x": 16.000292853924456,
                                            "y": 3.79859555366754
                                        },
                                        "size": {
                                            "height": 5.1,
                                            "scale_3d": 1.0,
                                            "width": 10.0
                                        },
                                        "visible": true
                                    },
                                    "type": "function"
                                },
                                {
                                    "content": {
                                        "date_time": {
                                            "day": 25,
                                            "hour": 9,
                                            "minute": 0,
                                            "month": 10,
                                            "second": 0,
                                            "year": 2017
                                        }
                                    },
                                    "key": 1639,
                                    "part_frame": {
                                        "comment": "",
                                        "detail_level": "full",
                                        "frame_style": "normal",
                                        "ifx_level": 0,
                                        "name": "datetime",
                                        "outgoing_links": {},
                                        "position": {
                                            "x": 11.789136604861891,
                                            "y": 9.349267259717324
                                        },
                                        "size": {
                                            "height": 4.0773809523809526,
                                            "scale_3d": 1.0,
                                            "width": 7.410714285714286
                                        },
                                        "visible": true
                                    },
                                    "type": "datetime"
                                },
                                {
                                    "content": {
                                        "parameters": "",
                                        "roles_and_prioritizing": {
                                            "startup": 0
                                        },
                                        "script_imports": {},
                                        "script_lines": [
                                            "#REG FORCE INTAKE\r",
                                            "\r",
                                            "#get the intake for the current sim year\r",
                                            "intakeIdx = min(len(link.hub.RegIntakeInfo.IntakePlan)-1, link.hub.data.SimYear)\r",
                                            "intake = link.hub.RegIntakeInfo.IntakePlan[intakeIdx]\r",
                                            "\r",
                                            "#get the proportion of female recruits for the current sim year\r",
                                            "femaleIdx = min(len(link.hub.RegIntakeInfo.PropFemale)-1, link.hub.data.SimYear)\r",
                                            "propFemale = link.hub.RegIntakeInfo.PropFemale[femaleIdx]\r",
                                            "\r",
                                            "#for each recruit\r",
                                            "for i in range(intake):\r",
                                            "    \r",
                                            "    #signal Hire with random delay within the year\r",
                                            "    d = random.randint(0,365)\r",
                                            "    signal(link.Hire, propFemale, delay(days = d))\r",
                                            "\r",
                                            "#repeat next year\r",
                                            "link.hub.data.SimYear += 1\r",
                                            "signal(self, (), link.hub.datetime.delay(years = 1))"
                                        ]
                                    },
                                    "key": 1640,
                                    "part_frame": {
                                        "comment": "",
                                        "detail_level": "minimal",
                                        "frame_style": "normal",
                                        "ifx_level": 0,
                                        "name": "TriggerRecruits",
                                        "outgoing_links": {
                                            "Hire": {
                                                "bold": false,
                                                "declutter": false,
                                                "target_path": 1641,
                                                "visible": true,
                                                "waypoints": []
                                            },
                                            "hub": {
                                                "bold": false,
                                                "declutter": true,
                                                "target_path": 1643,
                                                "visible": true,
                                                "waypoints": []
                                            }
                                        },
                                        "position": {
                                            "x": 1.6475661235080292,
                                            "y": -8.988344581976417
                                        },
                                        "size": {
                                            "height": 5.1,
                                            "scale_3d": 1.0,
                                            "width": 10.0
                                        },
                                        "visible": true
                                    },
                                    "type": "function"
                                },
                                {
                                    "content": {
                                        "parameters": "propFemale",
                                        "roles_and_prioritizing": {},
                                        "script_imports": {
                                            "timedelta": [
                                                "datetime",
                                                "timedelta"
                                            ]
                                        },
                                        "script_lines": [
                                            "#ID number\r",
                                            "link.hub.data.PersID += 1\r",
                                            "ID = link.hub.data.PersID\r",
                                            "\r",
                                            "#age\r",
                                            "age = random.triangular(link.hub.RegIntakeInfo.AgeMin, link.hub.RegIntakeInfo.AgeMax, link.hub.RegIntakeInfo.AgeMode)\r",
                                            "DOB = link.hub.datetime.date_time - timedelta(days = age*365.25)\r",
                                            "\r",
                                            "#sex\r",
                                            "female = random.random() < propFemale\r",
                                            "SEX = 'F' if female else 'M'\r",
                                            "\r",
                                            "#creates properties dictionary for this person\r",
                                            "props = {}\r",
                                            "props['ID'] = ID\r",
                                            "props['DOB'] = DOB\r",
                                            "props['SEX'] = SEX\r",
                                            "props['DOH'] = link.hub.datetime.date_time\r",
                                            "\r",
                                            "\r",
                                            "link.SndRegRecruit(props)\r",
                                            ""
                                        ]
                                    },
                                    "key": 1641,
                                    "part_frame": {
                                        "comment": "",
                                        "detail_level": "minimal",
                                        "frame_style": "normal",
                                        "ifx_level": 0,
                                        "name": "Hire",
                                        "outgoing_links": {
                                            "SndRegRecruit": {
                                                "bold": false,
                                                "declutter": false,
                                                "target_path": 1642,
                                                "visible": true,
                                                "waypoints": []
                                            },
                                            "hub": {
                                                "bold": false,
                                                "declutter": true,
                                                "target_path": 1643,
                                                "visible": true,
                                                "waypoints": []
                                            }
                                        },
                                        "position": {
                                            "x": 12.514851866913952,
                                            "y": -9.093077601774151
                                        },
                                        "size": {
                                            "height": 5.1,
                                            "scale_3d": 1.0,
                                            "width": 10.0
                                        },
                                        "visible": true
                                    },
                                    "type": "function"
                                },
                                {
                                    "content": {},
                                    "key": 1642,
                                    "part_frame": {
                                        "comment": "",
                                        "detail_level": "full",
                                        "frame_style": "normal",
                                        "ifx_level": 1,
                                        "name": "SndRegRecruit",
                                        "outgoing_links": {
                                            "RegRecruit": {
                                                "bold": false,
                                                "declutter": false,
                                                "target_path": 1633,
                                                "visible": true,
                                                "waypoints": []
                                            }
                                        },
                                        "position": {
                                            "x": 23.430145802664356,
                                            "y": -11.278633539224574
                                        },
                                        "size": {
                                            "height": 0.5,
                                            "scale_3d": 1.0,
                                            "width": 0.5
                                        },
                                        "visible": true
                                    },
                                    "type": "node"
                                },
                                {
                                    "content": {},
                                    "key": 1643,
                                    "part_frame": {
                                        "comment": "",
                                        "detail_level": "full",
                                        "frame_style": "normal",
                                        "ifx_level": 0,
                                        "name": "hub",
                                        "outgoing_links": {
                                            "RegIntakeInfo": {
                                                "bold": false,
                                                "declutter": false,
                                                "target_path": 1636,
                                                "visible": true,
                                                "waypoints": []
                                            },
                                            "ResIntakeInfo": {
                                                "bold": false,
                                                "declutter": false,
                                                "target_path": 1645,
                                                "visible": true,
                                                "waypoints": []
                                            },
                                            "data": {
                                                "bold": false,
                                                "declutter": false,
                                                "target_path": 1637,
                                                "visible": true,
                                                "waypoints": []
                                            },
                                            "datetime": {
                                                "bold": false,
                                                "declutter": false,
                                                "target_path": 1639,
                                                "visible": true,
                                                "waypoints": []
                                            }
                                        },
                                        "position": {
                                            "x": 9.20946463497613,
                                            "y": -0.4269288241379663
                                        },
                                        "size": {
                                            "height": 1.5,
                                            "scale_3d": 1.0,
                                            "width": 1.5
                                        },
                                        "visible": true
                                    },
                                    "type": "hub"
                                },
                                {
                                    "content": {
                                        "parameters": "regIntake, resIntake",
                                        "roles_and_prioritizing": {
                                            "setup": 0
                                        },
                                        "script_imports": {},
                                        "script_lines": [
                                            "link.hub.RegIntakeInfo.IntakePlan = [regIntake]\r",
                                            "link.hub.ResIntakeInfo.IntakePlan = [resIntake]"
                                        ]
                                    },
                                    "key": 1644,
                                    "part_frame": {
                                        "comment": "",
                                        "detail_level": "minimal",
                                        "frame_style": "normal",
                                        "ifx_level": 0,
                                        "name": "Setup",
                                        "outgoing_links": {
                                            "hub": {
                                                "bold": false,
                                                "declutter": false,
                                                "target_path": 1643,
                                                "visible": true,
                                                "waypoints": []
                                            }
                                        },
                                        "position": {
                                            "x": 16.12645902218016,
                                            "y": -1.6325551108873761
                                        },
                                        "size": {
                                            "height": 5.1,
                                            "scale_3d": 1.0,
                                            "width": 10.0
                                        },
                                        "visible": true
                                    },
                                    "type": "function"
                                },
                                {
                                    "content": {
                                        "dict": [
                                            [
                                                "AgeMin",
                                                18
                                            ],
                                            [
                                                "AgeMode",
                                                21
                                            ],
                                            [
                                                "AgeMax",
                                                29
                                            ],
                                            [
                                                "IntakePlan",
                                                [
                                                    16
                                                ]
                                            ],
                                            [
                                                "PropFemale",
                                                [
                                                    0.15,
                                                    0.2,
                                                    0.25,
                                                    0.25
                                                ]
                                            ]
                                        ],
                                        "display_order": "of_creation",
                                        "pickled_keys": []
                                    },
                                    "key": 1645,
                                    "part_frame": {
                                        "comment": "",
                                        "detail_level": "full",
                                        "frame_style": "normal",
                                        "ifx_level": 0,
                                        "name": "ResIntakeInfo",
                                        "outgoing_links": {},
                                        "position": {
                                            "x": -10.105055277729582,
                                            "y": 1.1858000639356499
                                        },
                                        "size": {
                                            "height": 6.994047619047619,
                                            "scale_3d": 1.0,
                                            "width": 8.273809523809524
                                        },
                                        "visible": true
                                    },
                                    "type": "data"
                                },
                                {
                                    "content": {},
                                    "key": 1646,
                                    "part_frame": {
                                        "comment": "",
                                        "detail_level": "full",
                                        "frame_style": "normal",
                                        "ifx_level": 1,
                                        "name": "SndResRecruit",
                                        "outgoing_links": {
                                            "ResRecruit": {
                                                "bold": false,
                                                "declutter": false,
                                                "target_path": 1634,
                                                "visible": true,
                                                "waypoints": []
                                            }
                                        },
                                        "position": {
                                            "x": 23.624211114648205,
                                            "y": -20.550080394392523
                                        },
                                        "size": {
                                            "height": 0.5,
                                            "scale_3d": 1.0,
                                            "width": 0.5
                                        },
                                        "visible": true
                                    },
                                    "type": "node"
                                },
                                {
                                    "content": {
                                        "parameters": "propFemale",
                                        "roles_and_prioritizing": {},
                                        "script_imports": {
                                            "timedelta": [
                                                "datetime",
                                                "timedelta"
                                            ]
                                        },
                                        "script_lines": [
                                            "#ID number\r",
                                            "link.hub.data.PersID += 1\r",
                                            "ID = link.hub.data.PersID\r",
                                            "\r",
                                            "#age\r",
                                            "age = random.triangular(link.hub.ResIntakeInfo.AgeMin, link.hub.ResIntakeInfo.AgeMax, link.hub.ResIntakeInfo.AgeMode)\r",
                                            "DOB = link.hub.datetime.date_time - timedelta(days = age*365.25)\r",
                                            "\r",
                                            "#sex\r",
                                            "female = random.random() < propFemale\r",
                                            "SEX = 'F' if female else 'M'\r",
                                            "\r",
                                            "#creates properties dictionary for this person\r",
                                            "props = {}\r",
                                            "props['ID'] = ID\r",
                                            "props['DOB'] = DOB\r",
                                            "props['SEX'] = SEX\r",
                                            "props['DOH'] = link.hub.datetime.date_time\r",
                                            "\r",
                                            "\r",
                                            "link.SndResRecruit(props)\r",
                                            ""
                                        ]
                                    },
                                    "key": 1647,
                                    "part_frame": {
                                        "comment": "",
                                        "detail_level": "minimal",
                                        "frame_style": "normal",
                                        "ifx_level": 0,
                                        "name": "Hire",
                                        "outgoing_links": {
                                            "SndResRecruit": {
                                                "bold": false,
                                                "declutter": false,
                                                "target_path": 1646,
                                                "visible": true,
                                                "waypoints": []
                                            },
                                            "hub": {
                                                "bold": false,
                                                "declutter": true,
                                                "target_path": 1643,
                                                "visible": true,
                                                "waypoints": []
                                            }
                                        },
                                        "position": {
                                            "x": 12.899099958283294,
                                            "y": -18.243145896908466
                                        },
                                        "size": {
                                            "height": 5.1,
                                            "scale_3d": 1.0,
                                            "width": 10.0
                                        },
                                        "visible": true
                                    },
                                    "type": "function"
                                },
                                {
                                    "content": {
                                        "parameters": "",
                                        "roles_and_prioritizing": {
                                            "startup": 0
                                        },
                                        "script_imports": {},
                                        "script_lines": [
                                            "#REG FORCE INTAKE\r",
                                            "\r",
                                            "#get the intake for the current sim year\r",
                                            "intakeIdx = min(len(link.hub.ResIntakeInfo.IntakePlan)-1, link.hub.data.SimYear)\r",
                                            "intake = link.hub.ResIntakeInfo.IntakePlan[intakeIdx]\r",
                                            "\r",
                                            "#get the proportion of female recruits for the current sim year\r",
                                            "femaleIdx = min(len(link.hub.ResIntakeInfo.PropFemale)-1, link.hub.data.SimYear)\r",
                                            "propFemale = link.hub.ResIntakeInfo.PropFemale[femaleIdx]\r",
                                            "\r",
                                            "#for each recruit\r",
                                            "for i in range(intake):\r",
                                            "    \r",
                                            "    #signal Hire with random delay within the year\r",
                                            "    d = random.randint(0,365)\r",
                                            "    signal(link.Hire, propFemale, delay(days = d))\r",
                                            "\r",
                                            "#repeat next year\r",
                                            "link.hub.data.SimYear += 1\r",
                                            "signal(self, (), link.hub.datetime.delay(years = 1))"
                                        ]
                                    },
                                    "key": 1648,
                                    "part_frame": {
                                        "comment": "",
                                        "detail_level": "minimal",
                                        "frame_style": "normal",
                                        "ifx_level": 0,
                                        "name": "TriggerRecruits",
                                        "outgoing_links": {
                                            "Hire": {
                                                "bold": false,
                                                "declutter": false,
                                                "target_path": 1647,
                                                "visible": true,
                                                "waypoints": []
                                            },
                                            "hub": {
                                                "bold": false,
                                                "declutter": true,
                                                "target_path": 1643,
                                                "visible": true,
                                                "waypoints": []
                                            }
                                        },
                                        "position": {
                                            "x": 2.0318142148773704,
                                            "y": -18.13841287711073
                                        },
                                        "size": {
                                            "height": 5.1,
                                            "scale_3d": 1.0,
                                            "width": 10.0
                                        },
                                        "visible": true
                                    },
                                    "type": "function"
                                }
                            ],
                            "ifx_ports_left": [],
                            "ifx_ports_right": [
                                1642,
                                1646
                            ],
                            "image_id": null,
                            "proxy_position": {
                                "x": 7.233079971354544,
                                "y": 16.182504017680056
                            },
                            "rotation_2d": 0.0,
                            "rotation_3d": {
                                "pitch": 0.0,
                                "roll": 0.0,
                                "yaw": 0.0
                            }
                        },
                        "key": 1635,
                        "part_frame": {
                            "comment": "",
                            "detail_level": "full",
                            "frame_style": "normal",
                            "ifx_level": 0,
                            "name": "RECRUIT",
                            "outgoing_links": {},
                            "position": {
                                "x": 8.154761904761905,
                                "y": -3.8106431529811515
                            },
                            "size": {
                                "height": 3.333333333333333,
                                "scale_3d": 1.0,
                                "width": 5.892857142857142
                            },
                            "visible": true
                        },
                        "type": "actor"
                    },
                    {
                        "content": {
                            "parameters": "",
                            "roles_and_prioritizing": {},
                            "script_imports": {},
                            "script_lines": [
                                "print(len(batch.get_key_names()))\r",
                                "\r",
                                "bd = batch.load_data(1)\r",
                                "\r",
                                "cadre = 'RegF'\r",
                                "cat = 'InTraining'\r",
                                "\r",
                                "print(bd[cadre + '_LtCapt_' + cat])\r",
                                "print(bd[cadre + '_Maj_' + cat])\r",
                                "print(bd[cadre + '_LCol_' + cat])\r",
                                "print(bd[cadre + '_Col_' + cat])\r",
                                "\r",
                                "print(len(bd[cadre + '_LtCapt_' + cat]))\r",
                                "print(len(bd[cadre + '_LtCapt_' + cat][0]))"
                            ]
                        },
                        "key": 1649,
                        "part_frame": {
                            "comment": "",
                            "detail_level": "full",
                            "frame_style": "normal",
                            "ifx_level": 0,
                            "name": "BatchOutputCheck",
                            "outgoing_links": {},
                            "position": {
                                "x": 17.65406224034,
                                "y": -14.912508608741549
                            },
                            "size": {
                                "height": 9.255952380952381,
                                "scale_3d": 1.0,
                                "width": 11.964285714285714
                            },
                            "visible": true
                        },
                        "type": "function"
                    }
                ],
                "ifx_ports_left": [],
                "ifx_ports_right": [],
                "image_id": null,
                "proxy_position": {
                    "x": 12.177797584083427,
                    "y": 0.8004265690734369
                },
                "rotation_2d": 0.0,
                "rotation_3d": {
                    "pitch": 0.0,
                    "roll": 0.0,
                    "yaw": 0.0
                }
            },
            "key": 1100,
            "part_frame": {
                "comment": "",
                "detail_level": "full",
                "frame_style": "normal",
                "ifx_level": 0,
                "name": "root_actor",
                "outgoing_links": {},
                "position": {
                    "x": 0.0,
                    "y": 0.0
                },
                "size": {
                    "height": 5.6,
                    "scale_3d": 1.0,
                    "width": 6.2
                },
                "visible": true
            },
            "type": "actor"
        }
    },
    "schema_version": 4,
    "sim_config": {
        "sim_time_days": 0,
        "wall_clock_sec": 0.0
    }
}